(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357,3396],{4755:function(e,n,t){Promise.resolve().then(t.bind(t,97720))},97720:function(e,n,t){"use strict";t.r(n),t.d(n,{SourceCodeBrowser:function(){return nl},SourceCodeBrowserContext:function(){return nt}});var r=t(36164),s=t(3546),a=t(11978),l=t(57778),i=t(1853),o=t(94909),c=t(74630),d=t(26165),u=t(21454),f=t(43240),m=t(44645),h=t(80605),p=t(63484),v=t(3765),x=t(11634),g=t(70410),b=t(74248),y=t(53538),j=t(30601),N=t(90379),k=t(38736),w=t(27064),S=t(50538),C=t(42891),I=t.n(C),E=t(23342),R=t(91655),A=t(2578),P=t(93877),O=t(28312);let F=e=>{let[n,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let n=e.current,r=new IntersectionObserver(e=>{let[n]=e;t(n.intersectionRatio<1)},{threshold:[1]});return n&&r.observe(n),()=>{n&&r.unobserve(n)}},[e.current]),n};var D=t(31458),T=t(81565),L=t(11208),_=t(29),$=t(70652),z=t.n($),U=t(48537),M=t(48048);let B=e=>{let{className:n}=e,{currentFileRoutes:t,activeRepo:a,activeEntryInfo:l}=s.useContext(nt),i=null==l?void 0:l.basename,o=s.useMemo(()=>{var e;let n=null==l?void 0:l.basename,t=[{name:null!==(e=null==l?void 0:l.repositoryName)&&void 0!==e?e:"",href:(0,M.I)(a,l.rev,"","dir")}];if(n){let e=decodeURIComponent(n).split("/")||[];for(let n=0;n<e.length;n++){let r=e.slice(0,n+1).join("/"),s=(0,M.i3)(r);t.push({name:decodeURIComponent(s),href:(0,M.I)(a,l.rev,r,"dir")})}}return t},[l,a]);return(0,r.jsxs)("div",{className:(0,b.cn)("flex flex-nowrap items-center gap-1",n),children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 overflow-x-auto leading-8",children:[(0,r.jsx)(z(),{className:"cursor-pointer font-medium text-primary hover:underline",href:"/files",children:"Repositories"}),(0,r.jsx)("div",{children:"/"}),null==o?void 0:o.map((e,n)=>{let t=0===n&&(null==o?void 0:o.length)>1,a=n===o.length-1,l=(0,b.cn)("whitespace-nowrap",t||a?"font-bold":"font-medium",a?"":"cursor-pointer text-primary hover:underline",t?"hover:underline":void 0);return(0,r.jsxs)(s.Fragment,{children:[a?(0,r.jsx)("div",{className:l,children:e.name}):(0,r.jsx)(z(),{className:l,href:"/files/".concat(e.href),children:e.name}),!a&&(0,r.jsx)("div",{children:"/"})]},e.href)})]}),!!(null==t?void 0:t.length)&&!!i&&(0,r.jsx)(U.q,{className:"shrink-0",value:i})]})},q=e=>{let{blob:n,className:t,canCopy:a,hideBlobActions:l,contentLength:i,children:o,...c}=e,{chatSideBarVisible:d,setChatSideBarVisible:u,isChatEnabled:f}=s.useContext(nt),[m]=(0,P.Ds)(),h=s.useRef(null),{activePath:p}=s.useContext(nt),{isCopied:v,copyToClipboard:x}=(0,O.m)({timeout:2e3}),g=F(h),y=f&&m.value&&!d,j=i?(0,R.Z)(i):"",N=async()=>{if(!v&&n)try{let e=await n.text();x(e)}catch(e){A.A.error("Something went wrong. Please try again.")}};return(0,r.jsxs)("div",{className:(0,b.cn)("sticky -top-1 z-10 border",!g&&"rounded-t-lg",t),ref:h,...c,children:[g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-secondary pl-4",children:(0,r.jsx)(B,{className:"py-2"})}),g&&(0,r.jsx)(L.Z,{})]}),!l&&(0,r.jsxs)("div",{className:(0,b.cn)("flex items-center justify-between bg-secondary p-2 text-secondary-foreground",!g&&"rounded-t-lg"),children:[(0,r.jsxs)("div",{className:"flex h-8 items-center gap-4 leading-8",children:[o,(0,r.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:j})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[a&&(0,r.jsxs)(_.u,{children:[(0,r.jsx)(_.aJ,{asChild:!0,children:(0,r.jsxs)(D.z,{variant:"ghost",size:"icon",onClick:N,children:[v?(0,r.jsx)(T.IconCheck,{className:"text-green-600"}):(0,r.jsx)(T.IconCopy,{}),(0,r.jsx)("span",{className:"sr-only",children:"Copy"})]})}),(0,r.jsx)(_._v,{children:"Copy raw file"})]}),!!n&&(0,r.jsxs)(_.u,{children:[(0,r.jsx)(_.aJ,{asChild:!0,children:(0,r.jsx)("a",{className:(0,D.d)({variant:"ghost",size:"icon"}),download:(0,M.i3)(null!=p?p:""),href:URL.createObjectURL(n),children:(0,r.jsx)(T.IconDownload,{})})}),(0,r.jsx)(_._v,{children:"Download raw file"})]}),y&&(0,r.jsxs)(_.u,{children:[(0,r.jsx)(_.aJ,{asChild:!0,children:(0,r.jsxs)(D.z,{variant:"ghost",className:"flex shrink-0 items-center gap-1 px-2",onClick:e=>u(!d),children:[(0,r.jsx)(I(),{alt:"Tabby logo",src:E.Z,width:24}),"Ask Tabby"]})}),(0,r.jsx)(_._v,{children:"Open chat panel"})]})]})]})]})},Z=e=>{let{className:n,blob:t,isImage:a}=e,{activePath:l}=(0,s.useContext)(nt);return(0,r.jsx)("div",{className:(0,b.cn)(n),children:(0,r.jsx)("div",{className:"rounded-b-lg border border-t-0 p-2 text-center",children:a?(0,r.jsx)("img",{className:"mx-auto",src:t?URL.createObjectURL(t):void 0}):(0,r.jsx)("a",{className:"text-primary hover:underline",download:(0,M.i3)(null!=l?l:""),href:t?URL.createObjectURL(t):"",target:"_blank",children:"View raw"})})})},G=s.lazy(()=>Promise.all([t.e(9148),t.e(7844)]).then(t.bind(t,47844))),H=s.lazy(()=>Promise.all([t.e(5606),t.e(177),t.e(557)]).then(t.bind(t,30557))),V=e=>{var n;let{className:t}=e,{searchParams:a}=(0,m.Z)(),{activePath:l}=(0,s.useContext)(nt),{textValue:i}=(0,s.useContext)(J),o=l?(0,p.U$)(l)[0]:void 0,c=null!=o?o:"plain",d=(null===(n=a.get("plain"))||void 0===n?void 0:n.toString())==="1";return(0,r.jsx)("div",{className:(0,b.cn)(t),children:(0,r.jsx)("div",{className:"rounded-b-lg border border-t-0 py-2",children:(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(N.cg,{className:"p-2"}),children:i&&"markdown"===c&&!d?(0,r.jsx)(H,{value:i}):(0,r.jsx)(G,{value:null!=i?i:"",language:c})})})})},J=s.createContext({}),Y=e=>{var n;let{className:t,blob:a,contentLength:l,fileDisplayType:i,loading:o}=e,{searchParams:c,updateUrlComponents:d}=(0,m.Z)(),{activePath:u}=s.useContext(nt),{textValue:f}=s.useContext(J),h="raw"===i||"image"===i,v=u?(0,p.U$)(u)[0]:void 0,x=(null===(n=c.get("plain"))||void 0===n?void 0:n.toString())==="1";return(0,r.jsxs)("div",{className:(0,b.cn)(t),children:[(0,r.jsx)(q,{blob:a,contentLength:l,canCopy:!h,children:!!f&&"markdown"===(null!=v?v:"plain")&&(0,r.jsx)(S.mQ,{value:x?"1":"0",onValueChange:e=>{"1"===e?d({searchParams:{set:{plain:"1"}}}):d({searchParams:{del:"plain"}})},children:(0,r.jsxs)(S.dr,{children:[(0,r.jsx)(S.SP,{value:"0",children:"Preview"}),(0,r.jsx)(S.SP,{value:"1",children:"Code"})]})})}),o&&!a?(0,r.jsx)(N.cg,{className:"p-2"}):h?(0,r.jsx)(Z,{blob:a,isImage:"image"===i}):(0,r.jsx)(V,{})]})},W=e=>{let{blob:n,fileDisplayType:t,contentLength:a}=e,[l,i]=s.useState();return s.useEffect(()=>{let e=async e=>{try{let n=await e.text();i(n)}catch(e){i("")}};n&&"text"===t&&e(n)},[n,t]),(0,r.jsx)(J.Provider,{value:{textValue:l},children:(0,r.jsx)(Y,{blob:n,fileDisplayType:t,contentLength:a})})};var Q=t(826),K=t(18452),X=t(16784),ee=t(98454),en=t(25647),et=t(17451);let er=e=>{let{className:n,...t}=e,[{data:a}]=(0,ee.P)(),{pendingEvent:l,setPendingEvent:i,repoMap:o,updateActivePath:c}=s.useContext(nt),d=(0,en.o)(et.a,e=>e.activeChatId),u=s.useRef(null),f=(0,X.d)(o),m=async e=>{if((null==e?void 0:e.filepath)&&(null==e?void 0:e.git_url)){let t=(0,b.nO)(null==e?void 0:e.range),r=f.current,s=(0,Q.Z)(Object.keys(r),n=>{var t;return(null==r?void 0:null===(t=r[n])||void 0===t?void 0:t.gitUrl)===e.git_url});if(s){let a=r[s];if(a){var n;let r=(0,M.s8)(a.refs),s=null===(n=(0,M.r2)(r))||void 0===n?void 0:n.name,l=e.filepath?(0,p.U$)(e.filepath)[0]:void 0;c((0,M.I)(a,s,e.filepath,e.kind),{hash:t,replace:!1,plain:"markdown"===l&&!!t});return}}}},h=(0,K.m)(u,{navigate:m,refresh:async()=>{window.location.reload(),await new Promise(e=>{setTimeout(()=>e(null),1e3)})}}),v=e=>{let{action:n}=e,t="";switch(n){case"explain":t="Explain the selected code:";break;case"generate_unittest":t="Generate a unit test for the selected code:";break;case"generate_doc":t="Generate documentation for the selected code:"}return t};return(s.useEffect(()=>{(null==u?void 0:u.current)&&a&&(null==h||h.init({fetcherOptions:{authorization:a.me.authToken}}))},[null==u?void 0:u.current,h,a]),s.useEffect(()=>{if(l&&h){let{lineFrom:e,lineTo:n,code:t,path:r,gitUrl:s}=l;h.sendMessage({message:v(l),selectContext:{kind:"file",content:t,range:{start:e,end:null!=n?n:e},filepath:r,git_url:s}})}i(void 0)},[l,h]),null==a?void 0:a.me)?(0,r.jsxs)("div",{className:(0,b.cn)("flex h-full flex-col",n),...t,children:[(0,r.jsx)(es,{}),(0,r.jsx)("iframe",{src:"/chat",className:"w-full flex-1 border-0",ref:u},d)]}):(0,r.jsx)(r.Fragment,{})};function es(){let{setChatSideBarVisible:e}=s.useContext(nt);return(0,r.jsx)("div",{className:"sticky top-0 flex items-center justify-end px-2 py-1",children:(0,r.jsx)(D.z,{size:"icon",variant:"ghost",onClick:n=>e(!1),children:(0,r.jsx)(T.IconClose,{})})})}var ea=t(24685),el=t(91299),ei=t(40055),eo=t(24449),ec=t(82394);let ed=e=>{var n;let{className:t}=e,l=(0,a.useRouter)(),i=(0,a.useSearchParams)(),{activeEntryInfo:o,activeRepo:c,activeRepoRef:d,updateActivePath:u}=s.useContext(nt),[f,m]=s.useState(null===(n=i.get("q"))||void 0===n?void 0:n.toString()),[h]=(0,eo.n)(f,300),p=s.useRef(null),v=null==c?void 0:c.kind,x=null==c?void 0:c.id,y=s.useMemo(()=>(0,el.Z)(h).replace(/-?[f|lang]:(\S+)/g,""),[h]),[{data:j}]=(0,ei.aM)({query:g.D7,variables:{kind:v,id:x,pattern:null!=y?y:"",rev:null==d?void 0:d.name},pause:!x||!v||!y}),N=s.useMemo(()=>{var e,n;if(!y)return[];let t=null==j?void 0:null===(e=j.repositorySearch)||void 0===e?void 0:e.slice(0,5);return null!==(n=null==t?void 0:t.map(e=>({repositorySearch:e,value:e.path,label:e.path,type:"file"})))&&void 0!==n?n:[]},[null==j?void 0:j.repositorySearch,y]),k=s.useMemo(()=>{let e=[{label:"Include only results from file path matching the given search pattern.",value:"f",type:"tips"},{label:"Exclude results from file path matching the given search pattern.",value:"-f",type:"tips"},{label:"Include only results from the given language.",value:"lang",type:"tips"},{label:"Exclude results from the given language.",value:"-lang",type:"tips"}];if(!f)return[e[0],e[2]];let n=f.match(/(^|\s)-$/),t=f.match(/(^|\s)-?f$/),r=f.match(/(^|\s)-?l(a(n(g)?)?)?$/);return n?[e[1],e[3]]:t||r?t?e.slice(0,2):r?e.slice(2):[]:[]},[f]),{isOpen:w,getMenuProps:S,getInputProps:C,highlightedIndex:I,getItemProps:E,openMenu:R}=(0,ea.Kb)({items:N,onSelectedItemChange(e){let{selectedItem:n}=e;if((null==n?void 0:n.type)==="file"&&n.repositorySearch){let e=(0,M.I)(c,null==d?void 0:d.name,n.repositorySearch.path,n.repositorySearch.type);u(e);return}P(null==n?void 0:n.value)},stateReducer(e,n){let{type:t,changes:r}=n;switch(t){case ea.Kb.stateChangeTypes.InputClick:return{...r,highlightedIndex:void 0,isOpen:!0};case ea.Kb.stateChangeTypes.InputKeyDownArrowDown:{if(!(null==N?void 0:N.length)||!e.isOpen)return r;let n=e.highlightedIndex===N.length-1;return{...r,highlightedIndex:n?void 0:r.highlightedIndex}}case ea.Kb.stateChangeTypes.InputKeyDownArrowUp:{if(!(null==N?void 0:N.length)||!e.isOpen)return r;let n=0===e.highlightedIndex;return{...r,highlightedIndex:n?void 0:r.highlightedIndex}}default:return r}}}),A=e=>{w||R(),m(e)};s.useEffect(()=>{let e=e=>{var n,t;let r=e.target,s=null==r?void 0:null===(n=r.tagName)||void 0===n?void 0:n.toLowerCase();"input"!==s&&"textarea"!==s&&"select"!==s&&"/"===e.key&&(e.preventDefault(),null===(t=p.current)||void 0===t||t.focus(),R())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let P=e=>{if(!e)return;let n=(0,M.I)(c,null==o?void 0:o.rev,"","search");l.push("/files/".concat(n,"?q=").concat(encodeURIComponent(e)))},O=!(null==k?void 0:k.length)&&!(null==N?void 0:N.length);return(0,r.jsx)("div",{className:(0,b.cn)("flex w-full shrink-0 items-center bg-background px-4 py-3.5 transition duration-500 ease-in-out",t),children:(0,r.jsxs)("div",{className:(0,b.cn)("relative w-full"),children:[(0,r.jsxs)("div",{className:"h-9",children:[(0,r.jsx)("div",{className:(0,b.cn)({"absolute z-10 inset-0":w}),children:(0,r.jsx)(ec.I,{className:"w-full",...C({onKeyDown:e=>{"Enter"!==e.key||e.nativeEvent.isComposing||(e.preventDefault(),P(f))},ref:p}),value:f,onChange:e=>A(e.target.value)})}),!f&&(0,r.jsxs)("div",{className:"absolute left-3 top-1.5 cursor-text select-none text-muted-foreground",onClick:e=>{var n;e.preventDefault(),null===(n=p.current)||void 0===n||n.focus(),R()},children:["Type"," ",(0,r.jsx)("kbd",{className:"rounded border border-muted-foreground px-0.5",children:"/"})," ","to search"]})]}),(0,r.jsxs)("div",{className:"absolute right-2 top-0 z-20 flex h-full items-center",children:[f?(0,r.jsx)(D.z,{variant:"ghost",size:"icon",className:"h-6 w-6 cursor-pointer",onClick:()=>{var e;m(""),null===(e=p.current)||void 0===e||e.focus()},children:(0,r.jsx)(T.IconClose,{})}):null,(0,r.jsx)("div",{className:"z-20 ml-2 flex items-center border-l border-l-border pl-2",children:(0,r.jsx)(D.z,{variant:"ghost",className:"h-6 w-6 ",size:"icon",onClick:()=>P(f),children:(0,r.jsx)(T.IconSearch,{})})})]}),w&&(0,r.jsxs)("div",{className:(0,b.cn)("absolute -inset-x-3 -top-2.5 flex max-h-[60vh] flex-col overflow-hidden rounded-lg border bg-background p-4 shadow-2xl dark:border-2 dark:border-[#33363c] dark:bg-[hsl(0,0,13.5%)]",{"pb-0.5":O}),...S({suppressRefError:!0}),children:[(0,r.jsx)("div",{className:(0,b.cn)("shrink-0",O?"h-9":"h-12")}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[!!(null==k?void 0:k.length)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-md mb-2 pl-2 font-semibold",children:"Narrow your search"}),(0,r.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,r.jsx)(ef,{data:e},e.value))})]}),!!(null==N?void 0:N.length)&&(0,r.jsxs)(r.Fragment,{children:[!!(null==k?void 0:k.length)&&(0,r.jsx)(L.Z,{className:"my-2"}),(0,r.jsx)("div",{className:"text-md mb-1 pl-2 font-semibold",children:"Code"}),N.map((e,n)=>{var t,s;let a=e.repositorySearch,l=I===n;return(0,r.jsxs)("div",{className:(0,b.cn)("relative flex cursor-default select-none items-center gap-1 rounded-sm px-2 py-1.5 text-sm",l&&"cursor-pointer bg-accent text-accent-foreground"),...E({item:e,index:n,onMouseLeave:e=>e.preventDefault(),onMouseOut:e=>e.preventDefault()}),children:[(0,r.jsx)("div",{className:"shrink-0",children:(null==e?void 0:null===(t=e.repositorySearch)||void 0===t?void 0:t.type)==="dir"?(0,r.jsx)(T.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,r.jsx)(T.IconFile,{})}),(0,r.jsx)("div",{className:"flex-1 break-all",children:(0,r.jsx)(eu,{text:a.path,indices:a.indices})}),(0,r.jsx)("div",{className:"shrink-0 text-sm text-muted-foreground",children:"Jump to"})]},null===(s=e.repositorySearch)||void 0===s?void 0:s.path)})]})]})]})]})})};function eu(e){let{text:n,indices:t}=e,a=s.useMemo(()=>new Set(t),[t]);return(0,r.jsx)("p",{className:"text-muted-foreground",children:n.split("").map((e,n)=>a.has(n)?(0,r.jsx)("span",{className:"font-semibold text-foreground",children:e},"".concat(e,"_").concat(n)):e)})}function ef(e){let{data:n}=e,{label:t,value:s}=n;return(0,r.jsxs)("div",{className:"flex items-center gap-1 px-2 text-sm",children:[(0,r.jsx)(T.IconFilter,{className:"shrink-0"}),(0,r.jsxs)("div",{className:"text-secondary-foreground",children:[(0,r.jsxs)("span",{className:"mr-0.5 rounded bg-secondary px-1 py-0.5 text-secondary-foreground",children:[s,":"]}),(0,r.jsx)("span",{children:t})]})]})}var em=t(97651),eh=t.n(em),ep=t(39018),ev=t.n(ep),ex=t(3448),eg=t(88105),eb=t(58388),ey=t(28242),ej=t(33523),eN=t(85312);let ek=eg.tk.theme({".cm-line":{cursor:"pointer"},".cm-line:hover":{opacity:"60%"}});t(55823);let ew=eg.p.mark({class:"search-match-mark"}),eS=eg.tk.theme({".search-match-mark":{backgroundColor:"hsl(var(--mark-bg))"}});function eC(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=e.state.doc,r=t.length;if(!r)return eg.p.none;let s=[];for(let e of n){let n=t.line(e.lineNumber),a=n.from,l={start:a+e.bytesStart,end:a+e.bytesEnd};try{l&&l.start<=r&&l.end<=r&&s.push(ew.range(l.start,l.end))}catch(e){}}return s.length?eg.p.set(s):eg.p.none}let eI=e=>{let n=eg.lg.fromClass(class{update(n){(n.docChanged||n.viewportChanged)&&(this.marks=eC(n.view,e))}constructor(n){this.marks=eC(n,e)}},{decorations:e=>e.marks});return[n,eS]},eE=s.memo(e=>{let n,{path:t,pattern:s}=e;if(!s)return t;let a=RegExp((0,eb.Z)(s),"gi"),l=[];for(;null!==(n=a.exec(t));){let e=n.index,t=e+n[0].length;l.push({start:e,end:t})}return(0,r.jsx)(eA,{text:t,matches:l})});eE.displayName="FilePathView";let eR=e=>{let{result:n,query:t}=e,{theme:a}=(0,ey.F)(),{activeRepo:l,activeEntryInfo:i}=s.useContext(nt),o=s.useMemo(()=>{var e;return null==t?void 0:null===(e=t.match(/f:(\S+)/))||void 0===e?void 0:e[1]},[t]),d=(0,p.U$)(n.path)[0],u=s.useMemo(()=>{var e;let t;let r=[],s=0,a=0,l=null!==(e=n.lines)&&void 0!==e?e:[];return l.forEach((e,n)=>{0===n?(s=n,a=n,t=e.lineNumber):((0,c.Z)(t)||e.lineNumber!==t+1?(t=e.lineNumber,r.push({start:s,end:a}),s=n):t=e.lineNumber,a=n)}),a!==(null==l?void 0:l.length)&&r.push({start:s,end:a}),r},[n.lines]),f="/files/".concat((0,M.I)(l,i.rev,n.path,"file"));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"sticky top-9 z-10 border bg-secondary p-2 text-secondary-foreground",children:(0,r.jsx)(z(),{href:{pathname:f},className:"inline-flex font-medium text-primary hover:underline",children:(0,r.jsx)(eE,{path:n.path,pattern:o})})}),(0,r.jsx)("div",{className:"divide-y-border mb-6 grid divide-y overflow-x-auto border border-t-0",children:u.map((e,t)=>{let s=n.lines.slice(e.start,e.end+1);return(0,r.jsx)(ej.Z,{offset:300,children:(0,r.jsx)(eP,{language:d,theme:a,lines:s,path:n.path})},"".concat(n.path,"-").concat(e.start))})})]})};function eA(e){let{text:n,matches:t}=e;if(!t||0===t.length)return(0,r.jsx)("span",{children:n});let s=[],a=0;return t.forEach((e,t)=>{e.start>a&&s.push((0,r.jsx)("span",{children:n.substring(a,e.start)},"text-".concat(t))),s.push((0,r.jsx)("span",{className:"bg-[hsl(var(--mark-bg))]",children:n.substring(e.start,e.end)},"match-".concat(t))),a=e.end}),a<n.length&&s.push((0,r.jsx)("span",{children:n.substring(a)},"last")),(0,r.jsx)("span",{children:s})}function eP(e){var n;let{theme:t,language:l,lines:i,path:o}=e,c=(0,a.useRouter)(),{activeRepo:d,activeEntryInfo:u}=s.useContext(nt),f=s.useMemo(()=>{var e;let n=null!==(e=null==i?void 0:i.reduce((e,n)=>e+(n.line.text||atob(n.line.base64||"")||""),""))&&void 0!==e?e:"";return n.replace(/\n$/,"")},[]),m=(null==i?void 0:null===(n=i[0])||void 0===n?void 0:n.lineNumber)||0,h=s.useMemo(()=>{if(null==i?void 0:i.length){var e;let n=[];for(let e=0;e<i.length;e++){let t=i[e];for(let r of t.subMatches)n.push({bytesStart:r.bytesStart,bytesEnd:r.bytesEnd,lineNumber:e+1})}return[(0,eg.Eu)({formatNumber(e){var n,t;return null!==(t=null===(n=i[e-1])||void 0===n?void 0:n.lineNumber.toString())&&void 0!==t?t:e}}),(e=e=>{let n="/files/".concat((0,M.I)(d,u.rev,o,"file"));c.push("".concat(n,"?plain=1#L").concat(m+e-1))},[ek,eg.tk.domEventHandlers({mousedown(n,t){let r=t.posAtCoords({x:n.clientX,y:n.clientY});if(null!=r){let s=t.state.doc.lineAt(r);e(s.number,n)}}})]),...eI(n)]}return[]},[i]);return(0,r.jsx)(eN.Z,{value:f,theme:t,language:l,readonly:!0,extensions:h})}let eO=e=>{var n,t,l;let i=(0,a.useSearchParams)(),o=null!==(t=null===(n=i.get("q"))||void 0===n?void 0:n.toString())&&void 0!==t?t:"",c=s.useMemo(()=>{var n;let t=e.results;return null!==(n=null==t?void 0:t.map(e=>({...e,blob:e.lines.reduce((e,n)=>{var t;return e+(null!==(t=n.line.text)&&void 0!==t?t:"")},"")})))&&void 0!==n?n:[]},[e.results]),d=s.useMemo(()=>{let n=0;if(!e.results)return"0";for(let t of e.results){let e=t.lines.reduce((e,n)=>{let t=n.subMatches.length;return e+t},0);n+=Math.max(e,1)}let t=n<1e3?"0":"0.0a";return ev()(n).format(t)},[e.results]),u=eh().humanizer({units:["d","h","m","s"],spacer:"",maxDecimalPoints:2,language:"shortEn",languages:{shortEn:{m:()=>"m",s:()=>"s"}}})(null!==(l=e.requestDuration)&&void 0!==l?l:0);return(0,r.jsx)(r.Fragment,{children:e.loading?(0,r.jsx)(eF,{className:"mt-3"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h1",{className:"sticky top-0 z-20 bg-background pb-2 pt-1 font-semibold",children:[d," results in ",u]}),null==c?void 0:c.map((e,n)=>(0,r.jsx)("div",{children:(0,r.jsx)(eR,{result:e,query:o})},"".concat(e.path,"-").concat(n)))]})})};function eF(e){let{className:n}=e;return(0,r.jsxs)("div",{className:(0,b.cn)("flex flex-col gap-3",n),children:[(0,r.jsx)(ex.O,{className:"h-4 w-[20%]"}),(0,r.jsx)(ex.O,{className:"h-4 w-full"}),(0,r.jsx)(ex.O,{className:"h-8 w-full"})]})}let eD=e=>{let{className:n,error:t}=e,s=(0,r.jsx)(eL,{});switch(null==t?void 0:t.message){case M.l8.REPOSITORY_NOT_FOUND:s=(0,r.jsx)(eT,{});break;case M.l8.REPOSITORY_SYNC_FAILED:s=(0,r.jsx)(e_,{});break;case M.l8.INVALID_URL:s=(0,r.jsx)(e$,{});break;case M.l8.FAILED_TO_FETCH:s=(0,r.jsx)(ez,{})}return(0,r.jsx)("div",{className:(0,b.cn)("flex min-h-[30vh] items-center justify-center",n),children:(0,r.jsx)("div",{className:"flex flex-col items-center gap-4",children:s})})};function eT(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Repository not found"})]}),(0,r.jsxs)(z(),{href:"/files",className:(0,b.cn)((0,D.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Back to repositories"}),(0,r.jsx)(T.IconArrowRight,{})]})]})}function eL(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Not found"})]}),(0,r.jsxs)(z(),{href:"/files",className:(0,b.cn)((0,D.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Back to repositories"}),(0,r.jsx)(T.IconArrowRight,{})]})]})}function e_(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Repository is not cloned properly"})]}),(0,r.jsx)("div",{children:"The cloning of the repository has failed. Please verify your settings or attempt to retry the job."}),(0,r.jsxs)(z(),{href:"/settings/providers/git",className:(0,b.cn)((0,D.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Providers Configuration"}),(0,r.jsx)(T.IconArrowRight,{})]})]})}function e$(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Invalid URL"})]}),(0,r.jsxs)(z(),{href:"/files",className:(0,b.cn)((0,D.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Back to repositories"}),(0,r.jsx)(T.IconArrowRight,{})]})]})}function ez(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Failed to fetch"})]})})}var eU=t(76297),eM=t(36327);let eB=s.createContext({}),eq=e=>{let{onSelectTreeNode:n,children:t,activePath:s,fileMap:a,updateFileMap:l,expandedKeys:i,toggleExpandedKey:o,initialized:c,fileTreeData:d,fetchingTreeEntries:u}=e;return(0,r.jsx)(eB.Provider,{value:{onSelectTreeNode:n,fileTreeData:d,expandedKeys:i,toggleExpandedKey:o,activePath:s,fileMap:a,updateFileMap:l,initialized:c,fetchingTreeEntries:u},children:t})},eZ=e=>{let{level:n}=e,t=s.useMemo(()=>Array(n).fill(1),[n]);return(0,r.jsx)("div",{className:"flex h-full shrink-0 items-stretch",children:t.map((e,n)=>(0,r.jsx)("div",{className:"flex h-8 w-2 border-r border-transparent transition-colors duration-300 group-hover/filetree:border-border"},n))})},eG=()=>{let{ref:e,entry:n,inView:t}=(0,eU.YD)({trackVisibility:!0,delay:500});return s.useEffect(()=>{if((null==n?void 0:n.target)&&!t){var e;null==n||null===(e=n.target)||void 0===e||e.scrollIntoView({block:"center"})}},[null==n?void 0:n.target]),(0,r.jsx)("div",{ref:e,className:"absolute -left-2 h-8 w-1 rounded-md bg-primary"})},eH=e=>{let{isActive:n,level:t,children:s,className:a,...l}=e;return(0,r.jsxs)("div",{className:(0,b.cn)("relative flex h-8 cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",n&&"bg-accent",a),...l,children:[n&&(0,r.jsx)(eG,{}),(0,r.jsx)(eZ,{level:t}),(0,r.jsxs)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:[(0,r.jsx)("div",{className:"h-4 w-4 shrink-0"}),s]})]})},eV=e=>{let{children:n,level:t,isActive:s,className:a,...l}=e;return(0,r.jsxs)("div",{className:(0,b.cn)("relative flex cursor-pointer items-stretch rounded-sm hover:bg-accent focus:bg-accent focus:text-accent-foreground",s?"bg-accent text-accent-foreground":void 0,a),...l,children:[s&&(0,r.jsx)(eG,{}),(0,r.jsx)(eZ,{level:t}),(0,r.jsx)("div",{className:"flex flex-nowrap items-center gap-2 truncate whitespace-nowrap",children:n})]})},eJ=e=>{let{node:n,level:t}=e,{activeEntryInfo:a}=s.useContext(nt),{onSelectTreeNode:l}=s.useContext(eB),i="file"===n.file.kind,o=n.fullPath===(null==a?void 0:a.basename);return(0,r.jsxs)(eH,{level:t,onClick:e=>{i&&(null==l||l(n))},isActive:o,children:[(0,r.jsx)(T.IconFile,{className:"shrink-0"}),(0,r.jsx)("div",{className:"truncate",children:null==n?void 0:n.name})]})},eY=e=>{var n,t,a;let{node:l,level:i,root:o}=e,{activeRepo:c,activeEntryInfo:d}=s.useContext(nt),{fileMap:u,updateFileMap:f,expandedKeys:m,toggleExpandedKey:h,onSelectTreeNode:p}=s.useContext(eB),x=s.useRef(!1),g=o?"":l.file.basename,b=m.has(g),y="dir"===l.file.kind&&!(null==u?void 0:null===(n=u[l.fullPath])||void 0===n?void 0:n.treeExpanded)&&b,{data:j,isLoading:N}=(0,eM.Z)(y?(0,M.Vq)(c,d.rev,g):null,v.Z,{revalidateIfStale:!1});s.useEffect(()=>{var e;if(!x.current&&(null==j?void 0:null===(e=j.entries)||void 0===e?void 0:e.length)){let e=j.entries.reduce((e,n)=>{let t=n.basename;return{...e,[t]:{file:n,name:(0,M.i3)(t),fullPath:t,treeExpanded:!1}}},{});f(e),x.current=!0}},[j]);let[k]=(0,eo.n)(N,100),w=!!(null==l?void 0:null===(t=l.children)||void 0===t?void 0:t.length);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eV,{level:i,onClick:e=>{null==p||p(l)},isActive:(null==d?void 0:d.basename)===l.fullPath,children:[(0,r.jsx)("div",{className:"flex h-8 shrink-0 items-center hover:bg-primary/10 hover:text-popover-foreground",onClick:e=>{k||(h(l.fullPath),e.stopPropagation())},children:k&&!x.current?(0,r.jsx)(T.IconSpinner,{}):b?(0,r.jsx)(T.IconChevronDown,{}):(0,r.jsx)(T.IconChevronRight,{})}),(0,r.jsx)("div",{className:"shrink-0",style:{color:"rgb(84, 174, 255)"},children:b?(0,r.jsx)(T.IconDirectoryExpandSolid,{}):(0,r.jsx)(T.IconDirectorySolid,{})}),(0,r.jsx)("div",{className:"truncate",children:null==l?void 0:l.name})]}),(0,r.jsx)(r.Fragment,{children:b&&w?(0,r.jsx)(r.Fragment,{children:null===(a=l.children)||void 0===a?void 0:a.map(e=>{let n=e.file.basename;return"dir"===e.file.kind?(0,r.jsx)(eY,{node:e,level:i+1},n):(0,r.jsx)(eJ,{node:e,level:i+1},n)})}):null})]})},eW=()=>{let{repoMap:e,activeEntryInfo:n}=s.useContext(nt),{initialized:t,fileTreeData:a,fetchingTreeEntries:l}=s.useContext(eB),{repositorySpecifier:i}=n,o=!!i,c=o&&!(null==a?void 0:a.length);return t?o?c&&l?(0,r.jsx)(eK,{}):(0,r.jsx)(r.Fragment,{children:null==a?void 0:a.map(e=>{var n;let t=(null==e?void 0:null===(n=e.file)||void 0===n?void 0:n.kind)==="file";return t?(0,r.jsx)(eJ,{level:0,node:e},e.fullPath):(0,r.jsx)(eY,{level:0,node:e},e.fullPath)})}):null:(0,r.jsx)(eK,{})},eQ=e=>{let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,b.cn)("group/filetree",n),children:(0,r.jsx)(eq,{...t,children:(0,r.jsx)(eW,{})})})};function eK(){return(0,r.jsxs)("div",{className:"space-y-3 p-2",children:[(0,r.jsx)(ex.O,{}),(0,r.jsx)(ex.O,{className:"ml-4"}),(0,r.jsx)(ex.O,{className:"ml-4"}),(0,r.jsx)(ex.O,{}),(0,r.jsx)(ex.O,{className:"ml-4"})]})}var eX=t(62940),e0=t(36065),e4=t(84942),e1=t(54594),e2=t(18500);function e5(e){let{kind:n,fallback:t}=e;switch(n){case e2.vW.Git:return(0,r.jsx)(T.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}});case e2.vW.Github:case e2.vW.GithubSelfHosted:return(0,r.jsx)(T.IconGitHub,{});case e2.vW.Gitlab:case e2.vW.GitlabSelfHosted:return(0,r.jsx)(T.IconGitLab,{});default:return null!=t?t:null}}let e3=e=>{var n,t,a,l,i;let{className:o,...d}=e,{updateActivePath:u,initialized:f,activeRepo:m,activeRepoRef:h,fileMap:p,repoMap:v,activeEntryInfo:x}=(0,s.useContext)(nt),y=s.useMemo(()=>(0,M.UR)(v).map(e=>{let n=(0,M.Pj)(e);return{repo:e,repoSpecifier:n}}),[v]),[j,N]=s.useState(!1),[k,w]=s.useState(null!==(a=null==h?void 0:h.kind)&&void 0!==a?a:"branch"),{repositoryKind:C,repositoryName:I,repositorySpecifier:E}=x,R=null==m?void 0:m.id,A=null==m?void 0:m.refs,P=s.useMemo(()=>(null==A?void 0:A.length)?A.map(e=>(0,M.r2)(e)):[],[A]),O=P.filter(e=>"branch"===e.kind),F=P.filter(e=>"tag"===e.kind),L=s.useRef(null),[_,$]=s.useState(),[z,U]=s.useState(),[B,q]=s.useState(),[Z,G]=s.useState(!1),H=f&&!(null==y?void 0:y.length),[{data:V}]=(0,ei.aM)({query:g.D7,variables:{kind:C,id:R,pattern:null!=z?z:"",rev:x.rev},pause:!R||!C||!z}),J=e=>{var n,t,r,s,a;if((0,c.Z)(e))return;let l=null!==(s=null===(n=(0,M.r2)(e))||void 0===n?void 0:n.name)&&void 0!==s?s:"",{basename:i=""}=x,o=null!==(a=null==p?void 0:null===(r=p[i])||void 0===r?void 0:null===(t=r.file)||void 0===t?void 0:t.kind)&&void 0!==a?a:"dir";$(void 0),u((0,M.I)(m,l,i,o))};return s.useEffect(()=>{var e,n;let t=null!==(n=null==V?void 0:null===(e=V.repositorySearch)||void 0===e?void 0:e.map(e=>({...e,id:e.path})))&&void 0!==n?n:[];q(t),G(!!z)},[null==V?void 0:V.repositorySearch]),(0,eo.S)(e=>{e?U(e):(U(""),G(!1),q([]))},500),s.useEffect(()=>{let e=e=>{var n,t;let r=e.target,s=null==r?void 0:null===(n=r.tagName)||void 0===n?void 0:n.toLowerCase();"input"!==s&&"textarea"!==s&&"select"!==s&&"t"===e.key&&(e.preventDefault(),null===(t=L.current)||void 0===t||t.focus())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]),(0,r.jsxs)("div",{className:(0,b.cn)(o),...d,children:[(0,r.jsx)("div",{className:"py-4 font-bold leading-8",children:(0,r.jsx)("span",{className:(0,b.cn)("py-1",{"hover:underline cursor-pointer":!!m}),onClick:()=>{m&&u((0,M.I)(m,null==x?void 0:x.rev,"","dir"))},children:"Files"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(e1.Ph,{disabled:!f,onValueChange:e=>{var n;let t=null===(n=y.find(n=>n.repoSpecifier===e))||void 0===n?void 0:n.repo;if(t){let n="".concat(e,"/-/tree/").concat((0,M.r2)((0,M.s8)(t.refs)).name);$(void 0),u(n)}},value:E,children:[(0,r.jsx)(e1.i4,{children:(0,r.jsx)(e1.ki,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(e5,{kind:C,fallback:(0,r.jsx)(T.IconFolderGit,{})})}),(0,r.jsx)("span",{className:(0,b.cn)("truncate",!I&&"text-muted-foreground"),children:I||"Pick a repository"})]})})}),(0,r.jsx)(e1.Bw,{className:"max-h-[50vh] overflow-y-auto",children:H?(0,r.jsx)(e1.Ql,{isPlaceHolder:!0,value:"",disabled:!0,children:"No repositories"}):(0,r.jsx)(r.Fragment,{children:null==y?void 0:y.map(e=>(0,r.jsx)(e1.Ql,{value:e.repoSpecifier,children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(e5,{kind:e.repo.kind,fallback:(0,r.jsx)(T.IconFolderGit,{})}),e.repo.name]})},e.repoSpecifier))})})]}),!!m&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(e4.J2,{open:j,onOpenChange:N,children:[(0,r.jsx)(e4.xo,{asChild:!0,children:(0,r.jsx)(D.z,{className:"w-full justify-start gap-2 px-3",variant:"outline",children:!!h&&(0,r.jsxs)(r.Fragment,{children:["tag"===h.kind?(0,r.jsx)(T.IconTag,{className:"shrink-0"}):(0,r.jsx)(T.IconGitFork,{className:"shrink-0"}),(0,r.jsx)("span",{className:"truncate",title:h.name,children:"commit"===h.kind?null===(t=h.ref)||void 0===t?void 0:null===(n=t.commit)||void 0===n?void 0:n.substring(0,7):h.name})]})})}),(0,r.jsx)(e4.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",side:"bottom",children:(0,r.jsxs)(e0.mY,{className:"transition-all",children:[(0,r.jsx)(e0.sZ,{placeholder:"tag"===k?"Find a tag":"Find a branch"}),(0,r.jsx)(S.mQ,{className:"my-1 border-b",value:k,onValueChange:e=>w(e),children:(0,r.jsxs)(S.dr,{className:"bg-popover py-0",children:[(0,r.jsx)(S.SP,{value:"branch",children:"Branches"}),(0,r.jsx)(S.SP,{value:"tag",children:"Tags"})]})}),(0,r.jsxs)(e0.e8,{className:"max-h-[30vh]",children:[(0,r.jsx)(e0.rb,{children:"Nothing to show"}),(0,r.jsx)(e0.fu,{children:("tag"===k?F:O).map((e,n)=>{var t;return(0,r.jsxs)(e0.di,{onSelect:()=>{N(!1),J(e.ref)},children:[(0,r.jsx)(T.IconCheck,{className:(0,b.cn)("mr-2 shrink-0",(null==e?void 0:e.name)&&e.name===(null==h?void 0:h.name)?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{className:"truncate",title:e.name,children:null!==(l=e.name)&&void 0!==l?l:""})]},null!==(i=null==e?void 0:null===(t=e.ref)||void 0===t?void 0:t.name)&&void 0!==i?i:n)})})]})]})})]})})]})]})},e6=e=>{let{fetchingTreeEntries:n}=e,{activePath:t,updateActivePath:a,expandedKeys:l,updateFileMap:i,toggleExpandedKey:o,initialized:c,fileTreeData:d,fileMap:u,activeRepo:f,activeEntryInfo:m}=s.useContext(nt),h=s.useRef(null),p=function(e,n){var t,r;let[a,l]=(0,s.useState)(null!==(r=null===(t=e.current)||void 0===t?void 0:t.scrollTop)&&void 0!==r?r:0);return(0,s.useEffect)(()=>{if(e.current){let t=(0,eX.Z)(()=>{var n,t;l(null!==(t=null===(n=e.current)||void 0===n?void 0:n.scrollTop)&&void 0!==t?t:0)},n,{leading:!0}),r=e.current;return r.addEventListener("scroll",t),()=>{r.removeEventListener("scroll",t)}}},[e,n]),a}(h,200);return(0,r.jsxs)("div",{className:"flex h-full flex-col overflow-hidden",children:[(0,r.jsx)(e3,{className:"shrink-0 px-4 pb-3"}),p>0&&(0,r.jsx)("div",{className:"h-0 border-b shadow-[0px_3px_8px_rgba(0,0,0,0.3)] dark:shadow-[0px_3px_8px_rgba(255,255,255,0.3)]"}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto px-4",ref:h,children:(0,r.jsx)(eQ,{onSelectTreeNode:e=>{let n=(0,M.I)(f,m.rev,e.file.basename,e.file.kind);a(n)},activePath:t,fileMap:u,updateFileMap:i,expandedKeys:l,toggleExpandedKey:o,initialized:c,fileTreeData:d,fetchingTreeEntries:n})})]})};var e8=t(2899),e7=t(99047);let e9=e=>{var n,t;let{className:a,loading:l,initialized:i}=e,{activePath:c,currentFileRoutes:d,fileTreeData:u,activeRepo:f,repoMap:m,activeEntryInfo:h}=s.useContext(nt),p=s.useMemo(()=>(0,o.Z)(m)||f?function(e,n){if(!(null==e?void 0:e.length))return[];if(n){let{basename:t=""}=(0,M.Jt)(n);if(!t)return e;let r=decodeURIComponent(t).split("/"),s=e;for(let e=0;e<r.length;e++){let n=r.slice(0,e+1).join("/"),t=(0,Q.Z)(s,e=>e.fullPath===n);if(null==t||!t.children)return[];s=null==t?void 0:t.children}return(null==s?void 0:s.map(e=>(0,e8.Z)(e,"children")))||[]}{let n=e.map(e=>(0,e8.Z)(e,"children"))||[];return n}}(u,c):(0,M.UR)(m).map(e=>{var n;return{file:{basename:e.name,kind:"dir"},isRepository:!0,repository:e,fullPath:(0,M.I)(e,null===(n=(0,M.r2)((0,M.s8)(e.refs)))||void 0===n?void 0:n.name,"","dir"),name:e.name}}),[u,c,f,m]),[v]=(0,eo.n)(l,300),x=!!(null==h?void 0:h.basename),g=d[(null==d?void 0:d.length)-2];return(0,r.jsxs)("div",{className:(0,b.cn)("text-base",a),children:[(0,r.jsx)(q,{blob:void 0,hideBlobActions:!0,className:"border-0"}),(!v||(null==p?void 0:p.length))&&i?(null==p?void 0:p.length)?(0,r.jsx)(e7.iA,{children:(0,r.jsxs)(e7.RM,{children:[x&&(0,r.jsx)(e7.SC,{className:"cursor-pointer",children:(0,r.jsx)(e7.pj,{className:"p-1 px-4",children:(0,r.jsx)(z(),{href:"/files/".concat((0,M.I)(f,h.rev,null==g?void 0:null===(n=g.file)||void 0===n?void 0:n.basename,null==g?void 0:null===(t=g.file)||void 0===t?void 0:t.kind)),children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"shrink-0",children:(0,r.jsx)(T.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}),(0,r.jsx)("span",{className:"px-1 py-2",children:".."})]})})})}),(0,r.jsx)(r.Fragment,{children:p.map(e=>{var n;let t=e.isRepository,s=null===(n=e.repository)||void 0===n?void 0:n.kind;return(0,r.jsx)(e7.SC,{children:(0,r.jsx)(e7.pj,{className:"p-1 px-4 text-base",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"shrink-0",children:t?(0,r.jsx)(e5,{kind:s,fallback:(0,r.jsx)(T.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}})}):"dir"===e.file.kind?(0,r.jsx)(T.IconDirectorySolid,{style:{color:"rgb(84, 174, 255)"}}):(0,r.jsx)(T.IconFile,{})}),(0,r.jsx)(z(),{href:t?"/files/".concat(e.fullPath):"/files/".concat((0,M.I)(null!=f?f:e.repository,h.rev,e.file.basename,e.file.kind)),className:"cursor-pointer px-1 py-2 hover:text-primary hover:underline",children:e.name})]})})},e.fullPath)})})]})}):(0,o.Z)(m)?(0,r.jsx)("div",{className:"flex min-h-[30vh] items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"No repositories"})]}),(0,r.jsxs)(z(),{href:"/settings/providers/git",className:(0,b.cn)((0,D.d)(),"gap-2"),children:[(0,r.jsx)("span",{children:"Connect"}),(0,r.jsx)(T.IconArrowRight,{})]})]})}):null:(0,r.jsx)(ne,{})]})};function ne(){return(0,r.jsxs)("ul",{className:"space-y-3 p-2",children:[(0,r.jsx)(ex.O,{}),(0,r.jsx)(ex.O,{}),(0,r.jsx)(ex.O,{}),(0,r.jsx)(ex.O,{})]})}let nn=(0,f.BX)("\n  query RepositoryGrep($id: ID!, $kind: RepositoryKind!, $query: String!) {\n    repositoryGrep(kind: $kind, id: $id, query: $query) {\n      files {\n        path\n        lines {\n          line {\n            text\n            base64\n          }\n          byteOffset\n          lineNumber\n          subMatches {\n            bytesStart\n            bytesEnd\n          }\n        }\n      }\n      elapsedMs\n    }\n  }\n"),nt=s.createContext({}),nr=e=>{let{children:n}=e,t=(0,a.usePathname)(),{updateUrlComponents:l}=(0,m.Z)(),[o,c]=s.useState(!1),[d,u]=s.useState(),f=s.useMemo(()=>(0,M.Jt)(d),[d]),p=(0,h.xG)(),[v,x]=s.useState(!1),[g,b]=s.useState({}),[y,j]=s.useState({}),[N,k]=s.useState(new Set),[w,S]=s.useState(!1),[C,I]=s.useState(),E=s.useRef(),R=s.useCallback(async(e,n)=>{let t=null==n?void 0:n.replace;if(e){let r={},s=["redirect_filepath","redirect_git_url","line"];(null==n?void 0:n.plain)?r.plain="1":s.push("plain"),l({pathname:"/files/".concat(e),searchParams:{set:r,del:s},replace:t,hash:null==n?void 0:n.hash})}else l({pathname:"/files",searchParams:{del:["path","plain","line"]},hash:null==n?void 0:n.hash,replace:t})},[]),A=s.useMemo(()=>(function e(n){if(!n.length)return[];for(let t of(n.sort((e,n)=>{let t="file"===e.file.kind?1:0,r="file"===n.file.kind?1:0;return t-r||e.name.localeCompare(n.name)}),n))(null==t?void 0:t.children)&&e(t.children);return n})(function(e){let n=[];if(!e)return n;let t=Object.keys(e);for(let r of t){let t=e[r],s=r.split("/"),a=n;for(let e=0;e<s.length;e++){let n=s.slice(0,e+1).join("/"),l=null==a?void 0:a.find(e=>e.fullPath===n);if(l)a=l.children||[];else{let e={file:t.file,name:t.name,fullPath:r,children:[],isRepository:t.isRepository,repository:t.repository};a.push(e),a=e.children}}}return n}(g)),[g]),P=s.useMemo(()=>{let{repositoryKind:e,repositoryName:n,repositorySpecifier:t}=f;if(e&&n)return t?y[t]:void 0},[y,f]),O=s.useMemo(()=>{var e,n;if(!f||!P)return;let t=null!==(n=null==f?void 0:f.rev)&&void 0!==n?n:"",r=null===(e=P.refs)||void 0===e?void 0:e.find(e=>(null==e?void 0:e.name)==="refs/heads/".concat(t)||(null==e?void 0:e.name)==="refs/tags/".concat(t)||(null==e?void 0:e.commit)===t);if(r){let e;return r.name==="refs/heads/".concat(t)?e="branch":r.name==="refs/tags/".concat(t)?e="tag":r.commit===t&&(e="commit"),(0,M.r2)(r,e)}},[f,P]),F=s.useMemo(()=>{var e;if(!d)return[];let{basename:n=""}=f,t=[{file:{kind:"dir",basename:""},isRepository:!0,repository:P,name:null!==(e=null==P?void 0:P.name)&&void 0!==e?e:"",fullPath:""}],r=(null==n?void 0:n.split("/"))||[];for(let e=0;e<r.length;e++){let n=r.slice(0,e+1).join("/");t.push(null==g?void 0:g[n])}return(0,i.Z)(t)},[d,g,f]);return s.useEffect(()=>{var e;let n=null===(e=t.match(/^\/files\/(.*)/))||void 0===e?void 0:e[1];E.current=d,u(null!=n?n:""),o||c(!0)},[t]),(0,r.jsx)(nt.Provider,{value:{initialized:v,setInitialized:x,activePath:d,updateActivePath:R,fileMap:g,updateFileMap:(e,n)=>{e&&(n?b(e):b(n=>({...n,...e})))},expandedKeys:N,setExpandedKeys:k,toggleExpandedKey:e=>{let n=N.has(e),t=new Set(N);n?t.delete(e):t.add(e),k(t)},currentFileRoutes:F,fileTreeData:A,chatSideBarVisible:w,setChatSideBarVisible:S,pendingEvent:C,setPendingEvent:I,isChatEnabled:p,repoMap:y,setRepoMap:j,activeRepo:P,activeRepoRef:O,isPathInitialized:o,activeEntryInfo:f,prevActivePath:E},children:n})},ns="application/vnd.directory+json",na=e=>{var n;let{className:t}=e,{activePath:a,updateActivePath:l,initialized:i,setInitialized:f,chatSideBarVisible:h,setChatSideBarVisible:x,setPendingEvent:g,repoMap:j,setRepoMap:S,activeRepo:C,isPathInitialized:I,activeEntryInfo:E,prevActivePath:R,updateFileMap:A,setExpandedKeys:P}=s.useContext(nt),{searchParams:O}=(0,m.Z)(),F=s.useRef(!1),{progress:D,setProgress:T}=(0,k.U)(),L=s.useRef(null),[_,$]=s.useState(35),z=null===(n=O.get("q"))||void 0===n?void 0:n.toString(),U=s.useMemo(()=>(0,M.Jt)(a),[a]),q=null==U?void 0:U.basename,Z=(null==E?void 0:E.viewMode)==="blob",G=(null==E?void 0:E.viewMode)==="search",H=!!i&&!(0,o.Z)(j)&&!!a&&!G,V=!!i&&!(0,o.Z)(j)&&!!a&&G,J=!!i&&Z&&C,{data:Y,isLoading:Q,error:K}=(0,u.ZP)(H?a:null,e=>{let{repositorySpecifier:n}=(0,M.Jt)(e);return nc(e,n?null==j?void 0:j[n]:void 0).then(n=>({entries:n,requestPathname:e}))},{revalidateOnFocus:!1,shouldRetryOnError:!1}),{data:X,isLoading:ee,error:en}=(0,u.ZP)(J?[(0,M.Vq)(C,E.rev,q),q]:null,e=>{let[n,t]=e;return(0,v.Z)(n,{responseFormatter:async e=>{let n=e.headers.get("Content-Type");if(n===ns)throw Error(M.l8.INVALID_URL);let r=(0,d.Z)(e.headers.get("Content-Length")),s=await e.blob(),a=await no(null!=t?t:"",s);return{contentLength:r,blob:s,fileDisplayType:a}},errorHandler(){throw Error(M.l8.NOT_FOUND)}})},{revalidateOnFocus:!1,shouldRetryOnError:!1}),{data:et,isLoading:es,error:ea}=(0,u.ZP)(V&&z?[a,z]:null,e=>{let[n,t]=e,{repositorySpecifier:r}=(0,M.Jt)(n);return nd(t,r?null==j?void 0:j[r]:void 0)},{revalidateOnFocus:!1,shouldRetryOnError:!1}),el=null==X?void 0:X.blob,ei=null==X?void 0:X.contentLength,eo=null==X?void 0:X.fileDisplayType,ec=(null==E?void 0:E.viewMode)==="tree"||!(null==E?void 0:E.viewMode);return s.useEffect(()=>{let e=async()=>{if(F.current)return;F.current=!0;let e=await ni(),n=O.get("redirect_filepath"),t=O.get("redirect_git_url");if((null==e?void 0:e.length)&&n&&t){let i=e.find(e=>e.gitUrl===t);if(i){var r,s,a;let e=(0,M.s8)(i.refs),t=(null===(r=(0,M.r2)(e))||void 0===r?void 0:r.name)||"",o=(0,M.kQ)(window.location.hash),d=!(0,c.Z)(null==o?void 0:o.start),u=parseInt(null!==(a=null===(s=O.get("line"))||void 0===s?void 0:s.toString())&&void 0!==a?a:""),f=d?window.location.hash:(0,b.nO)({start:u}),m=n?(0,p.U$)(n)[0]:void 0;l((0,M.I)(i,t,n,"file"),{replace:!0,hash:f,plain:"markdown"===m&&!!f}),F.current=!1;return}}e&&S((0,M.fr)(e)),f(!0)};!i&&I&&e()},[a,i,I]),s.useEffect(()=>{if(!Y)return;let{entries:e,requestPathname:n}=Y,{repositorySpecifier:t,viewMode:r,basename:s,rev:a}=(0,M.Jt)(n),{repositorySpecifier:l,rev:i}=(0,M.Jt)(R.current),o=(0,M.yH)(s,"tree"===r),c={};if(e.length)for(let n of e){let e=n.basename;c[e]={file:n,name:(0,M.i3)(e),fullPath:e,treeExpanded:o.includes(n.basename)}}let d=o.filter(Boolean),u=t!==l||a!==i;c&&A(c,u),(null==d?void 0:d.length)&&(u?P(new Set(d)):P(e=>{let n=new Set(e);for(let e of d)n.add(e);return n}))},[Y]),s.useEffect(()=>{!i||(!D&&(ee||Q)?T(!0):ee||Q||T(!1))},[ee,Q]),s.useEffect(()=>{var e,n,t;h?(null===(e=L.current)||void 0===e||e.expand(),null===(n=L.current)||void 0===n||n.resize(_)):null===(t=L.current)||void 0===t||t.collapse()},[h]),s.useEffect(()=>{if(!(ee||Q))return;let{repositorySpecifier:e,rev:n}=E,{repositorySpecifier:t,rev:r}=(0,M.Jt)(R.current);(e!==t||n!==r)&&(A({},!0),P(new Set))},[E]),s.useEffect(()=>{let e=e=>{x(!0),g(e)};return w.u.on("code_browser_quick_action",e),()=>{w.u.off("code_browser_quick_action",e)}},[]),(0,r.jsxs)(y.pO,{direction:"horizontal",className:(0,b.cn)(t),onLayout:e=>{(null==e?void 0:e[2])&&$(e[2])},children:[(0,r.jsx)(y.ee,{defaultSize:20,minSize:20,maxSize:40,className:"hidden lg:block",children:(0,r.jsx)(e6,{fetchingTreeEntries:Q})}),(0,r.jsx)(y.Dp,{className:"hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500 lg:block"}),(0,r.jsx)(y.ee,{defaultSize:80,minSize:30,children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)(ed,{className:(0,b.cn)("z-40",(null==E?void 0:E.repositorySpecifier)?"block":"hidden")}),(0,r.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto px-4 pb-4",children:[(ec||Z)&&(0,r.jsx)(B,{className:(0,b.cn)("pb-4",{"pt-4":!(null==E?void 0:E.repositorySpecifier)})}),i?en||K?(0,r.jsx)(eD,{className:"rounded-lg border p-4",error:K||en}):(0,r.jsxs)(r.Fragment,{children:[ec&&(0,r.jsx)(e9,{loading:Q,initialized:i,className:"rounded-lg border"}),Z&&(0,r.jsx)(W,{blob:el,contentLength:ei,fileDisplayType:eo,loading:ee||Q}),G&&(0,r.jsx)(eO,{results:null==et?void 0:et.files,requestDuration:null==et?void 0:et.elapsedMs,loading:es})]}):(0,r.jsx)(N.cg,{className:"rounded-lg border p-4"})]})]})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Dp,{className:(0,b.cn)("hidden w-1 bg-border/40 hover:bg-border active:bg-blue-500",h&&"block")}),(0,r.jsx)(y.ee,{collapsible:!0,collapsedSize:0,defaultSize:0,minSize:25,ref:L,onCollapse:()=>x(!1),children:(0,r.jsx)(er,{})})]})]})},nl=e=>{let[n]=(0,j.Hb)(),t=n?{height:"calc(100vh - ".concat(j.wt,")")}:{height:"100vh"};return(0,r.jsx)(nr,{children:(0,r.jsx)("div",{className:"transition-all",style:t,children:(0,r.jsx)(na,{className:"source-code-browser",...e})})})};async function ni(){let e=x.L.createRequestOperation("query",(0,l.h)(g.zz,{}));return x.L.executeQuery(e).then(e=>{var n;return(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.repositoryList)||[]})}async function no(e,n){var t;if(!n)return;let r=null==n?void 0:n.type,s=null===(t=(0,p.U$)(e))||void 0===t?void 0:t[0];if(null==r?void 0:r.startsWith("image"))return"image";if(s||(null==r?void 0:r.startsWith("text")))return"text";let a=await new Promise((e,t)=>{let r=n.slice(0,1024),s=new FileReader;s.onloadend=function(n){var t;if((null==n?void 0:null===(t=n.target)||void 0===t?void 0:t.readyState)===FileReader.DONE){let t=n.target.result;"string"!=typeof t?e(!1):/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x9F]/.test(t)?e(!1):e(!0)}},s.onerror=function(){e(!1)},s.readAsText(r,"UTF-8")});return a?"text":"raw"}async function nc(e,n){if(!e)return[];if(!n)throw Error(M.l8.REPOSITORY_NOT_FOUND);if((0,o.Z)(n.refs))throw Error(M.l8.REPOSITORY_SYNC_FAILED);let{basename:t,rev:r,viewMode:s}=(0,M.Jt)(e);if(!r||!s)throw Error(M.l8.INVALID_URL);let a=(0,M.yH)(t,"tree"===s),l=a.map(e=>()=>(0,v.Z)((0,M.Vq)(n,r,e),{responseFormatter(e){let n=e.headers.get("Content-Type");if(n!==ns)throw Error(M.l8.INVALID_URL);return e.json()},errorHandler(){throw Error(M.l8.NOT_FOUND)}})),i=await Promise.all(l.map(e=>e())),c=[];for(let e of i){var d;(null==e?void 0:null===(d=e.entries)||void 0===d?void 0:d.length)&&(c=[...c,...e.entries])}return c}async function nd(e,n){if(!n)throw Error(M.l8.REPOSITORY_NOT_FOUND);let t=x.L.query(nn,{id:n.id,kind:n.kind,query:e,pause:!n}).toPromise();return null==t?void 0:t.then(e=>{var n;if(null==e?void 0:e.error)throw Error(M.l8.FAILED_TO_FETCH);return null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.repositoryGrep})}},48048:function(e,n,t){"use strict";t.d(n,{BX:function(){return j},I:function(){return N},Jt:function(){return f},Pj:function(){return p},UR:function(){return x},Vq:function(){return k},fr:function(){return v},i3:function(){return m},kQ:function(){return w},l8:function(){return s},r2:function(){return b},s8:function(){return y},yH:function(){return h}});var r,s,a=t(74630),l=t(5035),i=t(64220),o=t(13420),c=t(18500);(r=s||(s={})).FAILED_TO_FETCH="FAILED_TO_FETCH",r.INVALID_URL="INVALID_URL",r.NOT_FOUND="NOT_FOUND",r.REPOSITORY_NOT_FOUND="REPOSITORY_NOT_FOUND",r.REPOSITORY_SYNC_FAILED="REPOSITORY_SYNC_FAILED";let d=Object.keys(c.vW).map(e=>u(e));function u(e){return e.toLowerCase().replaceAll("_","")}function f(e){let n,t,r;let s={};if(!e)return s;let l=e.indexOf("/-/"),i=e.split("/"),u=i[0],f=d.includes(u);if(!f||-1===l)return s;let m=c.vW.Git;switch(u){case"git":m=c.vW.Git;break;case"github":m=c.vW.Github;break;case"gitlab":m=c.vW.Gitlab;break;case"githubselfhosted":m=c.vW.GithubSelfHosted;break;case"gitlabselfhosted":m=c.vW.GitlabSelfHosted}let h=e.indexOf("/-/tree/"),p=e.indexOf("/-/blob/"),v=e.indexOf("/-/search/");if(h>-1){t="tree";let s=e.slice(h+8),a=s.split("/");r=a[0],n=(0,o.Z)(a.slice(1).join("/"),"/")}if(p>-1){t="blob";let s=e.slice(p+8),a=s.split("/");r=a[0],n=(0,o.Z)(a.slice(1).join("/"),"/")}if(v>-1){t="search";let s=e.slice(v+10),a=s.split("/");r=a[0],n=""}let x=e.split("/-/")[0],g=x.split("/").slice(1).join("/");return{repositorySpecifier:e.split("/-/")[0],repositoryName:g,repositoryKind:m,rev:(0,a.Z)(r)?void 0:decodeURIComponent(r),viewMode:t,basename:(0,a.Z)(n)?void 0:decodeURIComponent(n)}}function m(e){if(!e)return"";let n=e.split("/");return n[n.length-1]}function h(e,n){if((0,a.Z)(e))return[];let t=[""],r=e.split("/"),s=n?r.length:r.length-1;for(let e=0;e<s;e++)t.push(r.slice(0,e+1).join("/"));return t}function p(e){if((null==e?void 0:e.kind)&&(null==e?void 0:e.name))return"".concat(u(e.kind),"/").concat(e.name)}function v(e){return(0,l.Z)(e,e=>"".concat(u(e.kind),"/").concat(e.name))}function x(e){let n=(0,i.Z)(e,e=>e);return n.sort((e,n)=>e.name.localeCompare(n.name)),n}function g(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}function b(e,n){if(!e)return{name:"",ref:void 0};let t=e.name.match(/refs\/(\w+)\/(.*)/);if(t){let r="tags"===t[1]?"tag":"branch";return{kind:null!=n?n:r,name:t[2],ref:e}}return"commit"===n?{kind:n,name:e.commit,ref:e}:{name:"",ref:e}}function y(e){let n,t,r,s;for(let a of e){let{name:e}=a;"refs/heads/main"===e?n=a:"refs/heads/master"===e?t=a:!r&&e.startsWith("refs/heads/")?r=a:!s&&e.startsWith("refs/tags/")&&(s=a)}return n||t||r||s}function j(e){return"blob"===e?"file":"dir"}function N(e,n,t,r){let s=p(e);return"".concat(s,"/-/").concat("search"===r?"search":"file"===r?"blob":"tree","/").concat(encodeURIComponent(null!=n?n:""),"/").concat(g(null!=t?t:""))}function k(e,n,t){let r=null==e?void 0:e.id,s=null==e?void 0:e.kind;if(!r||!s||!n)return null;let a="".concat(u(s),"/").concat(r);return"/repositories/".concat(a,"/rev/").concat(encodeURIComponent(n),"/").concat(g(null!=t?t:""))}function w(e){if(!e)return null;let n=/^#L(\d+)(?:-L(\d+))?/.exec(e);if(!n)return null;let[,t,r]=n,s=parseInt(t),a=parseInt(r);return{start:Number.isNaN(s)?void 0:s,end:Number.isNaN(a)?void 0:a}}},27064:function(e,n,t){"use strict";t.d(n,{u:function(){return s}});var r=t(18366);let s=(0,r.Z)()},85312:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(36164),s=t(3546),a=t(30352),l=t(94559),i=t(14679),o=t(88105),c=t(99641),d=t(21399),u=t(1853),f=t(49776);let m=[(0,o.AE)(),(0,f.sW)(),l.yy.allowMultipleSelections.of(!0),(0,a.nF)(a.R_,{fallback:!0}),(0,o.Zs)()];t(65001);let h=l.q6.define(),p=s.forwardRef((e,n)=>{let{value:t,theme:f,language:p,readonly:v=!0,extensions:x,height:g=null,width:b=null,viewDidUpdate:y}=e,j=s.useRef(!1),N=s.useRef(null),[k,w]=s.useState(null),S=o.tk.theme({"&":{height:g,width:b,outline:"none !important",background:"hsl(var(--background))"},"&.cm-focused":{outline:"none !important"},"& .cm-scroller":{height:"100% !important",outline:"none"},"& .cm-gutters":{background:"hsl(var(--background))"},"&.cm-focused .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"hsl(var(--cm-selection-bg)) !important"},".cm-selectionLayer .cm-selectionBackground":{backgroundColor:"hsl(var(--cm-selection-bg)) !important"}}),C=[S,m,o.tk.baseTheme({".cm-scroller":{fontSize:"14px"},".cm-gutters":{backgroundColor:"transparent",borderRight:"none"}}),l.yy.readOnly.of(v)],I=e=>"graphql"===e?new a.ri(d.Wf):(0,c.vf)(function(e,n){switch(e){case"javascript-typescript":return"tsx";case"shellscript":case"bash":return"shell";default:return e}}(e)),E=()=>{let e=(0,u.Z)([...C,I(p)]);return"dark"===f?(e.push(i.pD),e.push((0,a.nF)(i.VE))):e.push((0,a.nF)(a.R_)),Array.isArray(x)&&(e=e.concat(x)),e};return s.useEffect(()=>{(()=>{if(!j.current&&N.current){j.current=!0;let e=l.yy.create({doc:t,extensions:E()}),n=new o.tk({state:e,parent:N.current});w(n)}})()},[]),s.useEffect(()=>{k&&k.dispatch({effects:l.Py.reconfigure.of(E())})},[g,b,f,p,x]),s.useEffect(()=>{(()=>{if(void 0===t||!k)return;let e=k?k.state.doc.toString():"";k&&t!==e&&k.dispatch({changes:{from:0,to:e.length,insert:t||""},annotations:[h.of(!0)]})})()},[t]),s.useEffect(()=>()=>{k&&(k.destroy(),w(null))},[]),s.useEffect(()=>{null==y||y(k)},[k]),s.useImperativeHandle(n,()=>({getView:()=>k}),[k]),(0,r.jsx)("div",{className:"codemirror-editor h-full",ref:N})});p.displayName="CodeMirrorEditor";var v=p},48537:function(e,n,t){"use strict";t.d(n,{q:function(){return i}});var r=t(36164);t(3546);var s=t(28312),a=t(31458),l=t(81565);function i(e){let{className:n,value:t,onCopyContent:i,text:o,...c}=e,{isCopied:d,copyToClipboard:u}=(0,s.m)({timeout:2e3,onCopyContent:i});return t?(0,r.jsxs)(a.z,{variant:"ghost",size:o?"default":"icon",className:n,onClick:()=>{d||u(t)},...c,children:[d?(0,r.jsx)(l.IconCheck,{className:"text-green-600"}):(0,r.jsx)(l.IconCopy,{}),o&&(0,r.jsx)("span",{children:o}),!o&&(0,r.jsx)("span",{className:"sr-only",children:"Copy"})]}):null}},30601:function(e,n,t){"use strict";t.d(n,{Hb:function(){return m},wt:function(){return d},xc:function(){return h},yo:function(){return f}});var r=t(36164),s=t(3546),a=t(74630),l=t(36327),i=t(80605),o=t(74248),c=t(81565);let d="3.5rem",u=s.createContext({}),f=e=>{let{children:n}=e,t=(0,i.UA)(),[l,o]=s.useState(!1);return s.useEffect(()=>{let e=window.self!==window.top;e||(0,a.Z)(t)||o(t)},[t]),(0,r.jsx)(u.Provider,{value:{isShowDemoBanner:l,setIsShowDemoBanner:o},children:n})};function m(){let{isShowDemoBanner:e,setIsShowDemoBanner:n}=s.useContext(u);return[e,n]}function h(){let[e,n]=m(),{data:t}=(0,l.Z)("https://api.github.com/repos/TabbyML/tabby",e=>fetch(e).then(e=>e.json()));return(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center justify-between bg-primary px-4 text-primary-foreground transition-all md:px-5",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),style:e?{height:d}:{height:0},children:[(0,r.jsxs)("a",{href:"https://links.tabbyml.com/schedule-a-demo",target:"_blank",className:"flex items-center gap-x-2 text-xs font-semibold underline md:text-sm",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC6"}),(0,r.jsx)("span",{children:"Book a 30-minute product demo."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4 md:gap-x-8",children:[(0,r.jsxs)("a",{href:"https://github.com/TabbyML/tabby",target:"_blank",className:"flex items-center transition-all hover:opacity-70",children:[(0,r.jsx)(c.IconGithub,{}),(0,r.jsxs)("div",{className:"ml-2 hidden md:block",children:[(0,r.jsx)("p",{className:"text-xs font-semibold",children:"TabbyML/tabby"}),(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center text-xs transition-all",{"h-4 opacity-70":t,"h-0 opacity-0":!t}),children:[(0,r.jsx)(c.IconStar,{className:"mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==t?void 0:t.stargazers_count}),(0,r.jsx)(c.IconGitFork,{className:"ml-2 mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==t?void 0:t.forks_count})]})]})]}),(0,r.jsx)(c.IconClose,{className:"cursor-pointer transition-all hover:opacity-70",onClick:()=>n(!1)})]})]})}},90379:function(e,n,t){"use strict";t.d(n,{PF:function(){return o},cg:function(){return l},tB:function(){return i}});var r=t(36164),s=t(74248),a=t(3448);let l=e=>{let{className:n,...t}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("space-y-3",n),...t,children:[(0,r.jsx)(a.O,{className:"h-4 w-full"}),(0,r.jsx)(a.O,{className:"h-4 w-full"}),(0,r.jsx)(a.O,{className:"h-4 w-full"}),(0,r.jsx)(a.O,{className:"h-4 w-full"})]})},i=e=>{let{className:n,...t}=e;return(0,r.jsx)(a.O,{className:(0,s.cn)("h-4 w-full",n),...t})},o=e=>{let{className:n,...t}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("flex flex-col gap-3",n),...t,children:[(0,r.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,r.jsx)(a.O,{className:"h-4 w-full"}),(0,r.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,r.jsx)(a.O,{className:"h-4 w-full"})]})}},38736:function(e,n,t){"use strict";t.d(n,{J:function(){return u},U:function(){return f}});var r=t(36164),s=t(3546),a=t(7062),l=t.n(a),i=t(9010),o=t(24449),c=t(16784);let d=s.createContext({}),u=e=>{let{children:n}=e,{theme:t}=(0,i.X)(),[a,u]=s.useState(!1),[f]=(0,o.n)(a,200,{leading:!0}),m=(0,c.d)(a);s.useEffect(()=>{l().config({barColors:{0:"dark"===t?"#DC981A":"#B7942B"}})},[]);let h=s.useCallback(e=>{e&&e===m.current||u(e)},[]);return(0,r.jsxs)(d.Provider,{value:{progress:f,setProgress:h},children:[f&&(0,r.jsx)(l(),{}),n]})},f=()=>s.useContext(d)},31458:function(e,n,t){"use strict";t.d(n,{d:function(){return o},z:function(){return c}});var r=t(36164),s=t(3546),a=t(74047),l=t(14375),i=t(74248);let o=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90","hover-destructive":"shadow-none hover:bg-destructive/90 hover:text-destructive-foreground",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,n)=>{let{className:t,variant:s,size:l,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:t})),ref:n,...d})});c.displayName="Button"},36065:function(e,n,t){"use strict";t.d(n,{di:function(){return h},e8:function(){return d},fu:function(){return f},mY:function(){return o},rb:function(){return u},sZ:function(){return c},zz:function(){return m}});var r=t(36164),s=t(3546),a=t(53241),l=t(93170),i=t(74248);t(30220);let o=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY,{ref:n,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s})});o.displayName=a.mY.displayName;let c=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(a.mY.Input,{ref:n,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]})});c.displayName=a.mY.Input.displayName;let d=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.List,{ref:n,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...s})});d.displayName=a.mY.List.displayName;let u=s.forwardRef((e,n)=>(0,r.jsx)(a.mY.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));u.displayName=a.mY.Empty.displayName;let f=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.Group,{ref:n,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s})});f.displayName=a.mY.Group.displayName;let m=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.Separator,{ref:n,className:(0,i.cn)("-mx-1 h-px bg-border",t),...s})});m.displayName=a.mY.Separator.displayName;let h=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.mY.Item,{ref:n,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-disabled:pointer-events-none aria-disabled:opacity-50 aria-selected:bg-accent aria-selected:text-accent-foreground",t),...s})});h.displayName=a.mY.Item.displayName},30220:function(e,n,t){"use strict";t.d(n,{$N:function(){return p},Be:function(){return v},Vq:function(){return o},cN:function(){return h},cZ:function(){return f},fK:function(){return m},hg:function(){return c}});var r=t(36164),s=t(3546),a=t(4318),l=t(1663),i=t(74248);let o=a.fC,c=a.xz,d=a.h_;a.x8;let u=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.aV,{ref:n,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s})});u.displayName=a.aV.displayName;let f=s.forwardRef((e,n)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(a.VY,{ref:n,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[s,(0,r.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=a.VY.displayName;let m=e=>{let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...t})};m.displayName="DialogHeader";let h=e=>{let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...t})};h.displayName="DialogFooter";let p=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.Dx,{ref:n,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});p.displayName=a.Dx.displayName;let v=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.dk,{ref:n,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});v.displayName=a.dk.displayName},82394:function(e,n,t){"use strict";t.d(n,{I:function(){return l}});var r=t(36164),s=t(3546),a=t(74248);let l=s.forwardRef((e,n)=>{let{className:t,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...l})});l.displayName="Input"},84942:function(e,n,t){"use strict";t.d(n,{J2:function(){return i},i9:function(){return d},tW:function(){return u},xo:function(){return o},xp:function(){return c},yk:function(){return f}});var r=t(36164),s=t(3546),a=t(83299),l=t(74248);let i=a.fC,o=a.xz,c=a.x8,d=a.h_,u=a.ee,f=s.forwardRef((e,n)=>{let{className:t,sideOffset:s=4,...i}=e;return(0,r.jsx)(a.VY,{ref:n,sideOffset:s,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});f.displayName=a.VY.displayName},53538:function(e,n,t){"use strict";t.d(n,{Dp:function(){return o},ee:function(){return i},pO:function(){return l}});var r=t(36164),s=t(6618),a=t(74248);let l=e=>{let{className:n,...t}=e;return(0,r.jsx)(s.eh,{className:(0,a.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",n),...t})},i=s.s_,o=e=>{let{withHandle:n,className:t,...l}=e;return(0,r.jsx)(s.OT,{className:(0,a.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...l,children:n&&(0,r.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})}},54594:function(e,n,t){"use strict";t.d(n,{Bw:function(){return f},DI:function(){return c},Ph:function(){return o},Ql:function(){return h},U$:function(){return p},i4:function(){return u},ki:function(){return d}});var r=t(36164),s=t(3546),a=t(31889),l=t(74248),i=t(81565);let o=a.fC,c=a.ZA,d=a.B4,u=s.forwardRef((e,n)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(a.xz,{ref:n,className:(0,l.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...o,children:[s,(0,r.jsx)(a.JO,{asChild:!0,children:(0,r.jsx)(i.IconChevronUpDown,{className:"opacity-50"})})]})});u.displayName=a.xz.displayName;let f=s.forwardRef((e,n)=>{let{className:t,children:s,position:i="popper",...o}=e;return(0,r.jsx)(a.h_,{children:(0,r.jsx)(a.VY,{ref:n,className:(0,l.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===i&&"translate-y-1",t),position:i,...o,children:(0,r.jsx)(a.l_,{className:(0,l.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});f.displayName=a.VY.displayName;let m=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.__,{ref:n,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})});m.displayName=a.__.displayName;let h=s.forwardRef((e,n)=>{let{className:t,children:s,isPlaceHolder:o,...c}=e;return(0,r.jsxs)(a.ck,{ref:n,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...c,children:[!o&&(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(a.wU,{children:(0,r.jsx)(i.IconCheck,{className:"h-4 w-4"})})}),(0,r.jsx)(a.eT,{children:s})]})});h.displayName=a.ck.displayName;let p=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.Z0,{ref:n,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",t),...s})});p.displayName=a.Z0.displayName},11208:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(36164),s=t(3546),a=t(74225),l=t(74248);let i=s.forwardRef((e,n)=>{let{className:t,orientation:s="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(a.f,{ref:n,decorative:i,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...o})});i.displayName=a.f.displayName},3448:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});var r=t(36164),s=t(74248);function a(e){let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,s.cn)("h-4 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",n),...t})}},99047:function(e,n,t){"use strict";t.d(n,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return f},ss:function(){return u},xD:function(){return i}});var r=t(36164),s=t(3546),a=t(74248);let l=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("table",{ref:n,className:(0,a.cn)("w-full caption-bottom text-sm",t),...s})});l.displayName="Table";let i=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("thead",{ref:n,className:(0,a.cn)("[&_tr]:border-b",t),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("tbody",{ref:n,className:(0,a.cn)("[&_tr:last-child]:border-0",t),...s})});o.displayName="TableBody";let c=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("tfoot",{ref:n,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s})});c.displayName="TableFooter";let d=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("tr",{ref:n,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s})});d.displayName="TableRow";let u=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("th",{ref:n,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s})});u.displayName="TableHead";let f=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("td",{ref:n,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s})});f.displayName="TableCell";let m=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)("caption",{ref:n,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",t),...s})});m.displayName="TableCaption"},50538:function(e,n,t){"use strict";t.d(n,{SP:function(){return c},dr:function(){return o},mQ:function(){return i},nU:function(){return d}});var r=t(36164),s=t(3546),a=t(6044),l=t(74248);let i=a.fC,o=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.aV,{ref:n,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s})});o.displayName=a.aV.displayName;let c=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.xz,{ref:n,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s})});c.displayName=a.xz.displayName;let d=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.VY,{ref:n,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s})});d.displayName=a.VY.displayName},29:function(e,n,t){"use strict";t.d(n,{_v:function(){return d},aJ:function(){return c},pn:function(){return i},u:function(){return o}});var r=t(36164),s=t(3546),a=t(44421),l=t(74248);let i=a.zt,o=a.fC,c=a.xz,d=s.forwardRef((e,n)=>{let{className:t,sideOffset:s=4,...i}=e;return(0,r.jsx)(a.VY,{ref:n,sideOffset:s,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-xs font-medium text-popover-foreground shadow-md animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",t),...i})});d.displayName=a.VY.displayName},93877:function(e,n,t){"use strict";t.d(n,{BT:function(){return o},Ds:function(){return c},Ot:function(){return u},m3:function(){return m}});var r=t(3546);let s=(e,n)=>{let[t,s]=(0,r.useState)(n),[a,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let n=localStorage.getItem(e);n&&s(JSON.parse(n)),l(!1)},[]),[t,n=>{s(n),localStorage.setItem(e,JSON.stringify(n))},a]};class a{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,n,t,r){this.storageKey=e,this.title=n,this.description=t,this.defaultValue=r}}class l{defineGlobalVar(){return new a(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,n,t]=s(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:t},()=>{n(!e)}]}}constructor(e,n,t,r){this.storageKey="EXP_".concat(e),this.title=n,this.description=t,this.defaultValue=null!=r&&r}}let i=new l("enable_code_browser_quick_action_bar","Quick Action Bar","Enable Quick Action Bar to display a convenient toolbar when you select code, offering options to explain the code, add unit tests, and more.",!0),o=i.defineGlobalVar(),c=i.defineHook(),d=new l("enable_search","Search","Enable the search on the home page to search for anything you want to know using the local chat model.",!0);d.defineGlobalVar();let u=d.defineHook(),f=new l("enable_developer_mode","Developer Mode","Enable the developer mode. The features involved include the Answer Engine.",!1);f.defineGlobalVar();let m=f.defineHook()},28312:function(e,n,t){"use strict";t.d(n,{m:function(){return i}});var r=t(3546),s=t(61200),a=t.n(s),l=t(2578);function i(e){let{timeout:n=2e3,onError:t,onCopyContent:s}=e,[i,o]=r.useState(!1),c=()=>{o(!0),setTimeout(()=>{o(!1)},n)},d=e=>{if("function"==typeof t){null==t||t(e);return}l.A.error("Failed to copy.")};return{isCopied:i,copyToClipboard:e=>{var n;if(e){if(s){s(e),c();return}if(null===(n=navigator.clipboard)||void 0===n?void 0:n.writeText)navigator.clipboard.writeText(e).then(c).catch(d);else{let n=a()(e);n?c():d()}}}}}},9010:function(e,n,t){"use strict";t.d(n,{X:function(){return s}});var r=t(28242);function s(){let{theme:e,systemTheme:n,setTheme:t}=(0,r.F)();return{theme:e&&"system"!==e?e:n||"light",setTheme:t,systemTheme:n}}},24449:function(e,n,t){"use strict";t.d(n,{S:function(){return i},n:function(){return o}});var r=t(3546),s=t(45391),a=t(16784);let l=e=>{let n=(0,a.d)(e);r.useEffect(()=>()=>{n.current()},[])};function i(e,n,t){let i=(0,a.d)(e),o=r.useMemo(()=>(0,s.Z)(function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.current(...n)},n,t),[]);return l(()=>{var e;null==t||null===(e=t.onUnmount)||void 0===e||e.call(t,o),o.cancel()}),{run:o,cancel:o.cancel,flush:o.flush}}function o(e,n,t){let[s,a]=r.useState(e),{run:l}=i(()=>{a(e)},n,t);return r.useEffect(()=>{l()},[e]),[s,a]}},38785:function(e,n,t){"use strict";t.d(n,{U:function(){return a}});var r=t(3546);let s=!0;function a(){let[e,n]=r.useState(()=>!s);return r.useEffect(function(){s=!1,n(!0)},[]),e}},16784:function(e,n,t){"use strict";t.d(n,{d:function(){return s}});var r=t(3546);function s(e){let n=r.useRef(e);return n.current=e,n}},98454:function(e,n,t){"use strict";t.d(n,{P:function(){return l}});var r=t(40055),s=t(43240);let a=(0,s.BX)("\n  query MeQuery {\n    me {\n      id\n      authToken\n      email\n      isAdmin\n      isPasswordSet\n      name\n    }\n  }\n"),l=()=>(0,r.aM)({query:a})},44645:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(3546),s=t(11978);function a(){let e=(0,s.usePathname)(),n=(0,s.useRouter)(),t=(0,s.useSearchParams)(),a=(0,r.useCallback)(e=>{let n=new URLSearchParams(t);e&&Object.entries(e).forEach(e=>{let[t,r]=e;return n.set(t,r)});let r=n.toString();return r.length>0?"?".concat(r):""},[t]),l=(0,r.useCallback)(r=>{let s=function(e,n,t){var r,s;let a=null===(r=t.searchParams)||void 0===r?void 0:r.set,l=null===(s=t.searchParams)||void 0===s?void 0:s.del,i=new URLSearchParams(n);a&&Object.entries(a).forEach(e=>{let[n,t]=e;return i.set(n,t)}),l&&(Array.isArray(l)?l.forEach(e=>i.delete(e)):i.delete(l));let o=i.toString(),c=e;return o.length>0&&(c+="?".concat(o)),t.hash&&(c+="#".concat(t.hash.replace(/^#/,""))),c}((null==r?void 0:r.pathname)||e,t,r);r.replace?n.replace(s):n.push(s)},[e,t]);return{pathname:e,router:n,searchParams:t,getQueryString:a,updateUrlComponents:l}}},80605:function(e,n,t){"use strict";t.d(n,{UA:function(){return u},Uw:function(){return c},c7:function(){return o},jJ:function(){return d},xG:function(){return i}});var r=t(40055),s=t(43240);let a=(0,s.BX)("\n  query GetServerInfo {\n    serverInfo {\n      isAdminInitialized\n      isEmailConfigured\n      isChatEnabled\n      allowSelfSignup\n      isDemoMode\n    }\n  }\n"),l=()=>{let[{data:e}]=(0,r.aM)({query:a});return null==e?void 0:e.serverInfo},i=()=>{var e;return null===(e=l())||void 0===e?void 0:e.isChatEnabled},o=()=>{var e;return null===(e=l())||void 0===e?void 0:e.isAdminInitialized},c=()=>{var e;return null===(e=l())||void 0===e?void 0:e.isEmailConfigured},d=()=>{var e;return null===(e=l())||void 0===e?void 0:e.allowSelfSignup},u=()=>{var e;return null===(e=l())||void 0===e?void 0:e.isDemoMode}},25647:function(e,n,t){"use strict";t.d(n,{o:function(){return a}});var r=t(3546),s=t(38785);let a=(e,n)=>{let t=(0,s.U)(),a=e(e=>null==e?void 0:e._hasHydrated),l=e(n),[i,o]=r.useState(t&&a?l:void 0);return r.useEffect(()=>{o(l)},[l]),i}},63484:function(e,n,t){"use strict";t.d(n,{U$:function(){return d},t:function(){return u}});var r=t(14283),s=t.n(r),a=t(34021),l=t(74630),i=t(18500),o=JSON.parse('{"Mercury":"#ff2b2b","TypeScript":"#2b7489","PureBasic":"#5a6986","Objective-C++":"#6866fb","Self":"#0579aa","edn":"#db5855","NewLisp":"#87AED7","Jupyter Notebook":"#DA5B0B","Rebol":"#358a5b","Frege":"#00cafe","Dart":"#00B4AB","AspectJ":"#a957b0","Shell":"#89e051","Web Ontology Language":"#9cc9dd","xBase":"#403a40","Eiffel":"#946d57","Nix":"#7e7eff","RAML":"#77d9fb","MTML":"#b7e1f4","Racket":"#22228f","Elixir":"#6e4a7e","SAS":"#B34936","Agda":"#315665","wisp":"#7582D1","D":"#ba595e","Kotlin":"#F18E33","Opal":"#f7ede0","Crystal":"#776791","Objective-C":"#438eff","ColdFusion CFC":"#ed2cd6","Oz":"#fab738","Mirah":"#c7a938","Objective-J":"#ff0c5a","Gosu":"#82937f","FreeMarker":"#0050b2","Ruby":"#701516","Component Pascal":"#b0ce4e","Arc":"#aa2afe","Brainfuck":"#2F2530","Nit":"#009917","APL":"#5A8164","Go":"#375eab","Visual Basic":"#945db7","PHP":"#4F5D95","Cirru":"#ccccff","SQF":"#3F3F3F","Glyph":"#e4cc98","Java":"#b07219","MAXScript":"#00a6a6","Scala":"#DC322F","Makefile":"#427819","ColdFusion":"#ed2cd6","Perl":"#0298c3","Lua":"#000080","Vue":"#2c3e50","Verilog":"#b2b7f8","Factor":"#636746","Haxe":"#df7900","Pure Data":"#91de79","Forth":"#341708","Red":"#ee0000","Hy":"#7790B2","Volt":"#1F1F1F","LSL":"#3d9970","eC":"#913960","CoffeeScript":"#244776","HTML":"#e44b23","Lex":"#DBCA00","API Blueprint":"#2ACCA8","Swift":"#ffac45","C":"#555555","AutoHotkey":"#6594b9","Isabelle":"#FEFE00","Metal":"#8f14e9","Clarion":"#db901e","JSONiq":"#40d47e","Boo":"#d4bec1","AutoIt":"#1C3552","Clojure":"#db5855","Rust":"#dea584","Prolog":"#74283c","SourcePawn":"#5c7611","AMPL":"#E6EFBB","FORTRAN":"#4d41b1","ANTLR":"#9DC3FF","Harbour":"#0e60e3","Tcl":"#e4cc98","BlitzMax":"#cd6400","PigLatin":"#fcd7de","Lasso":"#999999","ECL":"#8a1267","VHDL":"#adb2cb","Elm":"#60B5CC","Propeller Spin":"#7fa2a7","X10":"#4B6BEF","IDL":"#a3522f","ATS":"#1ac620","Ada":"#02f88c","Unity3D Asset":"#ab69a1","Nu":"#c9df40","LFE":"#004200","SuperCollider":"#46390b","Oxygene":"#cdd0e3","ASP":"#6a40fd","Assembly":"#6E4C13","Gnuplot":"#f0a9f0","JFlex":"#DBCA00","NetLinx":"#0aa0ff","Turing":"#45f715","Vala":"#fbe5cd","Processing":"#0096D8","Arduino":"#bd79d1","FLUX":"#88ccff","NetLogo":"#ff6375","CSharp":"#178600","CSS":"#563d7c","Emacs Lisp":"#c065db","Stan":"#b2011d","SaltStack":"#646464","QML":"#44a51c","Pike":"#005390","LOLCODE":"#cc9900","ooc":"#b0b77e","Handlebars":"#01a9d6","J":"#9EEDFF","Mask":"#f97732","EmberScript":"#FFF4F3","TeX":"#3D6117","Nemerle":"#3d3c6e","KRL":"#28431f","Ren\'Py":"#ff7f7f","Unified Parallel C":"#4e3617","Golo":"#88562A","Fancy":"#7b9db4","OCaml":"#3be133","Shen":"#120F14","Pascal":"#b0ce4e","F#":"#b845fc","Puppet":"#302B6D","ActionScript":"#882B0F","Diff":"#88dddd","Ragel in Ruby Host":"#9d5200","Fantom":"#dbded5","Zephir":"#118f9e","Click":"#E4E6F3","Smalltalk":"#596706","DM":"#447265","Ioke":"#078193","PogoScript":"#d80074","LiveScript":"#499886","JavaScript":"#f1e05a","VimL":"#199f4b","PureScript":"#1D222D","ABAP":"#E8274B","Matlab":"#bb92ac","Slash":"#007eff","R":"#198ce7","Erlang":"#B83998","Pan":"#cc0000","LookML":"#652B81","Eagle":"#814C05","Scheme":"#1e4aec","PLSQL":"#dad8d8","Python":"#3572A5","Max":"#c4a79c","Common Lisp":"#3fb68b","Latte":"#A8FF97","XQuery":"#5232e7","Omgrofl":"#cabbff","XC":"#99DA07","Nimrod":"#37775b","SystemVerilog":"#DAE1C2","Chapel":"#8dc63f","Groovy":"#e69f56","Dylan":"#6c616e","E":"#ccce35","Parrot":"#f3ca0a","Grammatical Framework":"#79aa7a","Game Maker Language":"#8fb200","Papyrus":"#6600cc","NetLinx+ERB":"#747faa","Clean":"#3F85AF","Alloy":"#64C800","Squirrel":"#800000","PAWN":"#dbb284","UnrealScript":"#a54c4d","Standard ML":"#dc566d","Slim":"#ff8f77","Perl6":"#0000fb","Julia":"#a270ba","Haskell":"#29b544","NCL":"#28431f","Io":"#a9188d","Rouge":"#cc0088","cpp":"#f34b7d","AGS Script":"#B9D9FF","Dogescript":"#cca760","nesC":"#94B0C7"}'),c={abap:{filenames:[],extnames:["abap"]},actionscript:{filenames:[],extnames:["as"]},ada:{filenames:[],extnames:["ada","adb","ads"]},apacheconf:{filenames:[".htaccess","apache2.conf","httpd.conf"],extnames:["apacheconf","vhost"]},apl:{filenames:[],extnames:["apl","dyalog"]},applescript:{filenames:[],extnames:["applescript","scpt"]},arff:{filenames:[],extnames:["arff"]},asciidoc:{filenames:[],extnames:["asciidoc","adoc","asc"]},asm6502:{filenames:[],extnames:["asm"]},autohotkey:{filenames:[],extnames:["ahk","ahkl"]},autoit:{filenames:[],extnames:["au3"]},bash:{filenames:[".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".login",".profile",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_logout","bash_profile","bashrc","cshrc","gradlew","login","man","profile","zlogin","zlogout","zprofile","zshenv","zshrc"],extnames:["sh","bash","bats","cgi","command","fcgi","ksh","tmux","tool","zsh"]},basic:{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},batch:{filenames:[],extnames:["bat","cmd"]},bison:{filenames:[],extnames:["bison"]},brainfuck:{filenames:[],extnames:["b","bf"]},bro:{filenames:[],extnames:["bro"]},c:{filenames:[],extnames:["c","cats","h","idc"]},csharp:{filenames:[],extnames:["cs","cake","cshtml","csx"]},cpp:{filenames:[],extnames:["cpp","c++","cc","cp","cxx","h","h++","hh","hpp","hxx","inc","inl","ino","ipp","re","tcc","tpp"]},coffeescript:{filenames:["Cakefile"],extnames:["coffee","_coffee","cake","cjsx","iced"]},clojure:{filenames:["riemann.config"],extnames:["clj","boot","cl2","cljc","cljs","cljs.hl","cljscm","cljx","hic"]},crystal:{filenames:[],extnames:["cr"]},css:{filenames:[],extnames:["css"]},d:{filenames:[],extnames:["d","di"]},dart:{filenames:[],extnames:["dart"]},diff:{filenames:[],extnames:["diff","patch"]},django:{filenames:[],extnames:["jinja","jinja2","mustache","njk"]},dockerfile:{filenames:["Dockerfile"],extnames:["dockerfile"]},eiffel:{filenames:[],extnames:["e"]},elixir:{filenames:["mix.lock"],extnames:["ex","exs"]},elm:{filenames:[],extnames:["elm"]},erb:{filenames:[],extnames:["erb"]},erlang:{filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"],extnames:["erl","app.src","es","escript","hrl","xrl","yrl"]},fsharp:{filenames:[],extnames:["fs","fsi","fsx"]},fortran:{filenames:[],extnames:["f90","f","f03","f08","f77","f95","for","fpp"]},gedcom:{filenames:[],extnames:["ged"]},gherkin:{filenames:[],extnames:["feature"]},glsl:{filenames:[],extnames:["glsl","fp","frag","frg","fs","fsh","fshader","geo","geom","glslv","gshader","shader","tesc","tese","vert","vrx","vsh","vshader"]},go:{filenames:[],extnames:["go"]},graphql:{filenames:[],extnames:["graphql","gql"]},groovy:{filenames:["Jenkinsfile"],extnames:["groovy","grt","gtpl","gvy"]},haml:{filenames:[],extnames:["haml"]},handlebars:{filenames:[],extnames:["handlebars","hbs"]},haskell:{filenames:[],extnames:["hs","hsc"]},haxe:{filenames:[],extnames:["hx","hxsl"]},http:{filenames:[],extnames:["http"]},icon:{filenames:[],extnames:["icn"]},inform7:{filenames:[],extnames:["ni","i7x"]},ini:{filenames:[".editorconfig",".gitconfig"],extnames:["ini","cfg","lektorproject","prefs","pro","properties"]},io:{filenames:[],extnames:["io"]},j:{filenames:[],extnames:["ijs"]},java:{filenames:[],extnames:["java"]},javascript:{filenames:["Jakefile"],extnames:["js","_js","cjs","bones","es","es6","frag","gs","jake","jsb","jscad","jsfl","jsm","jss","mjs","njs","pac","sjs","ssjs","xsjs","xsjslib"]},jolie:{filenames:[],extnames:["ol","iol"]},json:{filenames:[".arcconfig",".htmlhintrc",".tern-config",".tern-project","composer.lock","mcmod.info"],extnames:["json","avsc","geojson","gltf","JSON-tmLanguage","jsonl","tfstate","topojson","webapp","webmanifest","yy","yyp"]},julia:{filenames:[],extnames:["jl"]},keyman:{filenames:[],extnames:["kmn"]},kotlin:{filenames:[],extnames:["kt","ktm","kts"]},latex:{filenames:[],extnames:["tex","aux","bbx","bib","cbx","cls","dtx","ins","lbx","ltx","mkii","mkiv","mkvi","sty","toc"]},less:{filenames:[],extnames:["less"]},liquid:{filenames:[],extnames:["liquid"]},lisp:{filenames:[],extnames:["lisp","asd","cl","l","lsp","ny","podsl","sexp"]},livescript:{filenames:["Slakefile"],extnames:["ls","_ls"]},lolcode:{filenames:[],extnames:["lol"]},lua:{filenames:[],extnames:["lua","fcgi","nse","p8","pd_lua","rbxs","wlua"]},cmake:{filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"],extnames:["mak","d","make","mk","mkfile"]},markdown:{filenames:["contents.lr","LICENSE"],extnames:["md","markdown","mdown","mdwn","mkd","mkdn","mkdown","ronn","workbook"]},markup:{filenames:[],extnames:["apib","blade","chem","ecr","eex","ejs","html","htm","ipynb","kit","latte","marko","mask","mtml","phtml","pic","raml","rhtml","vue","xht","xhtml"]},matlab:{filenames:[],extnames:["matlab","m"]},mel:{filenames:[],extnames:["mel"]},mizar:{filenames:[],extnames:["miz","voc"]},monkey:{filenames:[],extnames:["monkey","monkey2"]},n4js:{filenames:[],extnames:["n4jsd"]},nasm:{filenames:[],extnames:["nasm"]},nginx:{filenames:["nginx.conf"],extnames:["nginxconf","vhost"]},nim:{filenames:[],extnames:["nim","nimrod"]},nix:{filenames:[],extnames:["nix"]},nsis:{filenames:[],extnames:["nsi","nsh"]},objectivec:{filenames:[],extnames:["m","h"]},ocaml:{filenames:[],extnames:["ml","eliom","eliomi","ml4","mli","mll","mly"]},opencl:{filenames:[],extnames:["opencl","cl"]},oz:{filenames:[],extnames:["oz"]},pascal:{filenames:[],extnames:["pas","dfm","dpr","inc","lpr","pascal","pp"]},perl:{filenames:["Makefile.PL","Rexfile","ack","cpanfile"],extnames:["pl","al","cgi","fcgi","perl","ph","plx","pm","psgi","t"]},php:{filenames:[".php",".php_cs",".php_cs.dist","Phakefile"],extnames:["php","aw","ctp","fcgi","inc","php3","php4","php5","phps","phpt"]},plsql:{filenames:[],extnames:["pls","bdy","ddl","fnc","pck","pkb","pks","plb","plsql","prc","spc","tpb","tps","trg","vw"]},powershell:{filenames:[],extnames:["ps1","psd1","psm1"]},processing:{filenames:[],extnames:["pde"]},prolog:{filenames:[],extnames:["pl","pro","prolog","yap"]},properties:{filenames:[],extnames:["properties"]},protobuf:{filenames:[],extnames:["proto"]},pug:{filenames:[],extnames:["jade","pug"]},puppet:{filenames:["Modulefile"],extnames:["pp"]},pure:{filenames:[],extnames:["pure"]},python:{filenames:[".gclient","BUCK","BUILD","BUILD.bazel","SConscript","SConstruct","Snakefile","WORKSPACE","wscript"],extnames:["py","bzl","cgi","fcgi","gyp","gypi","lmi","py3","pyde","pyi","pyp","pyt","pyw","rpy","spec","tac","wsgi","xpy"]},q:{filenames:[],extnames:["q"]},qore:{filenames:[],extnames:["q","qm","qtest"]},r:{filenames:[".Rprofile","expr-dist"],extnames:["r","rd","rsx"]},jsx:{filenames:[],extnames:["jsx"]},toml:{filenames:[],extnames:["toml"]},tsx:{filenames:[],extnames:["tsx"]},renpy:{filenames:[],extnames:["rpy"]},reason:{filenames:[],extnames:["re","rei"]},rest:{filenames:[],extnames:["rst","rest"]},rip:{filenames:[],extnames:["rip"]},ruby:{filenames:[".irbrc",".pryrc","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Gemfile.lock","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Thorfile","Vagrantfile","buildfile"],extnames:["rb","builder","eye","fcgi","gemspec","god","jbuilder","mspec","pluginspec","podspec","rabl","rake","rbuild","rbw","rbx","ru","ruby","spec","thor","watchr"]},rust:{filenames:[],extnames:["rs"]},sas:{filenames:[],extnames:["sas"]},sass:{filenames:[],extnames:["sass"]},scss:{filenames:[],extnames:["scss"]},scala:{filenames:[],extnames:["scala","kojo","sbt","sc"]},scheme:{filenames:[],extnames:["scm","sch","sld","sls","sps","ss"]},smalltalk:{filenames:[],extnames:["st","cs"]},smarty:{filenames:[],extnames:["tpl"]},sql:{filenames:[],extnames:["sql","cql","ddl","inc","mysql","prc","tab","udf","viw"]},soy:{filenames:[],extnames:["soy"]},stylus:{filenames:[],extnames:["styl"]},swift:{filenames:[],extnames:["swift"]},tcl:{filenames:["owh","starfield"],extnames:["tcl","adp","tm"]},textile:{filenames:[],extnames:["textile"]},tt2:{filenames:[],extnames:["pm"]},twig:{filenames:[],extnames:["twig"]},typescript:{filenames:[],extnames:["ts"]},velocity:{filenames:[],extnames:["vm"]},verilog:{filenames:[],extnames:["v","veo"]},vhdl:{filenames:[],extnames:["vhdl","vhd","vhf","vhi","vho","vhs","vht","vhw"]},vim:{filenames:[".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"],extnames:["vim"]},"visual-basic":{filenames:[],extnames:["vb","bas","cls","frm","frx","vba","vbhtml","vbs"]},wasm:{filenames:[],extnames:["wast","wat"]},xojo:{filenames:[],extnames:["xojo_code","xojo_menu","xojo_report","xojo_script","xojo_toolbar","xojo_window"]},xquery:{filenames:[],extnames:["xquery","xq","xql","xqm","xqy"]},yaml:{filenames:[".clang-format",".clang-tidy",".gemrc","glide.lock"],extnames:["yml","mir","reek","rviz","sublime-syntax","syntax","yaml","yaml-tmlanguage"]}};Object.entries(o).reduce((e,n)=>{let[t,r]=n;return{...e,[t.toLocaleLowerCase()]:r}},{});let d=e=>{let n={},t={};for(let[e,r]of Object.entries(c)){for(let t of r.filenames)(0,a.Z)(n,t)||(n[t]=[]),n[t].push(e);for(let n of r.extnames)(0,a.Z)(t,n)||(t[n]=[]),t[n].push(e)}return[].concat(n[s().basename(e)],t[s().extname(e).substring(1)]).filter(Boolean)},u=(e,n)=>{let t=()=>(0,l.Z)(n)?"Other":n;if(!e)return t();let r=Object.values(i.SQ).map(e=>e.toLocaleLowerCase()).indexOf(e.toLocaleLowerCase());if(-1===r)return t();let s=Object.keys(i.SQ)[r];return({csharp:"C#",cpp:"C++",javascript:"JavaScript",typescript:"TypeScript"})[s.toLocaleLowerCase()]||s}},17451:function(e,n,t){"use strict";t.d(n,{a:function(){return o}});var r=t(27257),s=t(85654),a=t(74248);let l=["_hasHydrated","setHasHydrated","activeChatId"],i={_hasHydrated:!1,chats:void 0,activeChatId:(0,a.x0)()},o=(0,r.Ue)()((0,s.tJ)(e=>({...i,setHasHydrated:n=>{e({_hasHydrated:n})}}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[n]=e;return!l.includes(n)})),onRehydrateStorage:()=>e=>{e&&e.setHasHydrated(!0)}}))},91302:function(e,n,t){"use strict";t.d(n,{Dp:function(){return v},Ho:function(){return g},QJ:function(){return N},av:function(){return S},kP:function(){return k},zq:function(){return j}});var r,s,a=t(36164),l=t(3546),i=t(11978),o=t(24426),c=t.n(o),d=t(43240),u=t(80605),f=t(11634),m=t(66794);function h(e,n){var t,r;let a=function(e,n){switch(n.type){case s.SignIn:case s.Refresh:return{status:"authenticated",data:n.data};case s.SignOut:return{status:"unauthenticated",data:void 0}}}(0,n);return e.status==a.status&&(t=e.data,r=a.data,(null==t?void 0:t.accessToken)===(null==r?void 0:r.accessToken)&&(null==t?void 0:t.refreshToken)===(null==r?void 0:r.refreshToken))?e:a}(r=s||(s={}))[r.SignIn=0]="SignIn",r[r.SignOut=1]="SignOut",r[r.Refresh=2]="Refresh";let p=l.createContext({}),v=(0,d.BX)("\n  mutation refreshToken($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      accessToken\n      refreshToken\n    }\n  }\n"),x=(0,d.BX)("\n  mutation LogoutAllSessions {\n    logoutAllSessions\n  }\n"),g=e=>{let{children:n}=e,[t,r]=l.useState(!1),[i]=c()(m.nd,void 0),[o,d]=l.useReducer(h,{status:"loading",data:void 0});l.useEffect(()=>{(null==i?void 0:i.accessToken)&&(null==i?void 0:i.refreshToken)?d({type:s.SignIn,data:i}):d({type:s.SignOut}),r(!0)},[]),l.useEffect(()=>{!t||((null==i?void 0:i.accessToken)&&(null==i?void 0:i.refreshToken)?d({type:s.Refresh,data:i}):(null==i?void 0:i.accessToken)||(null==i?void 0:i.refreshToken)||d({type:s.SignOut}))},[i]);let u=l.useMemo(()=>{var e;return(null==o?void 0:o.status)=="authenticated"?{data:{accessToken:o.data.accessToken},status:o.status}:{status:null!==(e=null==o?void 0:o.status)&&void 0!==e?e:"loading",data:null}},[o]);return(0,a.jsx)(p.Provider,{value:{authState:o,dispatch:d,session:u},children:n})};class b extends Error{constructor(){super("AuthProvider is missing. Please add the AuthProvider at root level")}}function y(){let e=l.useContext(p);if(!e)throw new b;return e}function j(){let{dispatch:e}=y(),[n,t]=c()(m.nd,void 0);return async n=>(t({accessToken:n.accessToken,refreshToken:n.refreshToken}),e({type:s.SignIn,data:n}),!0)}function N(){let e=(0,f.D)(x),{dispatch:n}=y(),[t,r]=c()(m.nd,void 0);return async()=>{await e(),r(void 0),n({type:s.SignOut})}}function k(){let{session:e}=y();return e}let w=["/auth/signin","/auth/signup","/auth/reset-password"];function S(){let e=(0,u.c7)(),n=(0,i.useRouter)(),t=(0,i.usePathname)(),r=(0,i.useSearchParams)(),{data:s,status:a}=k();return l.useEffect(()=>{if("loading"===a||"authenticated"===a||void 0===e)return;let s="/auth/signup"===t&&"true"===r.get("isAdmin");if(!s&&!e)return n.replace("/auth/signup?isAdmin=true");w.includes(t)||n.replace("/auth/signin")},[e,a]),s}},3765:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(44745),s=t(57778),a=t(79716),l=t(91302),i=t(66794);async function o(e,n){var t;let r=null!==(t=null==n?void 0:n.customFetch)&&void 0!==t?t:window.fetch;if(function(e){var n;if(e.startsWith("/oauth/providers"))return!1;let t=null===(n=(0,i.bW)())||void 0===n?void 0:n.accessToken;if(!t)return!0;try{let{exp:e}=(0,a.o)(t);return(0,i.pw)(e)}catch(e){return!0}}(e))return i.gN.refreshToken(c).then(t=>f(e,n));let s=await r(e,d(n));return 401===s.status?(i.gN.clearAccessToken(),i.gN.refreshToken(c).then(t=>f(e,n))):m(s,n)}async function c(){var e,n;let t=null===(e=(0,i.bW)())||void 0===e?void 0:e.refreshToken;if(!t)return;let r=await u(t);return null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.refreshToken}function d(e){var n;let t=new Headers(null==e?void 0:e.headers);return t.append("authorization","Bearer ".concat(null===(n=(0,i.bW)())||void 0===n?void 0:n.accessToken)),{...e||{},headers:t}}async function u(e){let n=new r.KU({url:"/graphql",requestPolicy:"network-only",exchanges:[r.Ek]}),t=n.createRequestOperation("mutation",(0,s.h)(l.Dp,{refreshToken:e}));return n.executeMutation(t)}function f(e,n){var t;let r=null!==(t=null==n?void 0:n.customFetch)&&void 0!==t?t:window.fetch;return r(e,d(n)).then(e=>m(e,n))}function m(e,n){return(null==e?void 0:e.ok)?(null==n?void 0:n.responseFormatter)?n.responseFormatter(e):(null==n?void 0:n.responseFormat)==="blob"?e.blob():e.json():(null==n?void 0:n.errorHandler)?n.errorHandler(e):void 0}},11634:function(e,n,t){"use strict";t.d(n,{D:function(){return m},L:function(){return h}});var r=t(22365),s=t(28552),a=t(81013),l=t(79716),i=t(74630),o=t(40055),c=t(44745),d=t(91302),u=t(70410),f=t(66794);function m(e,n){var t;let[r,s]=(0,o.Db)(e),a=(null==n?void 0:n.form)?(t=n.form,e=>{let{graphQLErrors:n=[]}=e;for(let e of n)if(e.extensions&&e.extensions["validation-errors"]){let n=e.extensions["validation-errors"];for(let e of n.errors)t.setError(e.path,e)}else(null==e?void 0:e.originalError)&&t.setError("root",e.originalError)}):void 0,l=async e=>{let t;try{if(null==(t=await s(e))?void 0:t.error)a&&a(t.error),(null==n?void 0:n.onError)&&n.onError(t.error);else if(!(0,i.Z)(null==t?void 0:t.data)){var r;null==n||null===(r=n.onCompleted)||void 0===r||r.call(n,t.data)}}catch(e){(null==n?void 0:n.onError)&&n.onError(e);return}return t};return l}let h=new c.KU({url:"/graphql",requestPolicy:"cache-and-network",exchanges:[(0,s.HG)({keys:{CompletionStats:()=>null,ServerInfo:()=>null,RepositorySearch:()=>null,RepositoryList:()=>null,RepositoryGrep:()=>null,GrepLine:()=>null,GrepFile:()=>null,GrepTextOrBase64:()=>null,GrepSubMatch:()=>null,Repository:e=>e?"".concat(e.kind,"_").concat(e.id):null,GitReference:()=>null},resolvers:{Query:{invitations:(0,a.N)(),gitRepositories:(0,a.N)(),webCrawlerUrls:(0,a.N)(),integrations:(0,a.N)()}},updates:{Mutation:{deleteInvitation(e,n,t,r){e.deleteInvitation&&t.inspectFields("Query").filter(e=>"invitations"===e.fieldName).forEach(e=>{t.updateQuery({query:u.lE,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.invitations)||void 0===t?void 0:t.edges)&&(e.invitations.edges=e.invitations.edges.filter(e=>e.node.id!==n.id)),e})})},deleteGitRepository(e,n,t,r){e.deleteGitRepository&&t.inspectFields("Query").filter(e=>"gitRepositories"===e.fieldName).forEach(e=>{t.updateQuery({query:u.S1,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.gitRepositories)||void 0===t?void 0:t.edges)&&(e.gitRepositories.edges=e.gitRepositories.edges.filter(e=>e.node.id!==n.id)),e})})},deleteWebCrawlerUrl(e,n,t,r){e.deleteWebCrawlerUrl&&t.inspectFields("Query").filter(e=>"webCrawlerUrls"===e.fieldName).forEach(e=>{t.updateQuery({query:u.XP,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.webCrawlerUrls)||void 0===t?void 0:t.edges)&&(e.webCrawlerUrls.edges=e.webCrawlerUrls.edges.filter(e=>e.node.id!==n.id)),e})})},deleteIntegration(e,n,t,r){e.deleteIntegration&&t.inspectFields("Query").filter(e=>"integrations"===e.fieldName).forEach(e=>{t.updateQuery({query:u.kb,variables:e.arguments},e=>((null==e?void 0:e.integrations)&&(e.integrations.edges=e.integrations.edges.filter(e=>e.node.id!==n.id)),e))})},createIntegration(e,n,t){let r="Query";t.inspectFields(r).filter(e=>{var t,r,s;return"integrations"===e.fieldName&&!!(null===(t=e.arguments)||void 0===t?void 0:t.kind)&&(null===(r=e.arguments)||void 0===r?void 0:r.kind)===(null==n?void 0:null===(s=n.input)||void 0===s?void 0:s.kind)}).forEach(e=>{t.invalidate(r,e.fieldName,e.arguments)})}}}}),(0,r.M)(async e=>{let n=(0,f.bW)(),t=null==n?void 0:n.accessToken,r=null==n?void 0:n.refreshToken;return{addAuthToOperation(n){let s=(0,f.bW)();return(t=null==s?void 0:s.accessToken,r=null==s?void 0:s.refreshToken,t)?e.appendHeaders(n,{Authorization:"Bearer ".concat(t)}):n},didAuthError(e,n){let t=e.graphQLErrors.some(e=>{var n;return(null==e?void 0:null===(n=e.extensions)||void 0===n?void 0:n.code)==="UNAUTHORIZED"});return t&&f.gN.clearAccessToken(),t},willAuthError(e){let n=(0,f.bW)();if(t=null==n?void 0:n.accessToken,r=null==n?void 0:n.refreshToken,"query"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null===(n=e.name)||void 0===n?void 0:n.value)&&["GetServerInfo"].includes(e.name.value)})||"mutation"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null===(n=e.name)||void 0===n?void 0:n.value)&&["tokenAuth","register"].includes(e.name.value)})||r&&"mutation"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null==e?void 0:null===(n=e.name)||void 0===n?void 0:n.value)==="refreshToken"}))return!1;if(!t)return f.gN.clearAccessToken(),!0;try{let{exp:e}=(0,l.o)(t);return(0,f.pw)(e)}catch(e){return!0}},refreshAuth:async()=>f.gN.refreshToken(async()=>{var n;let t=null===(n=(0,f.bW)())||void 0===n?void 0:n.refreshToken;if(t)return e.mutate(d.Dp,{refreshToken:t}).then(e=>{var n;return null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.refreshToken})})}}),(0,c.Dk)({onError(e){e.message.startsWith("[GraphQL]")&&(e.message=e.message.replace("[GraphQL]","").trim())}}),c.Ek]})},70410:function(e,n,t){"use strict";t.d(n,{Cl:function(){return u},D7:function(){return v},DQ:function(){return o},GG:function(){return l},S1:function(){return a},XP:function(){return h},Y6:function(){return d},kb:function(){return f},lE:function(){return s},ts:function(){return m},yB:function(){return i},yw:function(){return c},zz:function(){return p}});var r=t(43240);let s=(0,r.BX)("\n  query ListInvitations(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    invitations(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          id\n          email\n          code\n          createdAt\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),a=(0,r.BX)("\n  query gitRepositories(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    gitRepositories(\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          name\n          gitUrl\n          jobInfo {\n            lastJobRun {\n              id\n              job\n              createdAt\n              finishedAt\n              exitCode\n            }\n            command\n          }\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),l=(0,r.BX)("\n  query ListJobRuns(\n    $ids: [ID!]\n    $jobs: [String!]\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    jobRuns(\n      ids: $ids\n      jobs: $jobs\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          job\n          createdAt\n          startedAt\n          finishedAt\n          exitCode\n          stdout\n          stderr\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),i=(0,r.BX)("\n  query GetJobRunStats($jobs: [String!]) {\n    jobRunStats(jobs: $jobs) {\n      success\n      failed\n      pending\n    }\n  }\n"),o=(0,r.BX)("\n  query ListJobs {\n    jobs\n  }\n"),c=(0,r.BX)("\n  query ListUsers($after: String, $before: String, $first: Int, $last: Int) {\n    users(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          id\n          email\n          isAdmin\n          isOwner\n          createdAt\n          active\n          name\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),d=(0,r.BX)("\n  query DailyStatsInPastYear($users: [ID!]) {\n    dailyStatsInPastYear(users: $users) {\n      start\n      end\n      completions\n      selects\n      views\n    }\n  }\n"),u=(0,r.BX)("\n  query DailyStats(\n    $start: DateTime!\n    $end: DateTime!\n    $users: [ID!]\n    $languages: [Language!]\n  ) {\n    dailyStats(start: $start, end: $end, users: $users, languages: $languages) {\n      start\n      end\n      completions\n      selects\n      views\n      language\n    }\n  }\n"),f=(0,r.BX)("\n  query ListIntegrations(\n    $ids: [ID!]\n    $kind: IntegrationKind\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    integrations(\n      ids: $ids\n      kind: $kind\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          displayName\n          status\n          apiBase\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),m=(0,r.BX)("\n  query ListIntegratedRepositories(\n    $ids: [ID!]\n    $kind: IntegrationKind\n    $active: Boolean\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    integratedRepositories(\n      ids: $ids\n      kind: $kind\n      active: $active\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          displayName\n          gitUrl\n          active\n          jobInfo {\n            lastJobRun {\n              id\n              job\n              createdAt\n              finishedAt\n              startedAt\n              exitCode\n            }\n            command\n          }\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),h=(0,r.BX)("\n  query WebCrawlerUrls(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    webCrawlerUrls(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          url\n          id\n          createdAt\n          jobInfo {\n            lastJobRun {\n              id\n              job\n              createdAt\n              finishedAt\n              exitCode\n            }\n            command\n          }\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),p=(0,r.BX)("\n  query RepositoryList {\n    repositoryList {\n      id\n      name\n      kind\n      gitUrl\n      refs {\n        name\n        commit\n      }\n    }\n  }\n"),v=(0,r.BX)("\n  query RepositorySearch(\n    $kind: RepositoryKind!\n    $id: ID!\n    $rev: String\n    $pattern: String!\n  ) {\n    repositorySearch(kind: $kind, id: $id, rev: $rev, pattern: $pattern) {\n      type\n      path\n      indices\n    }\n  }\n")},66794:function(e,n,t){"use strict";t.d(n,{bW:function(){return i},gN:function(){return f},nd:function(){return l},pw:function(){return d}});var r=t(79716),s=t(74630),a=t(74248);let l="_tabby_auth",i=()=>{if((0,a.S_)()){let e=localStorage.getItem(l);if(e)try{return JSON.parse(e)}catch(e){}}},o=e=>{localStorage.setItem(l,JSON.stringify(e))},c=()=>{localStorage.removeItem(l),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:l}))},d=e=>!!(0,s.Z)(e)||Date.now()>1e3*e,u=e=>!(0,s.Z)(e)&&Date.now()-1e3*e<6e4,f=new class{clearAccessToken(){let e=i();e&&o({...e,accessToken:""})}async refreshToken(e){try{var n;if(void 0===(null===(n=navigator)||void 0===n?void 0:n.locks))throw console.error("The Web Locks API is not supported in your browser. Please upgrade to a newer browser version."),Error();await navigator.locks.request("_tabby_auth_lock",async()=>{let n;let t=i(),s=null==t?void 0:t.accessToken,a=null==t?void 0:t.refreshToken;if(s){let{iat:a}=(0,r.o)(s);n=u(a)?t:await e()}else a&&(n=await e());n?o(n):c()})}catch(e){c()}}}},55823:function(){},65001:function(){},23342:function(e,n){"use strict";n.Z={src:"/_next/static/media/tabby.16ac81a9.png",height:175,width:175,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA50lEQVR42mMAgUWTGw3KsqO9QOypZeG6NekBuQzI4NCmmaZtFam/K6PtHzYlOH5ysDX7n5QYboJQsKrfd1JN6v+ldXH/F+fa/fWyNf4fEebXBlcwsSbNeWV/+f9FE+t+za2K+xNjLfPf293u6v///xkZQGDDwr7gfetm/d8xr+VPkpXgnzR3nf/xAY6vt6yfK84AUrV5+US9HWtnnVgyrfm/tiTD/9JAo//5Ea5nGUDAkoGBCUQHWEiZysuI7LcwN7wb6WV1IT7YzR7uhh3Lepg+AU2av2AiT0pCuDKDayAvSLwsM4oJAH4LXl0Gpb0HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},18452:function(e,n,t){"use strict";t.d(n,{m:function(){return l},H:function(){return i}});var r=t(3546),s=t(89704),a=t(95686);function l(e,n){let[t,a]=(0,r.useState)(null),l=!1;return(0,r.useEffect)(()=>{if(e.current&&!l){var t;l=!0,a((t=e.current,(0,s.K)(t,{expose:{navigate:n.navigate,refresh:n.refresh,onSubmitMessage:n.onSubmitMessage,onApplyInEditor:n.onApplyInEditor}})))}},[e.current]),t}function i(e){let[n,t]=(0,r.useState)(null),s=!1;return(0,r.useEffect)(()=>{let n=window.self!==window.top;n&&!s&&(s=!0,t((0,a.c)({expose:{init:e.init,sendMessage:e.sendMessage,showError:e.showError,cleanError:e.cleanError}})))},[]),n}}},function(e){e.O(0,[5870,6056,7998,5498,6312,4007,7950,7980,259,2578,816,1492,4421,7590,1454,5621,3882,8746,4373,739,6193,1889,7982,7651,6618,1566,9736,1565,3375,5289,1744],function(){return e(e.s=4755)}),_N_E=e.O()}]);