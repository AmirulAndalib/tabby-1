(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8098],{25125:function(e,t,n){Promise.resolve().then(n.bind(n,95463))},95463:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var s=n(36164),r=n(3546),a=n(11978),i=n(80605),l=n(70652),o=n.n(l),c=n(31458),u=n(81565),d=n(84381),m=n(5493),x=n(23782),h=n(21808),f=n(75561),p=n(11634),v=n(98150),j=n(82394);let g=(0,f.B)("\n  mutation requestPasswordResetEmail($input: RequestPasswordResetEmailInput!) {\n    requestPasswordResetEmail(input: $input)\n  }\n"),N=x.Ry({email:x.Z_().email("Invalid email address")}),b=e=>{let{onSuccess:t}=e,n=(0,m.cI)({resolver:(0,d.F)(N)}),{isSubmitting:r}=n.formState,a=(0,p.Db)(g,{form:n});return(0,s.jsx)(v.l0,{...n,children:(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("form",{className:"grid gap-4",onSubmit:n.handleSubmit(e=>a({input:e}).then(n=>{var s;(null==n?void 0:null===(s=n.data)||void 0===s?void 0:s.requestPasswordResetEmail)&&(null==t||t(e.email))})),children:[(0,s.jsx)(v.Wi,{control:n.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"Email"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(j.I,{placeholder:h.o0,type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",...t})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsxs)(c.z,{type:"submit",className:"mt-2",children:[r&&(0,s.jsx)(u.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Email"]})]}),(0,s.jsx)(v.zG,{className:"text-center"})]})})};function y(){let[e,t]=r.useState(),[n,a]=r.useState(!1);return n?(0,s.jsx)("div",{className:"w-[350px] space-y-6",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(u.IconCheckCircled,{className:"h-12 w-12 text-successful-foreground"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Reset Password"}),(0,s.jsxs)("p",{className:"pb-4 text-sm text-muted-foreground",children:["Request received successfully! If the email"," ",(0,s.jsx)("span",{className:"font-bold",children:null!=e?e:""})," exists, you’ll receive an email with a reset link soon."]}),(0,s.jsx)(o(),{href:"/auth/signin",className:(0,c.d)(),children:"Back to Sign In"})]})}):(0,s.jsxs)("div",{className:"w-[350px] space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Reset Password"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter your email address. If an account exists, you’ll receive an email with a password reset link soon."})]}),(0,s.jsx)(b,{onSuccess:e=>{t(e),a(!0)}}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(o(),{href:"/auth/signin",replace:!0,className:"text-primary hover:underline",children:"Cancel"})})]})}let w=(0,f.B)("\n  mutation requestInvitationEmail($input: RequestInvitationInput!) {\n    requestInvitationEmail(input: $input) {\n      email\n      code\n    }\n  }\n"),I=x.Ry({email:x.Z_().email("Invalid email address")}),S=e=>{let{onSuccess:t}=e,n=(0,m.cI)({resolver:(0,d.F)(I)}),{isSubmitting:r}=n.formState,a=(0,p.Db)(w,{form:n});return(0,s.jsx)(v.l0,{...n,children:(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsxs)("form",{className:"grid gap-4",onSubmit:n.handleSubmit(e=>a({input:e}).then(e=>{var n,s;(null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(n=s.requestInvitationEmail)||void 0===n?void 0:n.code)&&(null==t||t(e.data.requestInvitationEmail))})),children:[(0,s.jsx)(v.Wi,{control:n.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"Email"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(j.I,{placeholder:h.o0,type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",...t})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsxs)(c.z,{type:"submit",className:"mt-2",children:[r&&(0,s.jsx)(u.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Email"]})]}),(0,s.jsx)(v.zG,{className:"text-center"})]})})};function k(){let[e,t]=r.useState(),[n,a]=r.useState(!1);return n?(0,s.jsx)("div",{className:"w-[350px] space-y-6",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(u.IconCheckCircled,{className:"h-12 w-12 text-successful-foreground"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create your Tabby account"}),(0,s.jsx)("p",{className:"pb-4 text-sm text-muted-foreground",children:"Request received successfully! You’ll receive an email with a signup link soon."}),(0,s.jsx)(o(),{href:"/auth/signin",className:(0,c.d)(),children:"Back to Sign In"})]})}):(0,s.jsxs)("div",{className:"w-[350px] space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Create your Tabby account"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"To register your account, please enter your email address."})]}),(0,s.jsx)(S,{onSuccess:e=>{t(e.email),a(!0)}}),(0,s.jsxs)("div",{className:"text-center text-sm",children:["Already have an accout?",(0,s.jsx)(o(),{href:"/auth/signin",className:"ml-1 font-semibold text-primary hover:underline",children:"Sign In"})]})]})}var E=n(36327),_=n(44645),R=n(91302),C=n(3765),P=n(43240),F=n(1544);let T=(0,P.BX)("\n  mutation tokenAuth($email: String!, $password: String!) {\n    tokenAuth(email: $email, password: $password) {\n      accessToken\n      refreshToken\n    }\n  }\n"),A=x.Ry({email:x.Z_().email("Invalid email address"),password:x.Z_()}),z={EMAIL:"demo@tabbyml.com",PASSWORD:"0$TabbyDemo"};function O(e){let{className:t,invitationCode:n,...a}=e,l=(0,i.Uw)(),x=(0,i.UA)(),f=(0,m.cI)({resolver:(0,d.F)(A)}),g=r.useRef(null);r.useEffect(()=>{let e=h.$6.DEMO_AUTO_LOGIN;if(x){if(f.setValue("email",z.EMAIL),f.setValue("password",z.PASSWORD),"true"===sessionStorage.getItem(e))return;if(g.current){let t=new Event("submit",{bubbles:!0,cancelable:!0});g.current.dispatchEvent(t),sessionStorage.setItem(e,"true")}}},[x]);let N=(0,R.zq)(),{isSubmitting:b}=f.formState,y=(0,p.Db)(T,{onCompleted(e){N(e.tokenAuth)},form:f});return(0,s.jsx)(v.l0,{...f,children:(0,s.jsxs)("div",{className:(0,F.cn)("grid gap-2",t),...a,children:[(0,s.jsxs)("form",{ref:g,className:"grid gap-4",onSubmit:f.handleSubmit(y),children:[(0,s.jsx)(v.Wi,{control:f.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsx)(v.lX,{children:"Email"}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(j.I,{placeholder:h.o0,type:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",...t})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsx)(v.Wi,{control:f.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(v.xJ,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(v.lX,{children:"Password"}),!!l&&(0,s.jsx)("div",{className:"cursor-pointer text-right text-sm text-primary hover:underline",children:(0,s.jsx)(o(),{href:"/auth/signin?mode=reset",children:"Forgot password?"})})]}),(0,s.jsx)(v.NI,{children:(0,s.jsx)(j.I,{type:"password",...t})}),(0,s.jsx)(v.zG,{})]})}}),(0,s.jsxs)(c.z,{type:"submit",className:"mt-2",disabled:b,children:[b&&(0,s.jsx)(u.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Sign In"]})]}),(0,s.jsx)(v.zG,{className:"text-center"})]})})}function q(){let{router:e,searchParams:t}=(0,_.Z)(),n=(0,i.jJ)(),a=t.get("error_message"),l=t.get("access_token"),c=t.get("refresh_token"),d=!!l&&!!c,m=d&&!a,x=(0,R.zq)(),{data:h}=(0,E.Z)(d?null:"/oauth/providers",C.Z);(0,r.useEffect)(()=>{!a&&l&&c&&x({accessToken:l,refreshToken:c})},[t]);let{status:f}=(0,R.kP)();return((0,r.useEffect)(()=>{"authenticated"===f&&e.replace("/")},[f]),m)?(0,s.jsx)(u.IconSpinner,{className:"h-8 w-8 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"w-[350px] space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-2 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Sign In"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter credentials to login to your account"})]}),(0,s.jsx)(O,{}),n&&(0,s.jsxs)("div",{className:"text-center text-sm",children:["Don’t have an accout?",(0,s.jsx)(o(),{href:"/auth/signin?mode=signup",className:"ml-1 font-semibold text-primary hover:underline",children:"Create an account"})]})]}),!!(null==h?void 0:h.length)&&(0,s.jsxs)("div",{className:"relative mt-4 flex w-[350px] items-center py-5",children:[(0,s.jsx)("div",{className:"grow border-t "}),(0,s.jsx)("span",{className:"mx-4 shrink text-sm text-muted-foreground",children:"Or Sign In with"}),(0,s.jsx)("div",{className:"grow border-t "})]}),(0,s.jsxs)("div",{className:"mx-auto flex items-center gap-8",children:[(null==h?void 0:h.includes("github"))&&(0,s.jsx)("a",{href:"/oauth/signin?provider=github",children:(0,s.jsx)(u.IconGithub,{className:"h-8 w-8"})}),(null==h?void 0:h.includes("google"))&&(0,s.jsx)("a",{href:"/oauth/signin?provider=google",children:(0,s.jsx)(u.IconGoogle,{className:"h-8 w-8"})}),(null==h?void 0:h.includes("gitlab"))&&(0,s.jsx)("a",{href:"/oauth/signin?provider=gitlab",children:(0,s.jsx)(u.IconGitLab,{className:"h-8 w-8"})})]}),!!a&&(0,s.jsx)("div",{className:"mt-4 text-destructive",children:a})]})}function G(){var e;let t=(0,a.useRouter)(),n=(0,a.useSearchParams)(),l=null===(e=n.get("mode"))||void 0===e?void 0:e.toString(),o=(0,i.Uw)(),c=(0,i.jJ)();return(r.useEffect(()=>{let e=!1===o&&"reset"===l||!1===c&&"signup"===l;e&&t.replace("/auth/signin")},[l,o,c]),"reset"===l)?(0,s.jsx)(y,{}):"signup"===l?(0,s.jsx)(k,{}):(0,s.jsx)(q,{})}},98150:function(e,t,n){"use strict";n.d(t,{NI:function(){return p},Wi:function(){return d},l0:function(){return c},lX:function(){return f},pf:function(){return v},xJ:function(){return h},zG:function(){return j}});var s=n(36164),r=n(3546),a=n(74047),i=n(5493),l=n(1544),o=n(5266);let c=i.RV,u=r.createContext({}),d=e=>{let{...t}=e;return(0,s.jsx)(u.Provider,{value:{name:t.name},children:(0,s.jsx)(i.Qr,{...t})})},m=()=>{let e=r.useContext(u),t=r.useContext(x),{getFieldState:n,formState:s}=(0,i.Gc)(),a=e.name||"root",l=n(a,s);if(!s)throw Error("useFormField should be used within <Form>");let{id:o}=t;return{id:o,name:a,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},x=r.createContext({}),h=r.forwardRef((e,t)=>{let{className:n,...a}=e,i=r.useId();return(0,s.jsx)(x.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",n),...a})})});h.displayName="FormItem";let f=r.forwardRef((e,t)=>{let{className:n,required:r,...a}=e,{error:i,formItemId:c}=m();return(0,s.jsx)(o._,{ref:t,className:(0,l.cn)(i&&"text-destructive",r&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:c,...a})});f.displayName="FormLabel";let p=r.forwardRef((e,t)=>{let{...n}=e,{error:r,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,s.jsx)(a.g7,{ref:t,id:i,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...n})});p.displayName="FormControl";let v=r.forwardRef((e,t)=>{let{className:n,...r}=e,{formDescriptionId:a}=m();return(0,s.jsx)("div",{ref:t,id:a,className:(0,l.cn)("text-sm text-muted-foreground",n),...r})});v.displayName="FormDescription";let j=r.forwardRef((e,t)=>{let{className:n,children:r,...a}=e,{error:i,formMessageId:o}=m(),c=i?String(null==i?void 0:i.message):r;return c?(0,s.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",n),...a,children:c}):null});j.displayName="FormMessage"},82394:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var s=n(36164),r=n(3546),a=n(1544);let i=r.forwardRef((e,t)=>{let{className:n,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});i.displayName="Input"},5266:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var s=n(36164),r=n(3546),a=n(90893),i=n(14375),l=n(1544);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(a.f,{ref:t,className:(0,l.cn)(o(),n),...r})});c.displayName=a.f.displayName},21808:function(e,t,n){"use strict";n.d(t,{$6:function(){return a},$I:function(){return i},L8:function(){return r},ir:function(){return l},o0:function(){return s}});let s="name@yourcompany.com",r=20,a={DEMO_AUTO_LOGIN:"_tabby_demo_autologin",SEARCH_INITIAL_MSG:"_tabby_search_initial_msg",SEARCH_INITIAL_CONTEXTS:"_tabby_search_initial_contexts"},i=48,l="NOT_FOUND"},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(3546),r=n(11978);function a(){let e=(0,r.usePathname)(),t=(0,r.useRouter)(),n=(0,r.useSearchParams)(),a=(0,s.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,s]=e;return t.set(n,s)});let s=t.toString();return s.length>0?"?".concat(s):""},[n]),i=(0,s.useCallback)(s=>{let r=function(e,t,n){var s,r;let a=null===(s=n.searchParams)||void 0===s?void 0:s.set,i=null===(r=n.searchParams)||void 0===r?void 0:r.del,l=new URLSearchParams(t);a&&Object.entries(a).forEach(e=>{let[t,n]=e;return l.set(t,n)}),i&&(Array.isArray(i)?i.forEach(e=>l.delete(e)):l.delete(i));let o=l.toString(),c=e;return o.length>0&&(c+="?".concat(o)),n.hash&&(c+="#".concat(n.hash.replace(/^#/,""))),c}((null==s?void 0:s.pathname)||e,n,s);return s.replace?t.replace(r):t.push(r),r},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:a,updateUrlComponents:i}}},3765:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(44745),r=n(57778),a=n(79716),i=n(91302),l=n(66794);async function o(e,t){var n;let s=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch;if(function(e){var t;if(e.startsWith("/oauth/providers"))return!1;let n=null===(t=(0,l.bW)())||void 0===t?void 0:t.accessToken;if(!n)return!0;try{let{exp:e}=(0,a.o)(n);return(0,l.pw)(e)}catch(e){return!0}}(e))return l.gN.refreshToken(c).then(n=>m(e,t));let r=await s(e,u(t));return 401===r.status?(l.gN.clearAccessToken(),l.gN.refreshToken(c).then(n=>m(e,t))):x(r,t)}async function c(){var e,t;let n=null===(e=(0,l.bW)())||void 0===e?void 0:e.refreshToken;if(!n)return;let s=await d(n);return null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.refreshToken}function u(e){var t;let n=new Headers(null==e?void 0:e.headers);return n.append("authorization","Bearer ".concat(null===(t=(0,l.bW)())||void 0===t?void 0:t.accessToken)),{...e||{},headers:n}}async function d(e){let t=new s.KU({url:"/graphql",requestPolicy:"network-only",exchanges:[s.Ek]}),n=t.createRequestOperation("mutation",(0,r.h)(i.Dp,{refreshToken:e}));return t.executeMutation(n)}function m(e,t){var n;let s=null!==(n=null==t?void 0:t.customFetch)&&void 0!==n?n:window.fetch;return s(e,u(t)).then(e=>x(e,t))}function x(e,t){return(null==e?void 0:e.ok)?(null==t?void 0:t.responseFormatter)?t.responseFormatter(e):(null==t?void 0:t.responseFormat)==="blob"?e.blob():e.json():(null==t?void 0:t.errorHandler)?t.errorHandler(e):void 0}}},function(e){e.O(0,[8415,1386,55,4007,9643,240,1454,9732,1544,1565,3240,4656,3375,5289,1744],function(){return e(e.s=25125)}),_N_E=e.O()}]);