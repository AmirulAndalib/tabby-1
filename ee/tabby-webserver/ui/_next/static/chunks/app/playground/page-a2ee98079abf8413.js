(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2383,3396],{11293:function(e,n,t){Promise.resolve().then(t.bind(t,96928))},96928:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return A}});var r=t(36164),s=t(3546),a=t(24449),i=t(44645),o=t(25647),l=t(74248),u=t(17451);u.a.getState;let d=u.a.setState,c=e=>{d(()=>({activeChatId:e}))},f=(e,n)=>{let t=null!=e?e:(0,l.x0)();d(e=>({activeChatId:t,chats:[{id:t,title:null!=n?n:"",messages:[],createdAt:new Date,userId:"",path:""},...e.chats||[]]}))},h=e=>{d(n=>{var t;return{activeChatId:(0,l.x0)(),chats:null===(t=n.chats)||void 0===t?void 0:t.filter(n=>n.id!==e)}})},v=()=>{d(()=>({activeChatId:(0,l.x0)(),chats:[]}))},g=(e,n)=>{d(t=>{var r;return{chats:null===(r=t.chats)||void 0===r?void 0:r.map(t=>t.id===e?{...t,messages:n}:t)}})},m=(e,n)=>{d(t=>{var r;return{chats:null===(r=t.chats)||void 0===r?void 0:r.map(t=>t.id===e?{...t,...n}:t)}})},p=(e,n)=>{if(Array.isArray(e)&&n)return e.find(e=>e.id===n)};var x=t(3765),y=t(57830),b=t(98428),j=t(30601),$=t(6230),N=t(90379),I=t(31458),w=t(81565),S=t(11208),k=t(29);let C=e=>{let{onClear:n,onClick:t,onBlur:a,...i}=e,[o,l]=s.useState(!1),u=()=>{l(!1)};return(0,r.jsx)(I.z,{className:"h-12 w-full justify-start",variant:"ghost",...i,onClick:e=>{o?(n(),l(!1)):l(!0),null==t||t(e)},onBlur:e=>{o&&u(),null==a||a(e)},children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.IconCheck,{}),(0,r.jsx)("span",{className:"ml-2",children:"Confirm Clear Chats"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.IconTrash,{}),(0,r.jsx)("span",{className:"ml-2",children:"Clear Chats"})]})})};var E=t(30220),P=t(82394);let R=e=>{let{children:n,initialValue:t,chatId:a}=e,[i,o]=s.useState(!1),l=s.useRef(null),[u,d]=s.useState(t),c=async e=>{e.preventDefault(),(null==u?void 0:u.trim())&&(m(a,{title:u}),o(!1))};return(0,r.jsxs)(E.Vq,{open:i,onOpenChange:o,children:[(0,r.jsxs)(k.u,{children:[(0,r.jsx)(k.aJ,{asChild:!0,children:(0,r.jsxs)(I.z,{variant:"ghost",size:"icon",onClick:()=>o(!0),children:[(0,r.jsx)(w.IconEdit,{}),(0,r.jsx)("span",{className:"sr-only",children:"Edit"})]})}),(0,r.jsx)(k._v,{side:"bottom",children:"Edit"})]}),(0,r.jsx)(E.cZ,{className:"bg-background",children:(0,r.jsxs)(E.fK,{className:"gap-3",children:[(0,r.jsx)(E.$N,{children:"Set Chat Title"}),(0,r.jsx)(E.Be,{asChild:!0,children:(0,r.jsxs)("form",{className:"relative",onSubmit:c,ref:l,children:[(0,r.jsx)(P.I,{className:"h-10 pr-12",value:u,onChange:e=>d(e.target.value),onKeyDown:e=>{if("Enter"===e.key){var n;null===(n=l.current)||void 0===n||n.requestSubmit(),e.preventDefault()}}}),(0,r.jsx)("div",{className:"absolute right-2 top-1",children:(0,r.jsxs)(k.u,{children:[(0,r.jsx)(k.aJ,{asChild:!0,children:(0,r.jsxs)(I.z,{type:"submit",size:"icon",disabled:""===u,children:[(0,r.jsx)(w.IconArrowElbow,{}),(0,r.jsx)("span",{className:"sr-only",children:"Send message"})]})}),(0,r.jsx)(k._v,{children:"Edit Title"})]})})]})})]})})]})},T=e=>{let{className:n,style:t}=e,s=(0,o.o)(u.a,e=>e._hasHydrated),a=(0,o.o)(u.a,e=>e.chats),i=(0,o.o)(u.a,e=>e.activeChatId),d=(e,n)=>{h(n)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:n,children:(0,r.jsxs)("div",{className:"flex w-[279px] flex-col gap-2 transition-all",style:t,children:[(0,r.jsx)("div",{className:"shrink-0 pb-0 pl-3 pt-2",children:(0,r.jsxs)(I.z,{className:"h-12 w-full justify-start",variant:"ghost",onClick:e=>{c((0,l.x0)())},children:[(0,r.jsx)(w.IconPlus,{}),(0,r.jsx)("span",{className:"ml-2",children:"New Chat"})]})}),(0,r.jsx)(S.Z,{}),(0,r.jsx)(y.x,{className:"flex flex-col gap-2 px-3",children:s?(0,r.jsx)(r.Fragment,{children:null==a?void 0:a.map(e=>{let n=i===e.id;return(0,r.jsxs)("div",{onClick:n=>c(e.id),className:(0,l.cn)("my-2 flex w-[254px] cursor-pointer items-center justify-between gap-3 rounded-lg px-3 py-1 text-sm transition-all hover:bg-primary/10",n&&"bg-primary/10"),children:[(0,r.jsx)("span",{className:"truncate leading-8",children:e.title||"(Untitled)"}),n&&(0,r.jsxs)("div",{className:"flex items-center",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(R,{initialValue:e.title,chatId:e.id}),(0,r.jsxs)(k.u,{children:[(0,r.jsx)(k.aJ,{asChild:!0,children:(0,r.jsxs)(I.z,{variant:"ghost",size:"icon",onClick:n=>d(n,e.id),children:[(0,r.jsx)(w.IconTrash,{}),(0,r.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,r.jsx)(k._v,{side:"bottom",children:"Delete"})]})]})]},e.id)})}):(0,r.jsx)(N.cg,{})}),(0,r.jsx)(S.Z,{}),(0,r.jsx)("div",{className:"shrink-0 pb-2",children:(0,r.jsx)(C,{disabled:(null==a?void 0:a.length)===0,onClear:()=>{v()}})})]})})})},D=[];function A(){var e,n;let{searchParams:t,updateSearchParams:d}=(0,i.Z)(),c=null===(e=t.get("initialMessage"))||void 0===e?void 0:e.toString(),h=s.useRef(!!c),v=s.useRef(null),m=s.useRef(null),[I]=(0,j.Hb)(),w=(0,o.o)(u.a,e=>e._hasHydrated),S=(0,o.o)(u.a,e=>e.activeChatId),k=(0,o.o)(u.a,e=>e.chats),C=p(k,S),E=s.useMemo(()=>{var e;return null==C?void 0:null===(e=C.messages)||void 0===e?void 0:e.filter(e=>!!e.user)},[S]);s.useEffect(()=>{let e=async e=>{if(e.origin!==window.origin||!e.data||!v.current||v.current.isLoading)return;let{data:n}=e;if("sendUserChat"===n.action){v.current.sendUserChat({...n.payload});return}"stop"===n.action&&v.current.stop()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]);let P=(0,a.S)((e,n)=>{if(!C&&(null==n?void 0:n.length)){var t,r;f(S,(0,l.aF)(null==n?void 0:null===(r=n[0])||void 0===r?void 0:null===(t=r.user)||void 0===t?void 0:t.message))}else C&&g(e,n)},1e3);s.useEffect(()=>()=>P.flush(),[]);let R=I?{height:"calc(100vh - ".concat(j.wt,")")}:{height:"100vh"};return(0,r.jsxs)("div",{className:"grid flex-1 overflow-hidden lg:grid-cols-[280px_1fr]",children:[(0,r.jsx)(T,{className:"hidden w-[280px] border-r lg:block",style:R}),(0,r.jsx)($.Z,{delay:0,loading:!w||!S,fallback:(0,r.jsx)("div",{className:"mx-auto w-full max-w-2xl pt-4 md:pt-10",children:(0,r.jsx)(N.cg,{})}),children:(0,r.jsx)(y.x,{className:"transition-all",style:R,ref:m,children:(0,r.jsx)("div",{children:(0,r.jsx)(b.e,{chatId:S,initialMessages:null!=E?E:D,ref:v,container:(null==m?void 0:null===(n=m.current)||void 0===n?void 0:n.children[1])||void 0,onThreadUpdates:e=>{S&&P.run(S,e)},onNavigateToContext:e=>{var n;if(!e.filepath)return;let t="/files?path=".concat(encodeURIComponent(e.filepath),"&line=").concat(null!==(n=e.range.start)&&void 0!==n?n:"");window.open(t)},onLoaded:()=>{var e;h.current&&(null===(e=v.current)||void 0===e?void 0:e.sendUserChat)&&S&&c&&(v.current.sendUserChat({message:c}).then(()=>{d({del:"initialMessage"})}),h.current=!1)},fetcher:(e,n)=>(0,x.Z)(e,{...n,responseFormatter:e=>e,errorHandler(e){throw Error(e?String(e.status):"Fail to fetch")}})},S)})})})]})}},30601:function(e,n,t){"use strict";t.d(n,{Hb:function(){return h},wt:function(){return d},xc:function(){return v},yo:function(){return f}});var r=t(36164),s=t(3546),a=t(74630),i=t(36327),o=t(80605),l=t(74248),u=t(81565);let d="3.5rem",c=s.createContext({}),f=e=>{let{children:n}=e,t=(0,o.UA)(),[i,l]=s.useState(!1);return s.useEffect(()=>{let e=window.self!==window.top;e||(0,a.Z)(t)||l(t)},[t]),(0,r.jsx)(c.Provider,{value:{isShowDemoBanner:i,setIsShowDemoBanner:l},children:n})};function h(){let{isShowDemoBanner:e,setIsShowDemoBanner:n}=s.useContext(c);return[e,n]}function v(){let[e,n]=h(),{data:t}=(0,i.Z)("https://api.github.com/repos/TabbyML/tabby",e=>fetch(e).then(e=>e.json()));return(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center justify-between bg-primary px-4 text-primary-foreground transition-all md:px-5",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),style:e?{height:d}:{height:0},children:[(0,r.jsxs)("a",{href:"https://links.tabbyml.com/schedule-a-demo",target:"_blank",className:"flex items-center gap-x-2 text-xs font-semibold underline md:text-sm",children:[(0,r.jsx)("span",{children:"\uD83D\uDCC6"}),(0,r.jsx)("span",{children:"Book a 30-minute product demo."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-x-4 md:gap-x-8",children:[(0,r.jsxs)("a",{href:"https://github.com/TabbyML/tabby",target:"_blank",className:"flex items-center transition-all hover:opacity-70",children:[(0,r.jsx)(u.IconGithub,{}),(0,r.jsxs)("div",{className:"ml-2 hidden md:block",children:[(0,r.jsx)("p",{className:"text-xs font-semibold",children:"TabbyML/tabby"}),(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center text-xs transition-all",{"h-4 opacity-70":t,"h-0 opacity-0":!t}),children:[(0,r.jsx)(u.IconStar,{className:"mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==t?void 0:t.stargazers_count}),(0,r.jsx)(u.IconGitFork,{className:"ml-2 mr-1 h-2.5 w-2.5"}),(0,r.jsx)("span",{children:null==t?void 0:t.forks_count})]})]})]}),(0,r.jsx)(u.IconClose,{className:"cursor-pointer transition-all hover:opacity-70",onClick:()=>n(!1)})]})]})}},6230:function(e,n,t){"use strict";var r=t(36164),s=t(3546),a=t(24449),i=t(90379);n.Z=e=>{let{loading:n,fallback:t,delay:o,children:l}=e,[u,d]=s.useState(!n),[c]=(0,a.n)(u,null!=o?o:200);return(s.useEffect(()=>{n||u||d(!0)},[n]),c)?l:t||(0,r.jsx)(i.cg,{})}},30220:function(e,n,t){"use strict";t.d(n,{$N:function(){return g},Be:function(){return m},Vq:function(){return l},cN:function(){return v},cZ:function(){return f},fK:function(){return h},hg:function(){return u}});var r=t(36164),s=t(3546),a=t(82570),i=t(74248),o=t(81565);let l=a.fC,u=a.xz,d=e=>{let{className:n,children:t,...s}=e;return(0,r.jsx)(a.h_,{className:(0,i.cn)(n),...s,children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center sm:items-center",children:t})})};d.displayName=a.h_.displayName;let c=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.aV,{ref:n,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-all duration-100 data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in",t),...s})});c.displayName=a.aV.displayName;let f=s.forwardRef((e,n)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(a.VY,{ref:n,className:(0,i.cn)("fixed z-50 grid w-full gap-4 rounded-b-lg border bg-background p-6 shadow-sm animate-in data-[state=open]:fade-in-90 data-[state=open]:slide-in-from-bottom-10 sm:max-w-lg sm:rounded-lg sm:zoom-in-90 data-[state=open]:sm:slide-in-from-bottom-0",t),...l,children:[s,(0,r.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.IconClose,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=a.VY.displayName;let h=e=>{let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...t})};h.displayName="DialogHeader";let v=e=>{let{className:n,...t}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...t})};v.displayName="DialogFooter";let g=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.Dx,{ref:n,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...s})});g.displayName=a.Dx.displayName;let m=s.forwardRef((e,n)=>{let{className:t,...s}=e;return(0,r.jsx)(a.dk,{ref:n,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})});m.displayName=a.dk.displayName},57830:function(e,n,t){"use strict";t.d(n,{x:function(){return o}});var r=t(36164),s=t(3546),a=t(50778),i=t(74248);let o=s.forwardRef((e,n)=>{let{className:t,children:s,...o}=e;return(0,r.jsxs)(a.fC,{ref:n,className:(0,i.cn)("relative overflow-hidden",t),...o,children:[(0,r.jsx)(a.l_,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(l,{}),(0,r.jsx)(a.Ns,{})]})});o.displayName=a.fC.displayName;let l=s.forwardRef((e,n)=>{let{className:t,orientation:s="vertical",...o}=e;return(0,r.jsx)(a.gb,{ref:n,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...o,children:(0,r.jsx)(a.q4,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=a.gb.displayName},38785:function(e,n,t){"use strict";t.d(n,{U:function(){return a}});var r=t(3546);let s=!0;function a(){let[e,n]=r.useState(()=>!s);return r.useEffect(function(){s=!1,n(!0)},[]),e}},44645:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(11978);function s(){let e=(0,r.usePathname)(),n=(0,r.useRouter)(),t=(0,r.useSearchParams)();return{pathname:e,router:n,searchParams:t,updateSearchParams:r=>{let{set:s,del:a,replace:i}=r,o=new URLSearchParams(t);s&&Object.entries(s).forEach(e=>{let[n,t]=e;return o.set(n,t)}),a&&(Array.isArray(a)?a.forEach(e=>o.delete(e)):o.delete(a));let l=o.toString(),u="".concat(e).concat(l.length>0?"?".concat(l):"");i?n.replace(u):n.push(u)},getQueryString:e=>{let n=new URLSearchParams(t);e&&Object.entries(e).forEach(e=>{let[t,r]=e;return n.set(t,r)});let r=n.toString();return r.length>0?"?".concat(r):""}}}},80605:function(e,n,t){"use strict";t.d(n,{UA:function(){return c},Uw:function(){return u},c7:function(){return l},jJ:function(){return d},xG:function(){return o}});var r=t(40055),s=t(43240);let a=(0,s.BX)("\n  query GetServerInfo {\n    serverInfo {\n      isAdminInitialized\n      isEmailConfigured\n      isChatEnabled\n      allowSelfSignup\n      isDemoMode\n    }\n  }\n"),i=()=>{let[{data:e}]=(0,r.aM)({query:a});return null==e?void 0:e.serverInfo},o=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isChatEnabled},l=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isAdminInitialized},u=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isEmailConfigured},d=()=>{var e;return null===(e=i())||void 0===e?void 0:e.allowSelfSignup},c=()=>{var e;return null===(e=i())||void 0===e?void 0:e.isDemoMode}},25647:function(e,n,t){"use strict";t.d(n,{o:function(){return a}});var r=t(3546),s=t(38785);let a=(e,n)=>{let t=(0,s.U)(),a=e(e=>null==e?void 0:e._hasHydrated),i=e(n),[o,l]=r.useState(t&&a?i:void 0);return r.useEffect(()=>{l(i)},[i]),o}},17451:function(e,n,t){"use strict";t.d(n,{a:function(){return l}});var r=t(27257),s=t(85654),a=t(74248);let i=["_hasHydrated","setHasHydrated","activeChatId"],o={_hasHydrated:!1,chats:void 0,activeChatId:(0,a.x0)()},l=(0,r.Ue)()((0,s.tJ)(e=>({...o,setHasHydrated:n=>{e({_hasHydrated:n})}}),{name:"tabby-chat-storage",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[n]=e;return!i.includes(n)})),onRehydrateStorage:()=>e=>{e&&e.setHasHydrated(!0)}}))},91302:function(e,n,t){"use strict";t.d(n,{Dp:function(){return m},Ho:function(){return x},QJ:function(){return $},av:function(){return w},kP:function(){return N},zq:function(){return j}});var r,s,a=t(36164),i=t(3546),o=t(11978),l=t(24426),u=t.n(l),d=t(43240),c=t(80605),f=t(11634),h=t(66794);function v(e,n){var t,r;let a=function(e,n){switch(n.type){case s.SignIn:case s.Refresh:return{status:"authenticated",data:n.data};case s.SignOut:return{status:"unauthenticated",data:void 0}}}(0,n);return e.status==a.status&&(t=e.data,r=a.data,(null==t?void 0:t.accessToken)===(null==r?void 0:r.accessToken)&&(null==t?void 0:t.refreshToken)===(null==r?void 0:r.refreshToken))?e:a}(r=s||(s={}))[r.SignIn=0]="SignIn",r[r.SignOut=1]="SignOut",r[r.Refresh=2]="Refresh";let g=i.createContext({}),m=(0,d.BX)("\n  mutation refreshToken($refreshToken: String!) {\n    refreshToken(refreshToken: $refreshToken) {\n      accessToken\n      refreshToken\n    }\n  }\n"),p=(0,d.BX)("\n  mutation LogoutAllSessions {\n    logoutAllSessions\n  }\n"),x=e=>{let{children:n}=e,t=i.useRef(!1),[r]=u()(h.nd,void 0),[o,l]=i.useReducer(v,{status:"loading",data:void 0});i.useEffect(()=>{t.current=!0,(null==r?void 0:r.accessToken)&&(null==r?void 0:r.refreshToken)?l({type:s.SignIn,data:r}):l({type:s.SignOut})},[]),i.useEffect(()=>{t.current&&((null==r?void 0:r.accessToken)&&(null==r?void 0:r.refreshToken)?l({type:s.Refresh,data:r}):l({type:s.SignOut}))},[r]);let d=i.useMemo(()=>{var e;return(null==o?void 0:o.status)=="authenticated"?{data:{accessToken:o.data.accessToken},status:o.status}:{status:null!==(e=null==o?void 0:o.status)&&void 0!==e?e:"loading",data:null}},[o]);return(0,a.jsx)(g.Provider,{value:{authState:o,dispatch:l,session:d},children:n})};class y extends Error{constructor(){super("AuthProvider is missing. Please add the AuthProvider at root level")}}function b(){let e=i.useContext(g);if(!e)throw new y;return e}function j(){let{dispatch:e}=b(),[n,t]=u()(h.nd,void 0);return async n=>(t({accessToken:n.accessToken,refreshToken:n.refreshToken}),e({type:s.SignIn,data:n}),!0)}function $(){let e=(0,f.D)(p),{dispatch:n}=b(),[t,r]=u()(h.nd,void 0);return async()=>{await e(),r(void 0),n({type:s.SignOut})}}function N(){let{session:e}=b();return e}let I=["/auth/signin","/auth/signup","/auth/reset-password"];function w(){let e=(0,c.c7)(),n=(0,o.useRouter)(),t=(0,o.usePathname)(),r=(0,o.useSearchParams)(),{data:s,status:a}=N();return i.useEffect(()=>{if("loading"===a||"authenticated"===a||void 0===e)return;let s="/auth/signup"===t&&"true"===r.get("isAdmin");if(!s&&!e)return n.replace("/auth/signup?isAdmin=true");I.includes(t)||n.replace("/auth/signin")},[e,a]),s}},11634:function(e,n,t){"use strict";t.d(n,{D:function(){return h},L:function(){return v}});var r=t(22365),s=t(28552),a=t(81013),i=t(79716),o=t(74630),l=t(40055),u=t(44745),d=t(91302),c=t(70410),f=t(66794);function h(e,n){var t;let[r,s]=(0,l.Db)(e),a=(null==n?void 0:n.form)?(t=n.form,e=>{let{graphQLErrors:n=[]}=e;for(let e of n)if(e.extensions&&e.extensions["validation-errors"]){let n=e.extensions["validation-errors"];for(let e of n.errors)t.setError(e.path,e)}else(null==e?void 0:e.originalError)&&t.setError("root",e.originalError)}):void 0,i=async e=>{let t;try{if(null==(t=await s(e))?void 0:t.error)a&&a(t.error),(null==n?void 0:n.onError)&&n.onError(t.error);else if(!(0,o.Z)(null==t?void 0:t.data)){var r;null==n||null===(r=n.onCompleted)||void 0===r||r.call(n,t.data)}}catch(e){(null==n?void 0:n.onError)&&n.onError(e);return}return t};return i}let v=new u.KU({url:"/graphql",requestPolicy:"cache-and-network",exchanges:[(0,s.HG)({keys:{CompletionStats:()=>null,ServerInfo:()=>null,RepositorySearch:()=>null,RepositoryList:()=>null},resolvers:{Query:{invitations:(0,a.N)(),repositories:(0,a.N)()}},updates:{Mutation:{deleteInvitation(e,n,t,r){e.deleteInvitation&&t.inspectFields("Query").filter(e=>"invitations"===e.fieldName).forEach(e=>{t.updateQuery({query:c.lE,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.invitations)||void 0===t?void 0:t.edges)&&(e.invitations.edges=e.invitations.edges.filter(e=>e.node.id!==n.id)),e})})},deleteGitRepository(e,n,t,r){e.deleteGitRepository&&t.inspectFields("Query").filter(e=>"gitRepositories"===e.fieldName).forEach(e=>{t.updateQuery({query:c.S1,variables:e.arguments},e=>{var t;return(null==e?void 0:null===(t=e.gitRepositories)||void 0===t?void 0:t.edges)&&(e.gitRepositories.edges=e.gitRepositories.edges.filter(e=>e.node.id!==n.id)),e})})}}}}),(0,r.M)(async e=>{let n=(0,f.bW)(),t=null==n?void 0:n.accessToken,r=null==n?void 0:n.refreshToken;return{addAuthToOperation(n){let s=(0,f.bW)();return(t=null==s?void 0:s.accessToken,r=null==s?void 0:s.refreshToken,t)?e.appendHeaders(n,{Authorization:"Bearer ".concat(t)}):n},didAuthError:(e,n)=>e.graphQLErrors.some(e=>{var n;return(null==e?void 0:null===(n=e.extensions)||void 0===n?void 0:n.code)==="UNAUTHORIZED"}),willAuthError(e){let n=(0,f.bW)();if(t=null==n?void 0:n.accessToken,r=null==n?void 0:n.refreshToken,"query"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null===(n=e.name)||void 0===n?void 0:n.value)&&["GetServerInfo"].includes(e.name.value)})||"mutation"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null===(n=e.name)||void 0===n?void 0:n.value)&&["tokenAuth","register"].includes(e.name.value)})||r&&"mutation"===e.kind&&e.query.definitions.some(e=>{var n;return"OperationDefinition"===e.kind&&(null==e?void 0:null===(n=e.name)||void 0===n?void 0:n.value)==="refreshToken"}))return!1;if(!t)return!0;try{let{exp:e}=(0,i.o)(t);return(0,f.pw)(e)}catch(e){return!0}},refreshAuth:async()=>f.gN.refreshToken(async()=>{var n;let t=null===(n=(0,f.bW)())||void 0===n?void 0:n.refreshToken;if(t)return e.mutate(d.Dp,{refreshToken:t}).then(e=>{var n;return null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.refreshToken})})}}),(0,u.Dk)({onError(e){e.message.startsWith("[GraphQL]")&&(e.message=e.message.replace("[GraphQL]","").trim())}}),u.Ek]})},70410:function(e,n,t){"use strict";t.d(n,{Cl:function(){return c},DQ:function(){return l},GG:function(){return i},S1:function(){return a},Vt:function(){return h},Y6:function(){return d},Zr:function(){return g},cO:function(){return v},hC:function(){return f},lE:function(){return s},yB:function(){return o},yw:function(){return u}});var r=t(43240);let s=(0,r.BX)("\n  query ListInvitations(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    invitations(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          id\n          email\n          code\n          createdAt\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),a=(0,r.BX)("\n  query gitRepositories(\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    gitRepositories(\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          name\n          gitUrl\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),i=(0,r.BX)("\n  query ListJobRuns(\n    $ids: [ID!]\n    $jobs: [String!]\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    jobRuns(\n      ids: $ids\n      jobs: $jobs\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          job\n          createdAt\n          finishedAt\n          exitCode\n          stdout\n          stderr\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),o=(0,r.BX)("\n  query GetJobRunStats($jobs: [String!]) {\n    jobRunStats(jobs: $jobs) {\n      success\n      failed\n      pending\n    }\n  }\n"),l=(0,r.BX)("\n  query ListJobs {\n    jobs\n  }\n"),u=(0,r.BX)("\n  query ListUsers($after: String, $before: String, $first: Int, $last: Int) {\n    users(after: $after, before: $before, first: $first, last: $last) {\n      edges {\n        node {\n          id\n          email\n          isAdmin\n          isOwner\n          createdAt\n          active\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),d=(0,r.BX)("\n  query DailyStatsInPastYear($users: [ID!]) {\n    dailyStatsInPastYear(users: $users) {\n      start\n      end\n      completions\n      selects\n      views\n    }\n  }\n"),c=(0,r.BX)("\n  query DailyStats(\n    $start: DateTime!\n    $end: DateTime!\n    $users: [ID!]\n    $languages: [Language!]\n  ) {\n    dailyStats(start: $start, end: $end, users: $users, languages: $languages) {\n      start\n      end\n      completions\n      selects\n      views\n      language\n    }\n  }\n"),f=(0,r.BX)("\n  query ListGithubRepositoryProviders(\n    $ids: [ID!]\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    githubRepositoryProviders(\n      ids: $ids\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          displayName\n          status\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),h=(0,r.BX)("\n  query ListGithubRepositories(\n    $providerIds: [ID!]!\n    $active: Boolean\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    githubRepositories(\n      providerIds: $providerIds\n      active: $active\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          vendorId\n          githubRepositoryProviderId\n          name\n          gitUrl\n          active\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),v=(0,r.BX)("\n  query ListGitlabRepositoryProviders(\n    $ids: [ID!]\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    gitlabRepositoryProviders(\n      ids: $ids\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          displayName\n          status\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n"),g=(0,r.BX)("\n  query ListGitlabRepositories(\n    $providerIds: [ID!]!\n    $active: Boolean\n    $after: String\n    $before: String\n    $first: Int\n    $last: Int\n  ) {\n    gitlabRepositories(\n      providerIds: $providerIds\n      active: $active\n      after: $after\n      before: $before\n      first: $first\n      last: $last\n    ) {\n      edges {\n        node {\n          id\n          vendorId\n          gitlabRepositoryProviderId\n          name\n          gitUrl\n          active\n        }\n        cursor\n      }\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n        startCursor\n        endCursor\n      }\n    }\n  }\n")},66794:function(e,n,t){"use strict";t.d(n,{bW:function(){return o},gN:function(){return f},nd:function(){return i},pw:function(){return d}});var r=t(79716),s=t(74630),a=t(74248);let i="_tabby_auth",o=()=>{if((0,a.S_)()){let e=localStorage.getItem(i);if(e)try{return JSON.parse(e)}catch(e){}}},l=e=>{localStorage.setItem(i,JSON.stringify(e))},u=()=>{localStorage.removeItem(i),window.dispatchEvent(new StorageEvent("storage",{storageArea:window.localStorage,url:window.location.href,key:i}))},d=e=>!!(0,s.Z)(e)||Date.now()>1e3*e,c=e=>!(0,s.Z)(e)&&Date.now()-1e3*e<6e4,f=new class{async refreshToken(e){try{var n;if(void 0===(null===(n=navigator)||void 0===n?void 0:n.locks))throw console.error("The Web Locks API is not supported in your browser. Please upgrade to a newer browser version."),Error();await navigator.locks.request("_tabby_auth_lock",async()=>{var n;let t;let s=o(),a=null===(n=o())||void 0===n?void 0:n.accessToken;if(a){let{iat:n}=(0,r.o)(a);t=c(n)?s:await e()}t?l(t):u()})}catch(e){u()}}}}},function(e){e.O(0,[872,55,3004,2178,6201,2578,3449,9421,4553,3882,830,2570,1454,2672,4546,9275,3299,2891,5606,5048,8002,778,4523,9736,1565,7417,8428,3375,5289,1744],function(){return e(e.s=11293)}),_N_E=e.O()}]);