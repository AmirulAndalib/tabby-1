(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{7922:function(e,n,s){Promise.resolve().then(s.bind(s,71901))},71901:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return w}});var r=s(36164),i=s(70652),l=s.n(i),t=s(31458),a=s(3546),o=s(2578),d=s(40055),c=s(21808),u=s(43240),x=s(11634),h=s(70410),m=s(81565),j=s(49506),v=s(99047),g=s(6230),f=s(40030),p=s(55137),N=s(14522);let b=(0,u.BX)("\n  mutation deleteGitRepository($id: ID!) {\n    deleteGitRepository(id: $id)\n  }\n"),y=c.L8;function _(){var e,n;let[s,i]=a.useState(),[{data:l,fetching:c},u]=(0,d.aM)({query:h.S1,variables:{last:y,before:s}}),[{data:_,fetching:w}]=(0,d.aM)({query:h.gI}),[I,k]=a.useState(1),C=a.useMemo(()=>{var e,n;return null==l?void 0:null===(n=l.gitRepositories)||void 0===n?void 0:null===(e=n.edges)||void 0===e?void 0:e.slice().reverse()},[null==l?void 0:null===(e=l.gitRepositories)||void 0===e?void 0:e.edges]),R=null==l?void 0:null===(n=l.gitRepositories)||void 0===n?void 0:n.pageInfo,P=Math.ceil(((null==C?void 0:C.length)||0)/y),G=e=>{var n,s;return null==C?void 0:null===(s=C.slice(0,(e-1)*y))||void 0===s?void 0:null===(n=s.pop())||void 0===n?void 0:n.cursor},S=e=>{i(G(e))},A=a.useMemo(()=>{var e;return null==C?void 0:null===(e=C.slice)||void 0===e?void 0:e.call(C,(I-1)*y,I*y)},[I,C]),M=(null==R?void 0:R.hasPreviousPage)||I<P,E=I>1,T=!!(null==A?void 0:A.length)&&(M||E),D=(0,x.Db)(b),L=(0,x.Db)(N.C),O=(e,n)=>{D({id:e}).then(e=>{var s,r;(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.deleteGitRepository)?S(n?I-1:I):o.A.error((null==e?void 0:null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to delete repository")})},F=e=>L({command:e}).then(e=>{var n,s;(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.triggerJobRun)?(o.A.success("The job has been triggered successfully, it may take a few minutes to process."),u()):o.A.error((null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to trigger job")});return a.useEffect(()=>{!c&&P<I&&I>1&&k(P)},[P,I]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(g.Z,{loading:c,children:[(0,r.jsxs)(v.iA,{className:"table-fixed border-t",children:[(0,r.jsx)(v.xD,{children:(0,r.jsxs)(v.SC,{children:[(0,r.jsx)(v.ss,{className:"w-[25%]",children:"Name"}),(0,r.jsx)(v.ss,{className:"w-[45%]",children:"Git URL"}),(0,r.jsx)(v.ss,{className:"w-[140px]",children:"Access"}),(0,r.jsx)(v.ss,{className:"w-[180px]",children:"Job"}),(0,r.jsx)(v.ss,{className:"w-[60px]"})]})}),(0,r.jsx)(v.RM,{children:(null==A?void 0:A.length)||1!==I?(0,r.jsx)(r.Fragment,{children:null==A?void 0:A.map(e=>(0,r.jsxs)(v.SC,{children:[(0,r.jsx)(v.pj,{className:"break-all lg:break-words",title:e.node.name,children:e.node.name}),(0,r.jsx)(v.pj,{className:"break-all lg:break-words",title:e.node.gitUrl,children:e.node.gitUrl}),(0,r.jsx)(v.pj,{className:"break-all lg:break-words",children:(0,r.jsx)(f.r,{sourceId:e.node.sourceId,sourceName:e.node.name,fetchingUserGroups:w,userGroups:null==_?void 0:_.userGroups,editable:!0})}),(0,r.jsx)(v.pj,{children:(0,r.jsx)(p._,{jobInfo:e.node.jobInfo,onTrigger:()=>F(e.node.jobInfo.command)})}),(0,r.jsx)(v.pj,{className:"text-right",children:(0,r.jsx)(t.z,{size:"icon",variant:"hover-destructive",onClick:()=>O(e.node.id,1===A.length),children:(0,r.jsx)(m.IconTrash,{})})})]},e.node.id))}):(0,r.jsx)(v.SC,{children:(0,r.jsx)(v.pj,{colSpan:5,className:"h-[100px] text-center",children:"No Data"})})})]}),T&&(0,r.jsx)(j.tl,{className:"my-4",children:(0,r.jsxs)(j.ng,{children:[(0,r.jsx)(j.nt,{children:(0,r.jsx)(j.dN,{disabled:!E,onClick:()=>{if(I<=1||c)return;let e=I-1;S(e),k(e)}})}),(0,r.jsx)(j.nt,{children:(0,r.jsx)(j.$0,{disabled:!M,onClick:()=>{if(!M||c)return;let e=I+1;S(e),k(e)}})})]})})]})})}function w(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"my-4 flex justify-end",children:(0,r.jsx)(l(),{href:"./git/new",className:(0,t.d)(),children:"Create"})}),(0,r.jsx)(_,{})]})}},49506:function(e,n,s){"use strict";s.d(n,{$0:function(){return h},Dj:function(){return m},dN:function(){return x},kN:function(){return u},ng:function(){return d},nt:function(){return c},tl:function(){return o}});var r=s(36164),i=s(3546),l=s(1544),t=s(31458),a=s(81565);let o=e=>{let{className:n,...s}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",n),...s})};o.displayName="Pagination";let d=i.forwardRef((e,n)=>{let{className:s,...i}=e;return(0,r.jsx)("ul",{ref:n,className:(0,l.cn)("flex flex-row items-center gap-1",s),...i})});d.displayName="PaginationContent";let c=i.forwardRef((e,n)=>{let{className:s,...i}=e;return(0,r.jsx)("li",{ref:n,className:(0,l.cn)("",s),...i})});c.displayName="PaginationItem";let u=e=>{let{className:n,isActive:s,size:i="icon",...a}=e;return(0,r.jsx)("a",{"aria-current":s?"page":void 0,className:(0,l.cn)("select-none",(0,t.d)({variant:s?"outline":"ghost",size:i}),n),...a})};u.displayName="PaginationLink";let x=e=>{let{className:n,disabled:s,...i}=e;return(0,r.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("cursor-pointer select-none gap-1 pl-2.5",s&&"cursor-not-allowed text-muted-foreground",n),...i,children:[(0,r.jsx)(a.IconChevronLeft,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]})};x.displayName="PaginationPrevious";let h=e=>{let{className:n,disabled:s,...i}=e;return(0,r.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("cursor-pointer select-none gap-1 pr-2.5",s&&"cursor-not-allowed text-muted-foreground",n),...i,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(a.IconChevronRight,{className:"h-4 w-4"})]})};h.displayName="PaginationNext";let m=e=>{let{className:n,...s}=e;return(0,r.jsxs)("span",{"aria-hidden":!0,className:(0,l.cn)("flex h-9 w-9 items-center justify-center",n),...s,children:[(0,r.jsx)(a.IconMore,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More pages"})]})};m.displayName="PaginationEllipsis"},21808:function(e,n,s){"use strict";s.d(n,{$6:function(){return l},$I:function(){return t},L8:function(){return i},ir:function(){return a},o0:function(){return r}});let r="name@yourcompany.com",i=20,l={DEMO_AUTO_LOGIN:"_tabby_demo_autologin",SEARCH_INITIAL_MSG:"_tabby_search_initial_msg",SEARCH_INITIAL_CONTEXTS:"_tabby_search_initial_contexts"},t=48,a="NOT_FOUND"}},function(e){e.O(0,[8415,7565,1386,55,2922,4007,9643,4752,3449,2578,8511,4421,4318,3299,1551,1544,1565,3240,4656,2869,3375,5289,1744],function(){return e(e.s=7922)}),_N_E=e.O()}]);