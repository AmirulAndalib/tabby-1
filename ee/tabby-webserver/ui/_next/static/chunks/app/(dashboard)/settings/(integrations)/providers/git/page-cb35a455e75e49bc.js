(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{88722:function(e,n,r){Promise.resolve().then(r.bind(r,71901))},71901:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return w}});var s=r(36164),i=r(70652),l=r.n(i),t=r(31458),a=r(3546),o=r(2578),d=r(40055),c=r(21808),u=r(43240),x=r(11634),h=r(70410),m=r(81565),j=r(49506),v=r(99047),f=r(6230),g=r(40030),p=r(55137),N=r(14522);let b=(0,u.BX)("\n  mutation deleteGitRepository($id: ID!) {\n    deleteGitRepository(id: $id)\n  }\n"),y=c.L8;function _(){var e,n;let[r,i]=a.useState(),[{data:l,fetching:c},u]=(0,d.aM)({query:h.S1,variables:{last:y,before:r}}),[{data:_,fetching:w}]=(0,d.aM)({query:h.gI}),[I,k]=a.useState(1),C=a.useMemo(()=>{var e,n;return null==l?void 0:null===(n=l.gitRepositories)||void 0===n?void 0:null===(e=n.edges)||void 0===e?void 0:e.slice().reverse()},[null==l?void 0:null===(e=l.gitRepositories)||void 0===e?void 0:e.edges]),R=null==l?void 0:null===(n=l.gitRepositories)||void 0===n?void 0:n.pageInfo,P=Math.ceil(((null==C?void 0:C.length)||0)/y),G=e=>{var n,r;return null==C?void 0:null===(r=C.slice(0,(e-1)*y))||void 0===r?void 0:null===(n=r.pop())||void 0===n?void 0:n.cursor},S=e=>{i(G(e))},A=a.useMemo(()=>{var e;return null==C?void 0:null===(e=C.slice)||void 0===e?void 0:e.call(C,(I-1)*y,I*y)},[I,C]),M=(null==R?void 0:R.hasPreviousPage)||I<P,E=I>1,T=!!(null==A?void 0:A.length)&&(M||E),D=(0,x.Db)(b),L=(0,x.Db)(N.C),O=(e,n)=>{D({id:e}).then(e=>{var r,s;(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.deleteGitRepository)?S(n?I-1:I):o.A.error((null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.message)||"Failed to delete repository")})},F=e=>L({command:e}).then(e=>{var n,r;(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.triggerJobRun)?(o.A.success("The job has been triggered successfully, it may take a few minutes to process."),u()):o.A.error((null==e?void 0:null===(r=e.error)||void 0===r?void 0:r.message)||"Failed to trigger job")});return a.useEffect(()=>{!c&&P<I&&I>1&&k(P)},[P,I]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(f.Z,{loading:c,children:[(0,s.jsxs)(v.iA,{className:"table-fixed border-t",children:[(0,s.jsx)(v.xD,{children:(0,s.jsxs)(v.SC,{children:[(0,s.jsx)(v.ss,{className:"w-[25%]",children:"Name"}),(0,s.jsx)(v.ss,{className:"w-[45%]",children:"Git URL"}),(0,s.jsx)(v.ss,{className:"w-[140px]",children:"Access"}),(0,s.jsx)(v.ss,{className:"w-[180px]",children:"Job"}),(0,s.jsx)(v.ss,{className:"w-[60px]"})]})}),(0,s.jsx)(v.RM,{children:(null==A?void 0:A.length)||1!==I?(0,s.jsx)(s.Fragment,{children:null==A?void 0:A.map(e=>(0,s.jsxs)(v.SC,{children:[(0,s.jsx)(v.pj,{className:"break-all lg:break-words",title:e.node.name,children:e.node.name}),(0,s.jsx)(v.pj,{className:"break-all lg:break-words",title:e.node.gitUrl,children:e.node.gitUrl}),(0,s.jsx)(v.pj,{className:"break-all lg:break-words",children:(0,s.jsx)(g.r,{sourceId:e.node.sourceId,sourceName:e.node.name,fetchingUserGroups:w,userGroups:null==_?void 0:_.userGroups,editable:!0})}),(0,s.jsx)(v.pj,{children:(0,s.jsx)(p._,{jobInfo:e.node.jobInfo,onTrigger:()=>F(e.node.jobInfo.command)})}),(0,s.jsx)(v.pj,{className:"text-right",children:(0,s.jsx)(t.z,{size:"icon",variant:"hover-destructive",onClick:()=>O(e.node.id,1===A.length),children:(0,s.jsx)(m.IconTrash,{})})})]},e.node.id))}):(0,s.jsx)(v.SC,{children:(0,s.jsx)(v.pj,{colSpan:5,className:"h-[100px] text-center",children:"No Data"})})})]}),T&&(0,s.jsx)(j.tl,{className:"my-4",children:(0,s.jsxs)(j.ng,{children:[(0,s.jsx)(j.nt,{children:(0,s.jsx)(j.dN,{disabled:!E,onClick:()=>{if(I<=1||c)return;let e=I-1;S(e),k(e)}})}),(0,s.jsx)(j.nt,{children:(0,s.jsx)(j.$0,{disabled:!M,onClick:()=>{if(!M||c)return;let e=I+1;S(e),k(e)}})})]})})]})})}function w(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"my-4 flex justify-end",children:(0,s.jsx)(l(),{href:"./git/new",className:(0,t.d)(),children:"Create"})}),(0,s.jsx)(_,{})]})}},49506:function(e,n,r){"use strict";r.d(n,{$0:function(){return h},Dj:function(){return m},dN:function(){return x},kN:function(){return u},ng:function(){return d},nt:function(){return c},tl:function(){return o}});var s=r(36164),i=r(3546),l=r(1544),t=r(31458),a=r(81565);let o=e=>{let{className:n,...r}=e;return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",n),...r})};o.displayName="Pagination";let d=i.forwardRef((e,n)=>{let{className:r,...i}=e;return(0,s.jsx)("ul",{ref:n,className:(0,l.cn)("flex flex-row items-center gap-1",r),...i})});d.displayName="PaginationContent";let c=i.forwardRef((e,n)=>{let{className:r,...i}=e;return(0,s.jsx)("li",{ref:n,className:(0,l.cn)("",r),...i})});c.displayName="PaginationItem";let u=e=>{let{className:n,isActive:r,size:i="icon",...a}=e;return(0,s.jsx)("a",{"aria-current":r?"page":void 0,className:(0,l.cn)("select-none",(0,t.d)({variant:r?"outline":"ghost",size:i}),n),...a})};u.displayName="PaginationLink";let x=e=>{let{className:n,disabled:r,...i}=e;return(0,s.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("cursor-pointer select-none gap-1 pl-2.5",r&&"cursor-not-allowed text-muted-foreground",n),...i,children:[(0,s.jsx)(a.IconChevronLeft,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Previous"})]})};x.displayName="PaginationPrevious";let h=e=>{let{className:n,disabled:r,...i}=e;return(0,s.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("cursor-pointer select-none gap-1 pr-2.5",r&&"cursor-not-allowed text-muted-foreground",n),...i,children:[(0,s.jsx)("span",{children:"Next"}),(0,s.jsx)(a.IconChevronRight,{className:"h-4 w-4"})]})};h.displayName="PaginationNext";let m=e=>{let{className:n,...r}=e;return(0,s.jsxs)("span",{"aria-hidden":!0,className:(0,l.cn)("flex h-9 w-9 items-center justify-center",n),...r,children:[(0,s.jsx)(a.IconMore,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"More pages"})]})};m.displayName="PaginationEllipsis"},21808:function(e,n,r){"use strict";r.d(n,{$6:function(){return l},$I:function(){return t},L8:function(){return i},ir:function(){return a},o0:function(){return s},rZ:function(){return o}});let s="name@yourcompany.com",i=20,l={DEMO_AUTO_LOGIN:"_tabby_demo_autologin",SEARCH_INITIAL_MSG:"_tabby_search_initial_msg",SEARCH_INITIAL_CONTEXTS:"_tabby_search_initial_contexts"},t=48,a="NOT_FOUND",o="\n"}},function(e){e.O(0,[8415,7565,1386,55,7812,4007,9643,4752,3449,2578,8511,4421,4318,3299,1551,1544,1565,3240,4656,2869,3375,5289,1744],function(){return e(e.s=88722)}),_N_E=e.O()}]);