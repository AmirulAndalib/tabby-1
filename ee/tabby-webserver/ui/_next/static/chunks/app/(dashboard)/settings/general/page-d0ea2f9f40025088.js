(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1519],{77280:function(e,t,n){Promise.resolve().then(n.bind(n,99315))},99315:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(57437),s=n(2265),i=n(16775),l=n(93111),a=n(39311);let o=e=>{let{title:t,className:n,children:s,...i}=e;return(0,r.jsxs)("div",{className:(0,a.cn)("lg:flex",n),...i,children:[(0,r.jsx)("div",{className:"text-left lg:w-1/5",children:(0,r.jsx)("h1",{className:"text-2xl font-bold",children:t})}),(0,r.jsx)("div",{className:"flex-1 lg:px-4",children:(0,r.jsx)("div",{className:"mb-7 mt-4 lg:mt-0",children:s})})]})};var d=n(38110),c=n(42910),u=n(61865),f=n(71424),m=n(99109),x=n(74578),h=n(60106),p=n(7820),g=n(93023),v=n(41315),j=n(51908);let b=(0,h.BX)("\n  mutation updateNetworkSettingMutation($input: NetworkSettingInput!) {\n    updateNetworkSetting(input: $input)\n  }\n"),y=(0,h.BX)("\n  query NetworkSetting {\n    networkSetting {\n      externalUrl\n    }\n  }\n"),N=x.Ry({externalUrl:x.Z_()}),w=e=>{let{onSuccess:t,defaultValues:n}=e,i=s.useMemo(()=>({...n||{}}),[n]),l=(0,u.cI)({resolver:(0,d.F)(N),defaultValues:i}),a=!(0,c.Z)(l.formState.dirtyFields),o=(0,p.Db)(b,{form:l,onCompleted(e){(null==e?void 0:e.updateNetworkSetting)&&(null==t||t(),l.reset(l.getValues()))}}),f=async()=>{await o({input:l.getValues()})};return(0,r.jsx)(v.l0,{...l,children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:l.handleSubmit(f),children:[(0,r.jsx)(v.Wi,{control:l.control,name:"externalUrl",render:e=>{let{field:t}=e;return(0,r.jsxs)(v.xJ,{children:[(0,r.jsx)(v.lX,{children:"External URL"}),(0,r.jsx)(v.pf,{children:"The external URL where user visits Tabby, must start with http:// or https://."}),(0,r.jsx)(v.NI,{children:(0,r.jsx)(j.I,{placeholder:"e.g. http://localhost:8080",autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",...t})}),(0,r.jsx)(v.zG,{})]})}}),(0,r.jsx)("div",{className:"mt-2 flex justify-end",children:(0,r.jsx)(g.z,{type:"submit",disabled:!a,children:"Update"})})]}),(0,r.jsx)(v.zG,{className:"text-center"})]})})},S=()=>{let[{data:e}]=(0,m.aM)({query:y});return e&&(0,r.jsx)(w,{defaultValues:e.networkSetting,onSuccess:()=>{f.A.success("Network configuration is updated")}})};var k=n(72999),C=n(66062),R=n(84168);let I=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(C.fC,{ref:t,className:(0,a.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...s,children:(0,r.jsx)(C.z$,{className:(0,a.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(R.IconCheck,{className:"h-4 w-4"})})})});I.displayName=C.fC.displayName;let z=(0,h.BX)("\n  mutation updateSecuritySetting($input: SecuritySettingInput!) {\n    updateSecuritySetting(input: $input)\n  }\n"),D=(0,h.BX)("\n  query SecuritySetting {\n    securitySetting {\n      allowedRegisterDomainList\n      disableClientSideTelemetry\n    }\n  }\n"),F=x.Ry({disableClientSideTelemetry:x.O7(),allowedRegisterDomainList:x.IX(x.Ry({value:x.Z_()})).optional()}),E=e=>{let{onSuccess:t,defaultValues:n}=e,i=s.useMemo(()=>({...n||{}}),[n]),l=(0,u.cI)({resolver:(0,d.F)(F),defaultValues:i}),{fields:o,append:f,remove:m,update:x}=(0,u.Dq)({control:l.control,name:"allowedRegisterDomainList"}),h=!(0,c.Z)(l.formState.dirtyFields),b=e=>{(null==o?void 0:o.length)===1&&0===e?x(e,{value:""}):m(e)},y=e=>{"Enter"!==e.key||e.nativeEvent.isComposing||(e.preventDefault(),f({value:""}))},N=(0,p.Db)(z,{form:l,onCompleted(e){(null==e?void 0:e.updateSecuritySetting)&&(null==t||t(),l.reset(l.getValues()))}}),w=async e=>{let{allowedRegisterDomainList:t,...n}=e;await N({input:{allowedRegisterDomainList:function(e){let t=(0,k.Z)(null==e?void 0:e.map(e=>e.value));return t}(t),...n}})};return(0,r.jsx)(v.l0,{...l,children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("form",{className:"flex flex-col gap-8",onSubmit:l.handleSubmit(w),children:[(0,r.jsx)(v.Wi,{control:l.control,name:"disableClientSideTelemetry",render:e=>{let{field:t}=e;return(0,r.jsxs)(v.xJ,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(v.NI,{children:(0,r.jsx)(I,{checked:t.value,onCheckedChange:t.onChange})}),(0,r.jsx)(v.lX,{className:"cursor-pointer",children:"Disabling Client Side Telemetry"})]}),(0,r.jsx)(v.pf,{children:"When activated, the client-side telemetry (IDE/Extensions) will be disabled, regardless of the client-side settings."})]})}}),(0,r.jsxs)("div",{children:[o.map((e,t)=>(0,r.jsx)(v.Wi,{control:l.control,name:"allowedRegisterDomainList.".concat(t,".value"),render:e=>{let{field:n}=e;return(0,r.jsxs)(v.xJ,{children:[(0,r.jsx)(v.lX,{className:(0,a.cn)(0!==t&&"sr-only"),children:"Authentication Domains"}),(0,r.jsx)(v.pf,{className:(0,a.cn)(0!==t&&"sr-only"),children:"Enable users to sign up automatically with an email address on domains."}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.NI,{children:(0,r.jsx)(j.I,{placeholder:"e.g. tabbyml.com",...n,onKeyDown:y})}),(0,r.jsx)(g.z,{variant:"hover-destructive",onClick:e=>b(t),children:(0,r.jsx)(R.IconTrash,{})})]}),(0,r.jsx)(v.zG,{})]})}},e.id)),(0,r.jsx)("div",{children:(0,r.jsx)(g.z,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>f({value:""}),children:"Add domain"})})]}),(0,r.jsx)("div",{className:"mt-2 flex justify-end",children:(0,r.jsx)(g.z,{type:"submit",disabled:!h,children:"Update"})})]}),(0,r.jsx)(v.zG,{className:"text-center"})]})})},L=()=>{let[{data:e}]=(0,m.aM)({query:D}),t=e&&{...e.securitySetting,allowedRegisterDomainList:function(e){let t=null==e?void 0:e.map(e=>({value:e}));return t&&0!==t.length?t:[{value:""}]}(e.securitySetting.allowedRegisterDomainList)};return e&&(0,r.jsx)(E,{defaultValues:t,onSuccess:()=>{f.A.success("Security configuration is updated")}})};function _(){let[e,t]=s.useState(!1);return(s.useEffect(()=>{setTimeout(()=>{t(!0)},500)},[]),e)?(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(o,{title:"Network",children:(0,r.jsx)(S,{})}),(0,r.jsx)(i.Z,{className:"mb-8"}),(0,r.jsx)(o,{title:"Security",children:(0,r.jsx)(L,{})})]}):(0,r.jsx)(l.c,{})}},93111:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var r=n(57437),s=n(25645);let i=()=>(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(s.O,{className:"h-4 w-full"}),(0,r.jsx)(s.O,{className:"h-4 w-full"}),(0,r.jsx)(s.O,{className:"h-4 w-full"}),(0,r.jsx)(s.O,{className:"h-4 w-full"})]})},93023:function(e,t,n){"use strict";n.d(t,{d:function(){return o},z:function(){return d}});var r=n(57437),s=n(2265),i=n(67256),l=n(7404),a=n(39311);let o=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium shadow ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90","hover-destructive":"shadow-none hover:bg-destructive/90 hover:text-destructive-foreground",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"shadow-none hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 shadow-none hover:underline"},size:{default:"h-8 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-8 w-8 p-0"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:n,variant:s,size:l,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,r.jsx)(u,{className:(0,a.cn)(o({variant:s,size:l,className:n})),ref:t,...c})});d.displayName="Button"},41315:function(e,t,n){"use strict";n.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return d},lX:function(){return h},pf:function(){return g},xJ:function(){return x},zG:function(){return v}});var r=n(57437),s=n(2265),i=n(67256),l=n(61865),a=n(39311),o=n(66672);let d=l.RV,c=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(l.Qr,{...t})})},f=()=>{let e=s.useContext(c),t=s.useContext(m),{getFieldState:n,formState:r}=(0,l.Gc)(),i=e.name||"root",a=n(i,r);if(!r)throw Error("useFormField should be used within <Form>");let{id:o}=t;return{id:o,name:i,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...a}},m=s.createContext({}),x=s.forwardRef((e,t)=>{let{className:n,...i}=e,l=s.useId();return(0,r.jsx)(m.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,a.cn)("space-y-2",n),...i})})});x.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:n,required:s,...i}=e,{error:l,formItemId:d}=f();return(0,r.jsx)(o._,{ref:t,className:(0,a.cn)(l&&"text-destructive",s&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:d,...i})});h.displayName="FormLabel";let p=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:l,formDescriptionId:a,formMessageId:o}=f();return(0,r.jsx)(i.g7,{ref:t,id:l,"aria-describedby":s?"".concat(a," ").concat(o):"".concat(a),"aria-invalid":!!s,...n})});p.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:i}=f();return(0,r.jsx)("p",{ref:t,id:i,className:(0,a.cn)("text-sm text-muted-foreground",n),...s})});g.displayName="FormDescription";let v=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e,{error:l,formMessageId:o}=f(),d=l?String(null==l?void 0:l.message):s;return d?(0,r.jsx)("p",{ref:t,id:o,className:(0,a.cn)("text-sm font-medium text-destructive",n),...i,children:d}):null});v.displayName="FormMessage"},51908:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(57437),s=n(2265),i=n(39311);let l=s.forwardRef((e,t)=>{let{className:n,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...l})});l.displayName="Input"},66672:function(e,t,n){"use strict";n.d(t,{_:function(){return d}});var r=n(57437),s=n(2265),i=n(36743),l=n(7404),a=n(39311);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(i.f,{ref:t,className:(0,a.cn)(o(),n),...s})});d.displayName=i.f.displayName},16775:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(57437),s=n(2265),i=n(26823),l=n(39311);let a=s.forwardRef((e,t)=>{let{className:n,orientation:s="horizontal",decorative:a=!0,...o}=e;return(0,r.jsx)(i.f,{ref:t,decorative:a,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",n),...o})});a.displayName=i.f.displayName},25645:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(57437),s=n(39311);function i(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("h-4 animate-pulse rounded-md bg-gray-200 dark:bg-gray-700",t),...n})}}},function(e){e.O(0,[1091,584,1424,5414,6410,1366,7753,4168,7820,2971,7864,1744],function(){return e(e.s=77280)}),_N_E=e.O()}]);