(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2797,5083],{28242:function(e,t,n){"use strict";n.d(t,{F:function(){return c},f:function(){return d}});var r=n(3546);let s=["light","dark"],l="(prefers-color-scheme: dark)",a="undefined"==typeof window,i=(0,r.createContext)(void 0),o={setTheme:e=>{},themes:[]},c=()=>{var e;return null!==(e=(0,r.useContext)(i))&&void 0!==e?e:o},d=e=>(0,r.useContext)(i)?r.createElement(r.Fragment,null,e.children):r.createElement(m,e),u=["light","dark"],m=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:a=!0,storageKey:o="theme",themes:c=u,defaultTheme:d=n?"system":"light",attribute:m="data-theme",value:g,children:p,nonce:j})=>{let[b,N]=(0,r.useState)(()=>f(o,d)),[y,w]=(0,r.useState)(()=>f(o)),S=g?Object.values(g):c,I=(0,r.useCallback)(e=>{let r=e;if(!r)return;"system"===e&&n&&(r=v());let l=g?g[r]:r,i=t?x():null,o=document.documentElement;if("class"===m?(o.classList.remove(...S),l&&o.classList.add(l)):l?o.setAttribute(m,l):o.removeAttribute(m),a){let e=s.includes(d)?d:null,t=s.includes(r)?r:e;o.style.colorScheme=t}null==i||i()},[]),C=(0,r.useCallback)(e=>{N(e);try{localStorage.setItem(o,e)}catch(e){}},[e]),E=(0,r.useCallback)(t=>{let r=v(t);w(r),"system"===b&&n&&!e&&I("system")},[b,e]);(0,r.useEffect)(()=>{let e=window.matchMedia(l);return e.addListener(E),E(e),()=>e.removeListener(E)},[E]),(0,r.useEffect)(()=>{let e=e=>{e.key===o&&C(e.newValue||d)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[C]),(0,r.useEffect)(()=>{I(null!=e?e:b)},[e,b]);let k=(0,r.useMemo)(()=>({theme:b,setTheme:C,forcedTheme:e,resolvedTheme:"system"===b?y:b,themes:n?[...c,"system"]:c,systemTheme:n?y:void 0}),[b,C,e,y,n,c]);return r.createElement(i.Provider,{value:k},r.createElement(h,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:a,storageKey:o,themes:c,defaultTheme:d,attribute:m,value:g,children:p,attrs:S,nonce:j}),p)},h=(0,r.memo)(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:a,enableColorScheme:i,defaultTheme:o,value:c,attrs:d,nonce:u})=>{let m="system"===o,h="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${d.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=i?s.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(e,t=!1,r=!0)=>{let l=c?c[e]:e,a=t?e+"|| ''":`'${l}'`,o="";return i&&r&&!t&&s.includes(e)&&(o+=`d.style.colorScheme = '${e}';`),"class"===n?o+=t||l?`c.add(${a})`:"null":l&&(o+=`d[s](n,${a})`),o},v=e?`!function(){${h}${x(e)}}()`:a?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${m})){var t='${l}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${c?`var x=${JSON.stringify(c)};`:""}${x(c?"x[e]":"e",!0)}}${m?"":"else{"+x(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${c?`var x=${JSON.stringify(c)};`:""}${x(c?"x[e]":"e",!0)}}else{${x(o,!1,!1)};}${f}}catch(t){}}();`;return r.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:v}})},()=>!0),f=(e,t)=>{let n;if(!a){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},x=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},v=e=>(e||(e=window.matchMedia(l)),e.matches?"dark":"light")},72845:function(e,t,n){Promise.resolve().then(n.bind(n,29146))},29146:function(e,t,n){"use strict";n.r(t),n.d(t,{SOURCE_CARD_STYLE:function(){return eC},Search:function(){return eR},SearchContext:function(){return eI}});var r=n(36164),s=n(3546),l=n(70652),a=n.n(l),i=n(11978),o=n(54767),c=n(1853),d=n(82030),u=n(72940),m=n(52807),h=n(51722),f=n(19108),x=n(56575),v=n(2578),g=n(40055),p=n(21808),j=n(93877),b=n(43240),N=n(18500),y=n(28312),w=n(9010),S=n(24449),I=n(16784),C=n(98454),E=n(31159),k=n(44645),R=n(80605),A=n(64566),T=n(47241),z=n(37266),M=n(11634),_=n(70410),O=n(1544),L=n(31458),$=n(81565),D=n(53538),P=n(57830),U=n(11208),F=n(72657),Z=n(30601),V=n(69579),H=n(24203),G=n(84381),J=n(62226),q=n.n(J),Q=n(6797),W=n.n(Q),K=n(94909),X=n(66686),Y=n(5493),B=n(23455),ee=n(23782),et=n(74038),en=n(98150),er=n(3448),es=n(29),el=n(90168),ea=n(48537),ei=n(10279);function eo(e){var t,n,l,a;let{message:i,showRelatedQuestion:o,isLoading:d,isLastAssistantMessage:u,isDeletable:m,className:h}=e,{onRegenerateResponse:f,onSubmitSearch:x,setDevPanelOpen:v,setConversationIdForDev:g,enableDeveloperMode:p,contextInfo:j,fetchingContextInfo:b,onDeleteMessage:N,isThreadOwner:y,onUpdateMessage:w}=(0,s.useContext)(eI),[S,I]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),[k,R]=(0,s.useState)(void 0),A=d?$.IconSpinner:$.IconSparkles,T=null==i?void 0:null===(t=i.attachment)||void 0===t?void 0:t.doc,z=null==i?void 0:null===(n=i.attachment)||void 0===n?void 0:n.code,M=(null==T?void 0:T.length)?Math.ceil(T.length/4)*eC.expand+.5*Math.floor(T.length/4)+.5:0,_=(0,s.useMemo)(()=>{var e,t,n;return null!==(n=null==i?void 0:null===(t=i.attachment)||void 0===t?void 0:null===(e=t.code)||void 0===e?void 0:e.map(e=>{var t;let{startLine:n,endLine:r}=(0,O.OV)(e);return{kind:"file",range:{start:n,end:r},filepath:e.filepath,content:e.content,git_url:e.gitUrl,extra:{scores:null==e?void 0:null===(t=e.extra)||void 0===t?void 0:t.scores}}}))&&void 0!==n?n:[]},[null==i?void 0:null===(l=i.attachment)||void 0===l?void 0:l.code]),D=e=>{let{startLine:t,endLine:n}=(0,O.OV)(e);if(!e.filepath)return;let r=new URL("".concat(window.location.origin,"/files")),s=new URLSearchParams;s.append("redirect_filepath",e.filepath),s.append("redirect_git_url",e.gitUrl),r.search=s.toString();let l=(0,O.nO)({start:t,end:n});l&&(r.hash=l),window.open(r.toString())},P=async e=>{let t=await w(e);if(t)return t;I(!1)};return(0,r.jsxs)("div",{className:(0,O.cn)("flex flex-col gap-y-5",h),children:[T&&T.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center gap-x-2",children:[(0,r.jsx)($.IconBlocks,{className:"relative",style:{top:"-0.04rem"}}),(0,r.jsx)("p",{className:"text-sm font-bold leading-normal",children:"Sources"})]}),(0,r.jsx)("div",{className:"gap-sm -mx-2 grid grid-cols-3 gap-2 overflow-y-hidden px-2 pt-2 md:grid-cols-4",style:{transition:"height 0.25s ease-out",height:C?"".concat(M,"rem"):"".concat(eC.compress+.5,"rem")},children:T.map((e,t)=>(0,r.jsx)(ec,{conversationId:i.id,source:e,showMore:C,showDevTooltip:p},e.link+t))}),(0,r.jsxs)(L.z,{variant:"ghost",className:"-ml-1.5 mt-1 flex items-center gap-x-1 px-1 py-2 text-sm font-normal text-muted-foreground",onClick:()=>E(!C),children:[(0,r.jsx)($.IconChevronRight,{className:(0,O.cn)({"-rotate-90":C,"rotate-90":!C})}),(0,r.jsx)("p",{children:C?"Show less":"Show more"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-1 flex h-8 items-center gap-x-1.5",children:[(0,r.jsx)(A,{className:(0,O.cn)({"animate-spinner":d})}),(0,r.jsx)("p",{className:"text-sm font-bold leading-none",children:"Answer"}),p&&(0,r.jsx)(L.z,{variant:"ghost",size:"icon",onClick:()=>{g(i.id),v(!0)},children:(0,r.jsx)($.IconBug,{})})]}),z&&z.length>0&&(0,r.jsx)(el.q,{contexts:_,className:"mt-1 text-sm",onContextClick:e=>{if(!e.filepath)return;let t=new URL("".concat(window.location.origin,"/files")),n=new URLSearchParams;n.append("redirect_filepath",e.filepath),n.append("redirect_git_url",e.git_url),t.search=n.toString();let r=(0,O.nO)({start:e.range.start,end:e.range.end});r&&(t.hash=r),window.open(t.toString())},enableTooltip:p,showExternalLink:!1,onTooltipClick:()=>{g(i.id),v(!0)},highlightIndex:k}),d&&!i.content&&(0,r.jsx)(er.O,{className:"mt-1 h-40 w-full"}),S?(0,r.jsx)(eu,{message:i,onCancel:()=>I(!1),onSubmit:P}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ei.JG,{message:i.content,attachmentDocs:T,attachmentCode:z,onCodeCitationClick:e=>{D(e)},onCodeCitationMouseEnter:e=>{var t,n;R(e-1-((null==i?void 0:null===(n=i.attachment)||void 0===n?void 0:null===(t=n.doc)||void 0===t?void 0:t.length)||0))},onCodeCitationMouseLeave:e=>{R(void 0)},contextInfo:j,fetchingContextInfo:b,canWrapLongLines:!d}),i.error&&(0,r.jsx)(ei.mE,{error:i.error}),!d&&!S&&(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between text-sm",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-3",children:y&&(0,r.jsxs)(r.Fragment,{children:[!d&&!b&&u&&(0,r.jsxs)(L.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:()=>f(i.id),children:[(0,r.jsx)($.IconRefresh,{}),(0,r.jsx)("p",{children:"Regenerate"})]}),m&&(0,r.jsxs)(L.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:()=>N(i.id),children:[(0,r.jsx)($.IconTrash,{}),(0,r.jsx)("p",{children:"Delete"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-x-3",children:[(0,r.jsx)(ea.q,{className:"-ml-1.5 gap-x-1 px-1 font-normal text-muted-foreground",value:(e=>{var t,n,r,s,l,a,i,o,d,u,m;if((0,K.Z)(null==e?void 0:null===(t=e.attachment)||void 0===t?void 0:t.doc)&&(0,K.Z)(null==e?void 0:null===(n=e.attachment)||void 0===n?void 0:n.code))return e.content;let h=e.content.replace(et.H,e=>{let t=null==e?void 0:e.match(/\d+/);return"[".concat(t,"]")}).trim(),f=null!==(d=null===(s=e.attachment)||void 0===s?void 0:null===(r=s.doc)||void 0===r?void 0:r.map((e,t)=>"[".concat(t+1,"] ").concat(e.link)).join("\n"))&&void 0!==d?d:"",x=null!==(u=null===(a=e.attachment)||void 0===a?void 0:null===(l=a.doc)||void 0===l?void 0:l.length)&&void 0!==u?u:0,v=null!==(m=null===(o=e.attachment)||void 0===o?void 0:null===(i=o.code)||void 0===i?void 0:i.map((e,t)=>{let n=(0,O.tf)(e),r=(0,c.Z)([e.filepath,n]).join(":");return"[".concat(t+x+1,"] ").concat(r)}).join("\n"))&&void 0!==m?m:"";return"".concat(h,"\n\nCitations:\n").concat(f+v)})(i),text:"Copy"}),y&&(0,r.jsxs)(L.z,{className:"flex items-center gap-x-1 px-1 font-normal text-muted-foreground",variant:"ghost",onClick:e=>I(!0),children:[(0,r.jsx)($.IconEdit,{}),(0,r.jsx)("p",{children:"Edit"})]})]})]})]})]}),o&&!S&&!d&&i.threadRelevantQuestions&&i.threadRelevantQuestions.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-1.5",children:[(0,r.jsx)($.IconLayers,{}),(0,r.jsx)("p",{className:"text-sm font-bold leading-none",children:"Suggestions"})]}),(0,r.jsx)("div",{className:"mt-2 flex flex-col gap-y-3",children:null===(a=i.threadRelevantQuestions)||void 0===a?void 0:a.map((e,t)=>(0,r.jsxs)("div",{className:"flex cursor-pointer items-center justify-between rounded-lg border p-4 py-3 transition-opacity hover:opacity-70",onClick:x.bind(null,e),children:[(0,r.jsx)("p",{className:"w-full overflow-hidden text-ellipsis text-sm",children:e}),(0,r.jsx)($.IconPlus,{})]},t))})]})]})}function ec(e){var t,n;let{conversationId:l,source:a,showMore:i,showDevTooltip:o}=e,{setDevPanelOpen:c,setConversationIdForDev:d}=(0,s.useContext)(eI),[u,m]=(0,s.useState)(!1);return(0,r.jsxs)(es.u,{open:u,onOpenChange:e=>{o&&m(e)},delayDuration:0,children:[(0,r.jsx)(es.aJ,{asChild:!0,children:(0,r.jsx)("div",{className:"relative flex cursor-pointer flex-col justify-between rounded-lg border bg-card p-3 hover:bg-card/60",style:{height:i?"".concat(eC.expand,"rem"):"".concat(eC.compress,"rem"),transition:"all 0.25s ease-out"},onClick:()=>window.open(a.link),children:(0,r.jsx)(ed,{source:a,showMore:i})})}),(0,r.jsx)(es._v,{align:"start",className:"cursor-pointer p-2",onClick:e=>{e.stopPropagation(),d(l),c(!0)},children:(0,r.jsxs)("p",{children:["Score: ",null!==(n=null==a?void 0:null===(t=a.extra)||void 0===t?void 0:t.score)&&void 0!==n?n:"-"]})})]})}function ed(e){let{source:t,showMore:n}=e,{hostname:s}=new URL(t.link),l="MessageAttachmentIssueDoc"===t.__typename,a="MessageAttachmentPullDoc"===t.__typename;return(0,r.jsxs)("div",{className:"flex flex-1 flex-col justify-between gap-y-1",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-0.5",children:[(0,r.jsx)("p",{className:"line-clamp-1 w-full overflow-hidden text-ellipsis break-all text-xs font-semibold",children:t.title}),(0,r.jsx)("p",{className:(0,O.cn)(" w-full overflow-hidden text-ellipsis break-all text-xs text-muted-foreground",{"line-clamp-2":n,"line-clamp-1":!n}),children:em((0,O.L5)(t))})]}),(0,r.jsx)("div",{className:"flex items-center text-xs text-muted-foreground",children:(0,r.jsxs)("div",{className:"flex w-full flex-1 items-center justify-between gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(ei.V$,{hostname:s}),(0,r.jsx)("p",{className:"ml-1 truncate",children:s.replace("www.","").split("/")[0]})]}),(0,r.jsxs)("div",{className:"flex shrink-0 items-center gap-1",children:[l&&(0,r.jsxs)(r.Fragment,{children:[t.closed?(0,r.jsx)($.IconCheckCircled,{className:"h-3.5 w-3.5"}):(0,r.jsx)($.IconCircleDot,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:t.closed?"Closed":"Open"})]}),a&&(0,r.jsxs)(r.Fragment,{children:[t.merged?(0,r.jsx)($.IconGitMerge,{className:"h-3.5 w-3.5"}):(0,r.jsx)($.IconGitPullRequest,{className:"h-3.5 w-3.5"}),t.merged?"Merged":"Open"]})]})]})})]})}function eu(e){let{message:t,onCancel:n,onSubmit:l}=e,a=ee.Ry({content:ee.Z_().trim()}),i=(0,Y.cI)({resolver:(0,G.F)(a),defaultValues:{content:t.content}}),{isSubmitting:o}=i.formState,[c]=(0,s.useState)(t),d=async e=>{let t=await l({...c,content:e.content});t&&(0,M.zG)(i)(t)};return(0,r.jsx)(en.l0,{...i,children:(0,r.jsxs)("form",{onSubmit:i.handleSubmit(d),children:[(0,r.jsx)(en.Wi,{control:i.control,name:"content",render:e=>{let{field:t}=e;return(0,r.jsxs)(en.xJ,{children:[(0,r.jsx)(en.NI,{children:(0,r.jsx)(B.Z,{autoFocus:!0,minRows:2,maxRows:20,className:"w-full rounded-lg border bg-background p-4 outline-ring",...t})}),(0,r.jsx)(en.zG,{})]})}}),(0,r.jsxs)("div",{className:"my-4 flex items-center justify-between gap-2 px-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)(en.zG,{})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(L.z,{type:"button",variant:"outline",onClick:n,className:"min-w-[2rem]",children:"Cancel"}),(0,r.jsxs)(L.z,{type:"submit",disabled:o,children:[o&&(0,r.jsx)($.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Save"]})]})]})]})})}let em=e=>{let t=q().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),n=X.TU.parse(t),r=W().decode(n),s=r.replace(/<\/?[^>]+(>|$)/g,"");return s};var eh=n(90379);let ef=(0,s.lazy)(()=>n.e(726).then(n.t.bind(n,80726,23))),ex=e=>{let{value:t,isFullScreen:n,onToggleFullScreen:l,onClose:a}=e,[i]=(0,j.m)(),{theme:o}=(0,w.X)(),c=(0,s.useRef)(null);return((0,s.useEffect)(()=>{if(t){var e;null===(e=c.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})}},[t]),(null==i?void 0:i.value)&&open)?(0,r.jsxs)("div",{className:"flex h-full flex-col px-3 pt-2",children:[(0,r.jsx)("div",{className:"flex items-center justify-end pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(L.z,{variant:"ghost",size:"icon",onClick:e=>l(!n),children:(0,r.jsx)($.IconChevronDown,{className:(0,O.cn)("transition-all",n?"":"rotate-180")})}),(0,r.jsx)(L.z,{variant:"ghost",size:"icon",onClick:a,children:(0,r.jsx)($.IconClose,{})})]})}),(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(eh.cg,{className:"p-2"}),children:t?(0,r.jsx)(P.ScrollArea,{className:"flex-1",ref:c,children:(0,r.jsx)(ef,{theme:"dark"===o?"tomorrow":"rjv-default",src:t,style:{fontSize:"0.75rem"},collapseStringsAfterLength:120})}):null})]}):null};var ev=n(73460),eg=n(68172),ep=n(63743),ej=n(52569),eb=n(7449);let eN=(0,b.BX)("\n  mutation DeleteThread($id: ID!) {\n    deleteThread(id: $id)\n  }\n");function ey(e){let{threadIdFromURL:t,streamingDone:n}=e,l=(0,i.useRouter)(),{isThreadOwner:a}=(0,s.useContext)(eI),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),m=(0,M.Db)(eN,{onCompleted(e){e.deleteThread?l.replace("/"):(v.A.error("Failed to delete"),u(!1))},onError(e){v.A.error((null==e?void 0:e.message)||"Failed to delete"),u(!1)}}),h=e=>{e&&(0,z.wh)(),l.push("/")};return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center gap-x-6",children:(0,r.jsxs)(L.z,{variant:"ghost",className:"-ml-1 pl-0 text-sm text-muted-foreground",onClick:()=>h(),children:[(0,r.jsx)($.IconChevronLeft,{className:"mr-1 h-5 w-5"}),"Home"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[n&&t&&(0,r.jsx)(L.z,{variant:"ghost",className:"flex items-center gap-1 px-2 font-normal text-muted-foreground",onClick:()=>h(!0),children:(0,r.jsx)($.IconPlus,{})}),n&&t&&a&&(0,r.jsxs)(ev.aR,{open:o,onOpenChange:c,children:[(0,r.jsx)(ev.vW,{asChild:!0,children:(0,r.jsx)(L.z,{size:"icon",variant:"hover-destructive",children:(0,r.jsx)($.IconTrash,{})})}),(0,r.jsxs)(ev._T,{children:[(0,r.jsxs)(ev.fY,{children:[(0,r.jsx)(ev.f$,{children:"Delete this thread"}),(0,r.jsx)(ev.yT,{children:"Are you sure you want to delete this thread? This operation is not revertible."})]}),(0,r.jsxs)(ev.xo,{children:[(0,r.jsx)(ev.le,{children:"Cancel"}),(0,r.jsxs)(ev.OL,{className:(0,L.d)({variant:"destructive"}),onClick:e=>{e.preventDefault(),u(!0),m({id:t})},children:[d&&(0,r.jsx)($.IconSpinner,{className:"mr-2 h-4 w-4 animate-spin"}),"Yes, delete it"]})]})]})]}),(0,r.jsx)(eg.q,{children:(0,r.jsx)(ep.T,{className:"mr-4"})}),(0,r.jsx)(eb.Z,{showHome:!1,showSetting:!0,beforeRouteChange:()=>{(0,z.wh)()},children:(0,r.jsx)(ej.SQ,{className:"h-10 w-10 border"})})]})]})}function ew(){return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(er.O,{className:"w-full"}),(0,r.jsx)(er.O,{className:"w-[70%]"})]}),(0,r.jsx)(er.O,{className:"h-40 w-full"})]})}function eS(e){let{message:t,className:n,...l}=e,{contextInfo:a,fetchingContextInfo:i}=(0,s.useContext)(eI);return(0,r.jsx)("div",{className:(0,O.cn)("font-semibold",n),...l,children:(0,r.jsx)(ei.JG,{message:t.content,contextInfo:a,fetchingContextInfo:i,className:"text-xl prose-p:mb-2 prose-p:mt-0",headline:!0,canWrapLongLines:!0})})}let eI=(0,s.createContext)({}),eC={compress:5.3,expand:6.3},eE="_temp_msg_",ek=()=>"".concat(eE).concat((0,x.x0)());function eR(){var e,t,n,l,a;let[{data:m}]=(0,C.P)(),{updateUrlComponents:x,pathname:b}=(0,k.Z)(),[V,G]=(0,s.useState)(),[J,q]=(0,s.useState)(!1),Q=(0,R.xG)(),[W,K]=(0,s.useState)([]),[X,Y]=(0,s.useState)(!0),[B,ee]=(0,s.useState)(!1),[et,en]=(0,s.useState)(""),[er,es]=(0,s.useState)(""),el=(0,s.useRef)(null),[ea,ei]=(0,s.useState)(!1),[ec]=(0,Z.Hb)(),ed=(0,i.useRouter)(),eu=(0,s.useRef)(!1),{theme:em}=(0,w.X)(),[eh,ef]=(0,s.useState)(!1),[ev,eg]=(0,s.useState)(),ep=(0,s.useRef)(null),[ej,eb]=(0,s.useState)(45),eN=(0,s.useRef)(ej),[eC]=(0,j.m)(),[eR,e_]=(0,s.useState)(),eO=(0,s.useMemo)(()=>{var e,t;if(V)return null===(t=V.match(/^\/search\/(.*)/))||void 0===t?void 0:null===(e=t[1])||void 0===e?void 0:e.split("-").pop()},[V]),eL=(0,M.Db)(eT),e$=async e=>{let t=W.findIndex(t=>t.id===e.id);if(!(t>-1)||!eR)return Error("Failed to save");{var n;let r=await eL({input:{threadId:eR,id:e.id,content:e.content}});if(null==r||null===(n=r.data)||void 0===n||!n.updateThreadMessage)return(null==r?void 0:r.error)||Error("Failed to save");await K(n=>{let r=[...n];return r[t]=e,r})}};(0,s.useEffect)(()=>{eO&&e_(eO)},[eO]);let[{data:eD,fetching:eP}]=(0,g.aM)({query:_.Gx}),[eU,eF]=(0,s.useState)(),[{data:eZ,fetching:eV,error:eH}]=(0,g.aM)({query:_.XL,variables:{ids:[eR]},pause:!eR}),[{data:eG,error:eJ,fetching:eq,stale:eQ}]=(0,g.aM)({query:_.r4,variables:{threadId:eR,first:30,after:eU},pause:!eR||B});(0,s.useEffect)(()=>{var e,t,n,r;if(!eQ){if(null==eG?void 0:null===(t=eG.threadMessages)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length){let e=eG.threadMessages.edges.map(e=>e.node).slice();K(t=>{var n;return(n=[...t,...e]).length?(0,f.Z)(n,(0,h.Z)("id",2)):[]})}if(null==eG?void 0:eG.threadMessages){let e=null==eG?void 0:null===(r=eG.threadMessages)||void 0===r?void 0:null===(n=r.pageInfo)||void 0===n?void 0:n.hasNextPage,t=null==eG?void 0:eG.threadMessages.pageInfo.endCursor;e&&t?eF(t):ee(!0)}}},[eG]);let eW=(0,s.useMemo)(()=>!!m&&(!eO||m.me.id===(null==eZ?void 0:eZ.threads.edges[0].node.userId)),[m,eZ,eO]),eK=null==eD?void 0:eD.contextInfo.sources,eX=null==W?void 0:null===(e=W[0])||void 0===e?void 0:e.content,eY=(0,s.useMemo)(()=>eK&&eX?(0,O.i8)(eK,eX,{maxLength:p.$I}):"",[eK,eX]);(0,s.useEffect)(()=>{eY&&(document.title=eY)},[eY]),(0,s.useEffect)(()=>{eJ&&!B&&ee(!0)},[eJ]);let{sendUserMessage:eB,isLoading:e0,error:e1,answer:e4,stop:e5,regenerate:e2,deleteThreadMessagePair:e6}=(0,A.x)({threadId:eR}),e3=(0,I.d)(e0),{selectedModel:e7,isModelLoading:e8,models:e9}=(0,E.Vq)(),te=(0,s.useMemo)(()=>W.find(e=>e.id===ev),[ev,W]),tt=(0,s.useMemo)(()=>te?(0,d.Z)(null==te?void 0:te.attachment,"doc","code"):{answers:W.filter(e=>e.role===N.uU.Assistant).map(e=>(0,d.Z)(e,"doc","code"))},[ev,null==te?void 0:null===(t=te.attachment)||void 0===t?void 0:t.code,null==te?void 0:null===(n=te.attachment)||void 0===n?void 0:n.doc]);(0,s.useEffect)(()=>{G(b),J||q(!0)},[b]),(0,s.useEffect)(()=>{J&&!eO&&(()=>{if(eu.current)return;eu.current=!0;let e=sessionStorage.getItem(p.$6.SEARCH_INITIAL_MSG),t=sessionStorage.getItem(p.$6.SEARCH_INITIAL_CONTEXTS),n=t?JSON.parse(t):void 0;if(e){sessionStorage.removeItem(p.$6.SEARCH_INITIAL_MSG),sessionStorage.removeItem(p.$6.SEARCH_INITIAL_CONTEXTS),ee(!0),tl(e,n);return}eR||((0,z.wh)(),ed.replace("/"))})()},[J]),(0,s.useEffect)(()=>{B&&setTimeout(()=>{ei(!0)},300)},[B]);let{isCopied:tn,onCopy:tr}=function(e){let{threadIdFromURL:t,threadIdFromStreaming:n,streamingDone:r,updateThreadURL:s}=e,{isCopied:l,copyToClipboard:a}=(0,y.m)({timeout:2e3}),i=(0,M.Db)(eA,{onError(e){v.A.error(e.message)}}),o=!t&&r&&n&&s,c=async()=>{if(l)return;let e=window.location.href;o&&(await i({threadId:n}),e=s(n)),a(e)};return{onCopy:c,isCopied:l}}({threadIdFromURL:eO,threadIdFromStreaming:eR,streamingDone:!e0,updateThreadURL:e=>{let t=(0,o.Z)(eY),n=(0,c.Z)([t,e]).join("-"),r=x({pathname:"/search/".concat(n),searchParams:{del:["q"]},replace:!0});return location.origin+r}});(0,s.useEffect)(()=>{var e,t,n,r;e4.threadId&&e4.threadId!==eR&&e_(e4.threadId);let s=[...W],l=s.findIndex(e=>e.id===et),a=s.findIndex(e=>e.id===er);if(-1===l||-1===a)return;let i=s[l],o=s[a];o.content=e4.content,(null===(e=o.attachment)||void 0===e?void 0:e.code)||!e4.attachmentsCode||(o.attachment={doc:(null===(n=o.attachment)||void 0===n?void 0:n.doc)||null,code:e4.attachmentsCode.map(e=>({...e.code,extra:{scores:e.scores}}))||null}),(null===(t=o.attachment)||void 0===t?void 0:t.doc)||!e4.attachmentsDoc||(o.attachment={doc:e4.attachmentsDoc.map(e=>({...e.doc,extra:{score:e.score}}))||null,code:(null===(r=o.attachment)||void 0===r?void 0:r.code)||null}),o.threadRelevantQuestions=null==e4?void 0:e4.relevantQuestions;let c=e4.userMessageId,d=e4.assistantMessageId;c&&d&&c!==i.id&&d!==o.id&&(i.id=c,o.id=d,en(c),es(d)),K(s)},[e0,e4]),(0,s.useEffect)(()=>{if(e1){let e=[...W],t=e.find(e=>e.id===er);t&&(t.error=e1?"401"===e1.message?"Unauthorized":(0,u.Z)(e1.graphQLErrors,e=>{var t;return(null===(t=e.extensions)||void 0===t?void 0:t.code)===p.ir})?"The thread has expired or does not exist.":e1.message||"Failed to fetch":"Failed to fetch")}},[e1]);let ts=(0,s.useRef)();(0,s.useEffect)(()=>(e3.current&&(ts.current=window.setTimeout(()=>{if(!e3.current)return;Y(!0);let e=null==el?void 0:el.current;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},300)),e3.current||Y(!1),()=>{window.clearTimeout(ts.current)}),[e0]),(0,s.useEffect)(()=>{var e,t,n;eh?(null===(e=ep.current)||void 0===e||e.expand(),null===(t=ep.current)||void 0===t||t.resize(ej)):null===(n=ep.current)||void 0===n||n.collapse()},[eh]);let tl=(e,t)=>{let n=ek(),r=ek(),s={id:n,role:N.uU.User,content:e},l={id:r,role:N.uU.Assistant,content:""},{sourceIdForCodeQuery:a,sourceIdsForDocQuery:i,searchPublic:o}=eM(t),c=a?{sourceId:a,content:e}:null;en(n),es(r),K([...W].concat([s,l])),eB({content:e},{generateRelevantQuestions:!0,codeQuery:c,docQuery:{sourceIds:i,content:e,searchPublic:!!o},modelName:null==t?void 0:t.modelName})},ta=(0,s.useMemo)(()=>{var e,t;if(B&&!eV&&eO&&(eH||!(null==eZ?void 0:null===(t=eZ.threads)||void 0===t?void 0:null===(e=t.edges)||void 0===e?void 0:e.length)))return eH||Error(p.ir)},[eZ,eV,eH,B,eO]),[ti]=(0,S.n)(eq||(null==eG?void 0:null===(a=eG.threadMessages)||void 0===a?void 0:null===(l=a.pageInfo)||void 0===l?void 0:l.hasNextPage),200),to=ec?{height:"calc(100vh - ".concat(Z.wt,")")}:{height:"100vh"};return B&&(ta||eJ)?(0,r.jsx)(ez,{error:ta||eJ}):!B&&(ti||eQ)?(0,r.jsxs)("div",{children:[(0,r.jsx)(ey,{}),(0,r.jsxs)("div",{className:"mx-auto mt-24 w-full space-y-10 px-4 pb-32 lg:max-w-4xl lg:px-0",children:[(0,r.jsx)(ew,{}),(0,r.jsx)(ew,{})]})]}):Q&&B?(0,r.jsx)(eI.Provider,{value:{isLoading:e0,onRegenerateResponse:()=>{var e;if(!eR||eP)return;let t=W.length-1,n=t-1;if(-1===t||n<=-1)return;let r=W[n].id,s=W[t].id,l=W.slice(0,-2),a=W[n],i={...a,id:ek()},o={id:ek(),role:N.uU.Assistant,content:"",attachment:{code:null,doc:null},error:void 0},c=(0,O.b)(i.content,null==eD?void 0:null===(e=eD.contextInfo)||void 0===e?void 0:e.sources),{sourceIdForCodeQuery:d,sourceIdsForDocQuery:u,searchPublic:m}=eM((0,O.G8)(c)),h=d?{sourceId:d,content:i.content}:null,f={sourceIds:u,content:i.content,searchPublic:m};en(i.id),es(o.id),K([...l,i,o]),e2({threadId:eR,userMessageId:r,assistantMessageId:s,userMessage:{content:i.content},threadRunOptions:{generateRelevantQuestions:!0,codeQuery:h,docQuery:f,modelName:e7}})},onSubmitSearch:tl,setDevPanelOpen:ef,setConversationIdForDev:eg,isPathnameInitialized:J,enableDeveloperMode:eC.value,contextInfo:null==eD?void 0:eD.contextInfo,fetchingContextInfo:eP,onDeleteMessage:e=>{if(!eR)return;let t=W.findIndex(t=>t.id===e),n=t-1,r=W[t-1];if(-1!==t&&(null==r?void 0:r.role)===N.uU.User){if(r.id.startsWith(eE)&&e.startsWith(eE)){let e=W.slice(0,n).concat(W.slice(t+1));K(e);return}e6(eR,r.id,e).then(e=>{if(e){v.A.error(e);return}let r=W.slice(0,n).concat(W.slice(t+1));K(r)})}},isThreadOwner:eW,onUpdateMessage:e$},children:(0,r.jsx)("div",{className:"transition-all",style:to,children:(0,r.jsxs)(D.pO,{direction:"vertical",onLayout:e=>{(null==e?void 0:e[1])&&eb(e[1])},children:[(0,r.jsxs)(D.ee,{children:[(0,r.jsx)(ey,{threadIdFromURL:eO,streamingDone:!e0}),(0,r.jsxs)("main",{className:"h-[calc(100%-4rem)] pb-8 lg:pb-0",children:[(0,r.jsx)(P.ScrollArea,{className:"h-full",ref:el,children:(0,r.jsx)("div",{className:"mx-auto px-4 pb-32 lg:max-w-4xl lg:px-0",children:(0,r.jsx)("div",{className:"flex flex-col",children:W.map((e,t)=>{let n=t===W.length-1;return e.role===N.uU.User?(0,r.jsx)(eS,{className:"pb-2 pt-8",message:e},e.id):e.role===N.uU.Assistant?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eo,{className:"pb-8 pt-2",message:e,isLoading:e0&&n,isLastAssistantMessage:n,showRelatedQuestion:n,isDeletable:!e0&&W.length>2},e.id),!n&&(0,r.jsx)(U.Z,{})]}):null})})})}),(0,r.jsx)(F.K,{className:(0,O.cn)("!fixed !bottom-[5.4rem] !right-4 !top-auto z-40 border-muted-foreground lg:!bottom-[2.85rem]",{hidden:eh}),container:el.current,offset:100,style:"dark"===em?{"--background":"0 0% 12%"}:{}}),(0,r.jsxs)("div",{className:(0,O.cn)("fixed bottom-5 left-0 z-30 flex min-h-[3rem] w-full flex-col items-center gap-y-2",{"opacity-100 translate-y-0":ea,"opacity-0 translate-y-10":!ea,hidden:eh}),style:Object.assign({transition:"all 0.35s ease-out"},"dark"===em?{"--background":"0 0% 12%"}:{}),children:[(0,r.jsxs)("div",{className:(0,O.cn)("absolute flex items-center gap-4"),style:eW?{top:"-2.5rem"}:void 0,children:[X&&(0,r.jsxs)(L.z,{className:"bg-background",variant:"outline",onClick:()=>e5(),children:[(0,r.jsx)($.IconStop,{className:"mr-2"}),"Stop generating"]}),!X&&(0,r.jsxs)(L.z,{className:"bg-background",variant:"outline",onClick:tr,children:[tn?(0,r.jsx)($.IconCheck,{className:"mr-2 text-green-600"}):(0,r.jsx)($.IconShare,{className:"mr-2"}),"Share Link"]})]}),eW&&(0,r.jsx)("div",{className:(0,O.cn)("relative z-20 flex justify-center self-stretch px-4"),children:(0,r.jsx)(H.Z,{onSearch:tl,className:"min-h-[5rem] lg:max-w-4xl",placeholder:"Ask a follow up question",isFollowup:!0,isLoading:e0,contextInfo:null==eD?void 0:eD.contextInfo,fetchingContextInfo:eP,modelName:e7,onModelSelect:e=>{(0,T.Eg)(e)},isModelLoading:e8,models:e9})})]})]})]}),(0,r.jsx)(D.Dp,{className:(0,O.cn)("hidden !h-[4px] border-none bg-background shadow-[0px_-4px_4px_rgba(0,0,0,0.2)] hover:bg-blue-500 active:bg-blue-500 dark:shadow-[0px_-4px_4px_rgba(255,255,255,0.2)]",eh&&"block")}),(0,r.jsx)(D.ee,{collapsible:!0,collapsedSize:0,defaultSize:0,ref:ep,onCollapse:()=>ef(!1),className:"z-50",children:(0,r.jsx)(ex,{onClose:()=>ef(!1),value:tt,isFullScreen:100===ej,onToggleFullScreen:e=>{var t;let n=eN.current;e?n=100:100===n&&(n=45),null===(t=ep.current)||void 0===t||t.resize(n),eb(n),eN.current=ej}})})]})})}):(0,r.jsx)(r.Fragment,{})}let eA=(0,b.BX)("\n  mutation SetThreadPersisted($threadId: ID!) {\n    setThreadPersisted(threadId: $threadId)\n  }\n"),eT=(0,b.BX)("\n  mutation UpdateThreadMessage($input: UpdateMessageInput!) {\n    updateThreadMessage(input: $input)\n  }\n");function ez(e){let{error:t}=e;return t.message===p.ir?(0,r.jsx)(V.default,{}):(0,r.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,r.jsx)(ey,{}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)($.IconFileSearch,{className:"h-6 w-6"}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Something went wrong"})]}),(0,r.jsx)("div",{children:"Failed to fetch the thread, please refresh the page or start a new thread"}),(0,r.jsxs)(a(),{href:"/",onClick:z.wh,className:(0,O.cn)((0,L.d)(),"mt-4 gap-2"),children:[(0,r.jsx)($.IconPlus,{}),(0,r.jsx)("span",{children:"New Thread"})]})]})})]})}function eM(e){let t,n=[],r=!1;if(e){var s,l,a,i;n=(0,m.Z)((0,c.Z)([null==e?void 0:null===(s=e.codeSourceIds)||void 0===s?void 0:s[0]].concat(e.docSourceIds))),r=null!==(a=e.searchPublic)&&void 0!==a&&a,t=null!==(i=null===(l=e.codeSourceIds)||void 0===l?void 0:l[0])&&void 0!==i?i:void 0}return{sourceIdsForDocQuery:n,sourceIdForCodeQuery:t,searchPublic:r}}},69579:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(36164),s=n(42891),l=n.n(s),a=n(70652),i=n.n(a),o=n(83332),c=n(76531),d=n(1544),u=n(68172),m=n(30601),h=n(63743),f=n(31458),x=n(52569),v=n(7449);function g(){let[e]=(0,m.Hb)(),t=e?{height:"calc(100vh - ".concat(m.wt,")")}:{height:"100vh"};return(0,r.jsxs)("div",{style:t,className:"flex flex-col",children:[(0,r.jsx)(p,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-center",children:[(0,r.jsx)("h2",{className:"mt-4 text-6xl font-bold tracking-tight text-foreground sm:text-7xl",children:"404"}),(0,r.jsx)("p",{className:"mt-4 text-lg text-muted-foreground",children:"Oops, it looks like the page you're looking for doesn't exist."}),(0,r.jsx)(i(),{className:(0,d.cn)("mt-6",(0,f.d)()),href:"/",children:"Home"})]})]})}function p(){return(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 lg:px-10",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(i(),{href:"/",children:[(0,r.jsx)(l(),{src:c.Z,alt:"logo",width:128,className:"dark:hidden"}),(0,r.jsx)(l(),{src:o.Z,alt:"logo",width:96,className:"hidden dark:block"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(u.q,{children:(0,r.jsx)(h.T,{})}),(0,r.jsx)(v.Z,{showSetting:!0,children:(0,r.jsx)(x.SQ,{className:"h-10 w-10 border"})})]})]})}},73460:function(e,t,n){"use strict";n.d(t,{OL:function(){return g},_T:function(){return m},aR:function(){return o},f$:function(){return x},fY:function(){return h},le:function(){return p},vW:function(){return c},xo:function(){return f},yT:function(){return v}});var r=n(36164),s=n(3546),l=n(28961),a=n(1544),i=n(31458);let o=l.fC,c=l.xz,d=e=>{let{className:t,children:n,...s}=e;return(0,r.jsx)(l.h_,{className:(0,a.cn)(t),...s,children:(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center sm:items-center",children:n})})};d.displayName=l.h_.displayName;let u=s.forwardRef((e,t)=>{let{className:n,children:s,...i}=e;return(0,r.jsx)(l.aV,{className:(0,a.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm transition-opacity animate-in fade-in",n),...i,ref:t})});u.displayName=l.aV.displayName;let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(l.VY,{ref:t,className:(0,a.cn)("fixed z-50 grid w-full max-w-lg scale-100 gap-4 border bg-background p-6 opacity-100 shadow-lg animate-in fade-in-90 slide-in-from-bottom-10 sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0 md:w-full",n),...s})]})});m.displayName=l.VY.displayName;let h=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...n})};h.displayName="AlertDialogHeader";let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};f.displayName="AlertDialogFooter";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(l.Dx,{ref:t,className:(0,a.cn)("text-lg font-semibold",n),...s})});x.displayName=l.Dx.displayName;let v=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(l.dk,{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...s})});v.displayName=l.dk.displayName;let g=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(l.aU,{ref:t,className:(0,a.cn)((0,i.d)(),n),...s})});g.displayName=l.aU.displayName;let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(l.$j,{ref:t,className:(0,a.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",n),...s})});p.displayName=l.$j.displayName},98150:function(e,t,n){"use strict";n.d(t,{NI:function(){return v},Wi:function(){return u},l0:function(){return c},lX:function(){return x},pf:function(){return g},xJ:function(){return f},zG:function(){return p}});var r=n(36164),s=n(3546),l=n(74047),a=n(5493),i=n(1544),o=n(5266);let c=a.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(d.Provider,{value:{name:t.name},children:(0,r.jsx)(a.Qr,{...t})})},m=()=>{let e=s.useContext(d),t=s.useContext(h),{getFieldState:n,formState:r}=(0,a.Gc)(),l=e.name||"root",i=n(l,r);if(!r)throw Error("useFormField should be used within <Form>");let{id:o}=t;return{id:o,name:l,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...i}},h=s.createContext({}),f=s.forwardRef((e,t)=>{let{className:n,...l}=e,a=s.useId();return(0,r.jsx)(h.Provider,{value:{id:a},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",n),...l})})});f.displayName="FormItem";let x=s.forwardRef((e,t)=>{let{className:n,required:s,...l}=e,{error:a,formItemId:c}=m();return(0,r.jsx)(o._,{ref:t,className:(0,i.cn)(a&&"text-destructive",s&&'after:ml-0.5 after:text-destructive after:content-["*"]',n),htmlFor:c,...l})});x.displayName="FormLabel";let v=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:a,formDescriptionId:i,formMessageId:o}=m();return(0,r.jsx)(l.g7,{ref:t,id:a,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...n})});v.displayName="FormControl";let g=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:l}=m();return(0,r.jsx)("div",{ref:t,id:l,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});g.displayName="FormDescription";let p=s.forwardRef((e,t)=>{let{className:n,children:s,...l}=e,{error:a,formMessageId:o}=m(),c=a?String(null==a?void 0:a.message):s;return c?(0,r.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",n),...l,children:c}):null});p.displayName="FormMessage"},53538:function(e,t,n){"use strict";n.d(t,{Dp:function(){return o},ee:function(){return i},pO:function(){return a}});var r=n(36164),s=n(6618),l=n(1544);let a=e=>{let{className:t,...n}=e;return(0,r.jsx)(s.eh,{className:(0,l.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...n})},i=s.s_,o=e=>{let{withHandle:t,className:n,...a}=e;return(0,r.jsx)(s.OT,{className:(0,l.cn)("border-bg relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",n),...a,children:t&&(0,r.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border"})})}},93877:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});var r=n(3546);let s=(e,t)=>{let[n,s]=(0,r.useState)(t),[l,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=localStorage.getItem(e);t&&s(JSON.parse(t)),a(!1)},[]),[n,t=>{s(t),localStorage.setItem(e,JSON.stringify(t))},l]};class l{get value(){if("undefined"!=typeof localStorage){let e=localStorage.getItem(this.storageKey);if(e)return"true"===e}return this.defaultValue}constructor(e,t,n,r){this.storageKey=e,this.title=t,this.description=n,this.defaultValue=r}}let a=new class{defineGlobalVar(){return new l(this.storageKey,this.title,this.description,this.defaultValue)}defineHook(){return()=>{let[e,t,n]=s(this.storageKey,this.defaultValue);return[{value:e,title:this.title,description:this.description,loading:n},()=>{t(!e)}]}}constructor(e,t,n,r){this.storageKey="EXP_".concat(e),this.title=t,this.description=n,this.defaultValue=null!=r&&r}}("enable_developer_mode","Developer Mode","Enable the developer mode. The features involved include the Answer Engine.",!1);a.defineGlobalVar();let i=a.defineHook()},44645:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(3546),s=n(11978);function l(){let e=(0,s.usePathname)(),t=(0,s.useRouter)(),n=(0,s.useSearchParams)(),l=(0,r.useCallback)(e=>{let t=new URLSearchParams(n);e&&Object.entries(e).forEach(e=>{let[n,r]=e;return t.set(n,r)});let r=t.toString();return r.length>0?"?".concat(r):""},[n]),a=(0,r.useCallback)(r=>{let s=function(e,t,n){var r,s;let l=null===(r=n.searchParams)||void 0===r?void 0:r.set,a=null===(s=n.searchParams)||void 0===s?void 0:s.del,i=new URLSearchParams(t);l&&Object.entries(l).forEach(e=>{let[t,n]=e;return i.set(t,n)}),a&&(Array.isArray(a)?a.forEach(e=>i.delete(e)):i.delete(a));let o=i.toString(),c=e;return o.length>0&&(c+="?".concat(o)),n.hash&&(c+="#".concat(n.hash.replace(/^#/,""))),c}((null==r?void 0:r.pathname)||e,n,r);return r.replace?t.replace(s):t.push(s),s},[e,n]);return{pathname:e,router:t,searchParams:n,getQueryString:l,updateUrlComponents:a}}},76531:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.526f7cf9.png",height:184,width:607,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASklEQVR4nGPsKQh1f/HshV/PqtNtagrC8p++//rDAgQM//9/ZWJifMZYnRqg9+bVq6iZ51+1SP/5ovH//z8eRgbGbwyMjPxA9n0AMi8g2L1xUkUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},67635:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(3546),s=n(94348),l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useSyncExternalStore,i=r.useRef,o=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var u=i(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var h=a(e,(u=c(function(){function e(e){if(!o){if(o=!0,a=e,e=r(e),void 0!==s&&m.hasValue){var t=m.value;if(s(t,e))return i=t}return i=e}if(t=i,l(a,e))return t;var n=r(e);return void 0!==s&&s(t,n)?t:(a=e,i=n)}var a,i,o=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,s]))[0],u[1]);return o(function(){m.hasValue=!0,m.value=h},[h]),d(h),h}},52635:function(e,t,n){"use strict";e.exports=n(67635)},74225:function(e,t,n){"use strict";n.d(t,{f:function(){return d}});var r=n(65122),s=n(3546),l=n(72205);let a="horizontal",i=["horizontal","vertical"],o=(0,s.forwardRef)((e,t)=>{let{decorative:n,orientation:i=a,...o}=e,d=c(i)?i:a;return(0,s.createElement)(l.WV.div,(0,r.Z)({"data-orientation":d},n?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},o,{ref:t}))});function c(e){return i.includes(e)}o.propTypes={orientation(e,t,n){let r=e[t],s=String(r);return r&&!c(r)?Error(`Invalid prop \`orientation\` of value \`${s}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${a}\`.`):null}};let d=o},82030:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(94219),s=n(79204),l=(0,n(43285).Z)(function(e,t){return null==e?{}:(0,r.Z)(e,t,function(t,n){return(0,s.Z)(e,n)})})},27257:function(e,t,n){"use strict";n.d(t,{Ue:function(){return m},oR:function(){return d}});let r=e=>{let t;let n=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,l={setState:r,getState:s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,s,l),l},s=e=>e?r(e):r;var l=n(3546),a=n(52635);let{useDebugValue:i}=l,{useSyncExternalStoreWithSelector:o}=a,c=!1;function d(e,t=e.getState,n){n&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let r=o(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return i(r),r}let u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,n=(e,n)=>d(t,e,n);return Object.assign(n,t),n},m=e=>e?u(e):u},85654:function(e,t,n){"use strict";n.d(t,{tJ:function(){return a}});let r=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>r(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>r(t)(e)}}},s=(e,t)=>(n,s,l)=>{let a,i,o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1,d=new Set,u=new Set;try{a=o.getStorage()}catch(e){}if(!a)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...e)},s,l);let m=r(o.serialize),h=()=>{let e;let t=o.partialize({...s()}),n=m({state:t,version:o.version}).then(e=>a.setItem(o.name,e)).catch(t=>{e=t});if(e)throw e;return n},f=l.setState;l.setState=(e,t)=>{f(e,t),h()};let x=e((...e)=>{n(...e),h()},s,l),v=()=>{var e;if(!a)return;c=!1,d.forEach(e=>e(s()));let t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,s()))||void 0;return r(a.getItem.bind(a))(o.name).then(e=>{if(e)return o.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return n(i=o.merge(e,null!=(t=s())?t:x),!0),h()}).then(()=>{null==t||t(i,void 0),c=!0,u.forEach(e=>e(i))}).catch(e=>{null==t||t(void 0,e)})};return l.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(a=e.getStorage())},clearStorage:()=>{null==a||a.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>v(),hasHydrated:()=>c,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},v(),i||x},l=(e,t)=>(n,s,l)=>{let a,i={storage:function(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;let s=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),l=null!=(r=n.getItem(e))?r:null;return l instanceof Promise?l.then(s):s(l)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,c=new Set,d=new Set,u=i.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...e)},s,l);let m=()=>{let e=i.partialize({...s()});return u.setItem(i.name,{state:e,version:i.version})},h=l.setState;l.setState=(e,t)=>{h(e,t),m()};let f=e((...e)=>{n(...e),m()},s,l),x=()=>{var e,t;if(!u)return;o=!1,c.forEach(e=>{var t;return e(null!=(t=s())?t:f)});let l=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=s())?e:f))||void 0;return r(u.getItem.bind(u))(i.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return e.state;if(i.migrate)return i.migrate(e.state,e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}}).then(e=>{var t;return n(a=i.merge(e,null!=(t=s())?t:f),!0),m()}).then(()=>{null==l||l(a,void 0),a=s(),o=!0,d.forEach(e=>e(a))}).catch(e=>{null==l||l(void 0,e)})};return l.persist={setOptions:e=>{i={...i,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},i.skipHydration||x(),a||f},a=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?(console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),s(e,t)):l(e,t)}},function(e){e.O(0,[8415,3078,753,1386,55,2922,4007,9643,4752,3449,2578,8511,240,2287,4421,1454,7070,8961,9610,4546,9275,9148,4405,4553,1266,5376,2902,4786,7045,1544,1565,3821,6919,9826,3375,5289,1744],function(){return e(e.s=72845)}),_N_E=e.O()}]);