(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1929],{78627:function(e,t,n){Promise.resolve().then(n.bind(n,7931))},7931:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(36164),o=n(3546),a=n(42891),l=n.n(a),i=n(11978),s=n(23342),u=n(94755),c=n(47190),d=n.n(c),f=n(42450),p=n(36982),m=n(93668),y=n(11075),h=n(14439),w=n(1544),g=n(31458),b=n(81565),v=n(66534),E=n(73033);n(2596);var x=n(66794);let S=e=>d()(e).hsl().toString().replace(/hsla?\(/,"").replace(")","").split(",").slice(0,3).map((e,t)=>0===t?parseFloat(e).toFixed(1):e).join("");function k(){let[e,t]=(0,o.useState)(!1),[n,a]=(0,o.useState)(null),[c,d]=(0,o.useState)(""),[k,j]=(0,o.useState)([]),[C,A]=(0,o.useState)([]),[_,M]=(0,o.useState)(null),[I,L]=(0,o.useState)(null),[K,N]=(0,o.useState)(!1),O=(0,o.useRef)(null),[R,P]=(0,o.useState)(!1),{width:T}=(0,u.iP)(),V=(0,o.useRef)(T),q=(0,o.useRef)(null),W=(0,i.useSearchParams)(),F=W.get("client"),Y=!!F||void 0,$=(0,o.useRef)(),[z,H]=(0,o.useState)(!1),[U,Z]=(0,o.useState)(!1),D=e=>{if(O.current)O.current.sendUserChat(e);else{let t=[...k];t.push(e),j(t)}},X=e=>{if(O.current)O.current.addRelevantContext(e);else{let t=[...C];t.push(e),A(t)}},B=(0,h.H)({init:e=>{O.current||(F&&(0,x.zr)(e.fetcherOptions),d((0,w.x0)()),t(!0),a(e.fetcherOptions),$.current=e.useMacOSKeyboardEventHandler)},sendMessage:e=>D(e),showError:e=>{L(e)},cleanError:()=>{L(null)},addRelevantContext:e=>X(e),updateTheme:(e,t)=>{let n=e.split(";").filter(e=>e).map(e=>{let[t,n]=e.split(":"),r=n.trim(),o=r.startsWith("#")||r.startsWith("rgb");if(!o)return"".concat(t,": ").concat(n);let a=S(r);return"".concat(t,": ").concat(a)}).join(";");document.documentElement.style.cssText=n,document.documentElement.className=t+" client client-".concat(F)},updateActiveSelection:e=>{O.current?O.current.updateActiveSelection(e):e&&M(e)}});(0,o.useEffect)(()=>{let e=()=>{setTimeout(()=>{var e;null===(e=q.current)||void 0===e||e.focus()},0)};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),(0,o.useEffect)(()=>{let e=(e,t)=>{null==B||B.onKeyboardEvent(e,{code:t.code,isComposing:t.isComposing,key:t.key,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,location:t.location,repeat:t.repeat,keyCode:t.keyCode})},t=t=>{$.current?t.metaKey&&"KeyC"===t.code?document.execCommand("copy"):t.metaKey&&"KeyX"===t.code?document.execCommand("cut"):t.metaKey&&"KeyV"===t.code?document.execCommand("paste"):t.metaKey&&"KeyA"===t.code?document.execCommand("selectAll"):e("keydown",t):e("keydown",t)},n=t=>{e("keyup",t)},r=t=>{e("keypress",t)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("keypress",r),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("keypress",r)}},[B,F]),(0,o.useEffect)(()=>{if(B){null==B||B.onLoaded({apiVersion:y.uL});let e=async()=>{null==B||B.hasCapability("onApplyInEditorV2").then(H),null==B||B.hasCapability("lookupSymbol").then(Z)};e()}},[B]),(0,o.useLayoutEffect)(()=>{if(R){if(T&&e&&n&&!I&&!V.current){var t;null===(t=O.current)||void 0===t||t.focus()}V.current=T}},[T,R]);let G=()=>{A([]),j([]),M(null)},J=async()=>{N(!0),await (null==B?void 0:B.refresh()),N(!1)};function Q(e){let{children:t}=e;return(0,r.jsxs)("div",{className:"h-screen w-screen",style:{padding:"intellij"==F?"20px":"5px 18px"},children:[(0,r.jsxs)("div",{className:"flex items-center",style:{marginBottom:"0.55em"},children:[(0,r.jsx)(l(),{src:s.Z,alt:"logo",className:"rounded-full",style:{background:"rgb(232, 226, 210)",marginRight:"0.375em",padding:"0.15em"},width:18}),(0,r.jsx)("p",{className:"font-semibold",children:"Tabby"})]}),t]})}return I?(0,r.jsx)(Q,{children:(0,r.jsxs)(r.Fragment,{children:[I.title&&(0,r.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:I.title}),(0,r.jsx)(E.s,{className:"prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[p.Z,m.Z],children:I.content}),(0,r.jsxs)(g.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:J,children:[K&&(0,r.jsx)(b.IconSpinner,{}),"Refresh"]})]})}):e&&n?(0,r.jsx)(f.SV,{FallbackComponent:function(e){let{error:t}=e;return(0,r.jsxs)(Q,{children:[(0,r.jsx)("p",{className:"mb-1.5 mt-2 font-semibold",children:"Something went wrong"}),(0,r.jsx)("p",{children:t.message}),(0,r.jsxs)(g.z,{className:"mt-5 flex items-center gap-x-2 text-sm leading-none",onClick:J,children:[K&&(0,r.jsx)(b.IconSpinner,{}),"Refresh"]})]})},children:(0,r.jsx)(v.e,{chatId:c,ref:O,chatInputRef:q,onNavigateToContext:(e,t)=>{null==B||B.navigate(e,t)},onLoaded:()=>{var e;C.forEach(X),k.forEach(D),null===(e=O.current)||void 0===e||e.updateActiveSelection(_),G(),P(!0)},maxWidth:"vscode"===F?"5xl":void 0,onCopyContent:Y&&(null==B?void 0:B.onCopy),onSubmitMessage:Y&&(null==B?void 0:B.onSubmitMessage),onApplyInEditor:Y&&(z?null==B?void 0:B.onApplyInEditorV2:null==B?void 0:B.onApplyInEditor),supportsOnApplyInEditorV2:z,onLookupSymbol:Y&&(U?null==B?void 0:B.lookupSymbol:void 0),openInEditor:Y&&(null==B?void 0:B.openInEditor)},c)}):(0,r.jsx)(Q,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"opacity-80",children:"Welcome to Tabby Chat! Just a moment while we get things ready..."}),(0,r.jsx)(b.IconSpinner,{className:"mx-auto",style:{marginTop:"1.25em",width:"0.875em",height:"0.875em"}})]})})}},2596:function(){},11075:function(e,t,n){"use strict";n.d(t,{eI:function(){return a},n0:function(){return l},uL:function(){return o}});var r=n(44494);let o="0.4.0";function a(e,t){return(0,r.K9)(e,{expose:{navigate:t.navigate,refresh:t.refresh,onSubmitMessage:t.onSubmitMessage,onApplyInEditor:t.onApplyInEditor,onApplyInEditorV2:t.onApplyInEditorV2,onLoaded:t.onLoaded,onCopy:t.onCopy,onKeyboardEvent:t.onKeyboardEvent,lookupSymbol:t.lookupSymbol,openInEditor:t.openInEditor}})}function l(e){return(0,r.cy)({expose:{init:e.init,sendMessage:e.sendMessage,showError:e.showError,cleanError:e.cleanError,addRelevantContext:e.addRelevantContext,updateTheme:e.updateTheme,updateActiveSelection:e.updateActiveSelection}})}},14439:function(e,t,n){"use strict";n.d(t,{H:function(){return l},m:function(){return a}});var r=n(3546),o=n(11075);function a(e,t){let[n,a]=(0,r.useState)(null),l=!1;return(0,r.useEffect)(()=>{e.current&&!l&&(l=!0,a((0,o.eI)(e.current,t)))},[e.current]),n}function l(e){let[t,n]=(0,r.useState)(null),a=!1;return(0,r.useEffect)(()=>{let t=window.self!==window.top;t&&!a&&(a=!0,n((0,o.n0)(e)))},[]),t}n(44494)},44494:function(e,t,n){"use strict";n.d(t,{K9:function(){return g},cy:function(){return b}});let r=Symbol.for("quilt.threads.retain"),o=Symbol.for("quilt.threads.release"),a=Symbol.for("quilt.threads.retained-by"),l=Symbol.for("quilt.threads.encode"),i=Symbol.for("quilt.threads.transferable");class s{memoryManaged=new Set;add(e){this.memoryManaged.add(e),e[a].add(this),e[r]()}release(){for(let e of this.memoryManaged)e[a].delete(this),e[o]();this.memoryManaged.clear()}}function u(e){return!!(e&&e[r]&&e[o])}function c(e){if(null==e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return null==t||t===Object.prototype}function d(e,{expose:t,callable:n,signal:d,uuid:m=p,encoder:y=function({encode:e,decode:t}={}){return{encode:function(e,t){let r={api:t,seen:new Map,encode:e=>n(e,r,!0)};return n(e,r)},decode:function(e,t,n){let o={api:t,decode:e=>r(e,o,n,!0)};return r(e,o)}};function n(t,r,o=!1){let{seen:a,api:s,encode:u}=r;if(!o&&e)return e(t,u);if(null==t)return[t];let d=a.get(t);if(d)return d;if(a.set(t,[void 0]),"object"==typeof t){if(t[i]){let e=[t,[t]];return a.set(t,e),e}let e=[],o=t=>{let[o,a=[]]=n(t,r);return e.push(...a),o};if("function"==typeof t[l]){let n=t[l]({encode:o}),r=[n,e];return a.set(t,r),r}if(Array.isArray(t)){let n=t.map(e=>o(e)),r=[n,e];return a.set(t,r),r}if(t instanceof RegExp){let n={"_@r":[t.source,t.flags]},r=[n,e];return a.set(t,r),r}if(t instanceof URL){let n={"_@u":t.href},r=[n,e];return a.set(t,r),r}if(t instanceof Date){let n={"_@d":t.toISOString()},r=[n,e];return a.set(t,r),r}if(t instanceof Map){let n=[...t.entries()].map(([e,t])=>[o(e),o(t)]),r=[{"_@m":n},e];return a.set(t,r),r}if(t instanceof Set){let n=[...t].map(e=>o(e)),r=[{"_@s":n},e];return a.set(t,r),r}let s=null!=t&&(Symbol.asyncIterator in t||Symbol.iterator in t)&&"function"==typeof t.next;if(c(t)||s){let n={};for(let e of Object.keys(t))n[e]=o(t[e]);s&&(n.next??=o(t.next.bind(t)),n.return??=o(t.return.bind(t)),n.throw??=o(t.throw.bind(t)),n["_@i"]=!0);let r=[n,e];return a.set(t,r),r}}if("function"==typeof t){let e=s.functions?.add(t);if(null==e)return[e];let n=[{"_@f":e}];return a.set(t,n),n}let f=[t];return a.set(t,f),f}function r(e,n,o,a=!1){let{api:l,decode:i}=n;if(!a&&t)return t(e,i,o);if("object"==typeof e){if(null==e)return e;if(Array.isArray(e))return e.map(e=>r(e,n,o));if("_@r"in e)return new RegExp(...e["_@r"]);if("_@u"in e)return new URL(e["_@u"]);if("_@d"in e)return new Date(e["_@d"]);if("_@m"in e)return new Map(e["_@m"].map(([e,t])=>[r(e,n,o),r(t,n,o)]));if("_@s"in e)return new Set(e["_@s"].map(e=>r(e,n,o)));if("_@f"in e){let t=e["_@f"],n=l.functions?.get(t);if(o&&u(n))for(let e of o)e.add(n);return n}if(!c(e))return e;let t={};for(let a of Object.keys(e))"_@i"===a?t[Symbol.asyncIterator]=()=>t:t[a]=r(e[a],n,o);return t}return e}}()}={}){let h=!1,w=new Map,g=new Map,b=new Map,v=new Map;if(t)for(let e of Object.keys(t)){let n=t[e];"function"==typeof n&&w.set(e,n)}let E=new Map,x=function(e,t){let n;if(null==t){if("function"!=typeof Proxy)throw Error("You must pass an array of callable methods in environments without Proxies.");let t=new Map;n=new Proxy({},{get(n,r){if(t.has(r))return t.get(r);let o=e(r);return t.set(r,o),o}})}else for(let r of(n={},t))Object.defineProperty(n,r,{value:e(r),writable:!1,configurable:!0,enumerable:!0});return n}(function(e){return(...t)=>{try{if(h)throw new f;if("string"!=typeof e&&"number"!=typeof e)throw Error(`Canâ€™t call a symbol method on a thread: ${e.toString()}`);if("hasCapability"===e){let e=t[0],n=m(),r=A(n);return j(7,[n,e]),r}let n=m(),r=A(n),[o,a]=y.encode(t,S);return j(0,[n,e,o],a),r}catch(e){return Promise.reject(e)}}},n),S={functions:{add(e){let t=g.get(e);return null==t&&(t=m(),g.set(e,t),b.set(t,e)),t},get(e){let t=v.get(e);if(t)return t;let n=0,l=!1;return Object.defineProperties(t=(...t)=>{if(l)throw Error("You attempted to call a function that was already released.");if(!v.has(e))throw Error("You attempted to call a function that was already revoked.");let[n,r]=y.encode(t,S),o=m(),a=A(o);return j(5,[o,e,n],r),a},{[o]:{value:()=>{0==(n-=1)&&(l=!0,v.delete(e),j(3,[e]))},writable:!1},[r]:{value:()=>{n+=1},writable:!1},[a]:{value:new Set,writable:!1}}),v.set(e,t),t}}},k=()=>{if(!h){for(let e of E.keys())_(e,new f);h=!0,w.clear(),E.clear(),g.clear(),b.clear(),v.clear()}};return d?.addEventListener("abort",()=>{j(2,[]),k()},{once:!0}),e.listen(C,{signal:d}),x;function j(t,n,r){h||e.send([t,n],r)}async function C(e){let t=Array.isArray(e)&&"number"==typeof e[0]&&(null==e[1]||Array.isArray(e[1]));if(t)switch(e[0]){case 2:k();break;case 0:{let t=new s,[n,r,o]=e[1],a=w.get(r);try{if(null==a)throw Error(`No '${r}' method is exposed on this endpoint`);let e=await a(...y.decode(o,S,[t])),[l,i]=y.encode(e,S);j(1,[n,void 0,l],i)}catch(o){let{name:e,message:t,stack:r}=o;j(1,[n,{name:e,message:t,stack:r}])}finally{t.release()}break}case 1:case 6:_(...e[1]);break;case 3:{let[t]=e[1],n=b.get(t);n&&(b.delete(t),g.delete(n));break}case 5:{let[t,n,r]=e[1],o=new s;try{let e=b.get(n);if(null==e)throw Error("You attempted to call a function that was already released.");let l=await e(...y.decode(r,S,u(e)?[...e[a],o]:[o])),[i,s]=y.encode(l,S);j(6,[t,void 0,i],s)}catch(o){let{name:e,message:n,stack:r}=o;j(6,[t,{name:e,message:n,stack:r}])}finally{o.release()}break}case 7:{let[t,n]=e[1],r=w.has(n);j(1,[t,void 0,y.encode(r,S)[0]])}}}function A(e){let t=new Promise((t,n)=>{E.set(e,(e,r,o)=>{if(null==r)t(y.decode(o,S));else{let e=Error();Object.assign(e,r),n(e)}})});return Object.defineProperty(t,Symbol.asyncIterator,{async *value(){let e=await t;Object.defineProperty(e,Symbol.asyncIterator,{value:()=>e}),yield*e}}),t}function _(...e){let t=e[0],n=E.get(t);n&&(n(...e),E.delete(t))}}class f extends Error{constructor(){super("You attempted to call a function on a terminated thread.")}}function p(){return`${m()}-${m()}-${m()}-${m()}`}function m(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}var y=n(18400);let h="quilt.threads.ping",w="quilt.threads.pong";function g(e,{targetOrigin:t="*",...n}={}){let r=!1,o=function(n,r){e.contentWindow?.postMessage(n,t,r)},a=new Promise(t=>{let a=n.signal?new y.z(n.signal):new AbortController;window.addEventListener("message",n=>{n.source===e.contentWindow&&n.data===w&&(r=!0,a.abort(),t())},{signal:a.signal}),a.signal.addEventListener("abort",()=>{t()},{once:!0}),o(h)});return d({send:(e,t)=>r?o(e,t):a.then(()=>{if(r)return o(e,t)}),listen(t,{signal:n}){self.addEventListener("message",n=>{n.source===e.contentWindow&&n.data!==w&&t(n.data)},{signal:n})}},n)}function b({targetOrigin:e="*",...t}={}){if("undefined"==typeof self||null==self.parent)throw Error("You are not inside an iframe, because there is no parent window.");let{parent:n}=self,r=t.signal?new y.z(t.signal):new AbortController,o=()=>{let r=()=>n.postMessage(w,e);self.addEventListener("message",({data:e})=>{e===h&&r()},{signal:t.signal}),r()};return"complete"===document.readyState?o():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&(o(),r.abort())},{signal:r.signal}),d({send:(t,r)=>n.postMessage(t,e,r),listen(e,{signal:t}){self.addEventListener("message",t=>{t.data!==h&&e(t.data)},{signal:t})}},t)}}},function(e){e.O(0,[8415,3078,753,1386,55,3126,9643,4752,3449,2578,8511,4421,1454,7070,9610,4546,3299,9275,4405,5083,8756,1266,440,4755,7732,2763,1544,1565,3821,5871,6534,3375,5289,1744],function(){return e(e.s=78627)}),_N_E=e.O()}]);