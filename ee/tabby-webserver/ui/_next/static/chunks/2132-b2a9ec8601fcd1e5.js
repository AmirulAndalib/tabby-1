(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2132],{72657:function(e,n,s){"use strict";s.d(n,{K:function(){return o}});var t=s(36164);s(3546);var r=s(12624),a=s(1544),i=s(31458),l=s(81565);function o(e){let{className:n,container:s,offset:o,...d}=e,c=(0,r.e)(o||0,s);return(0,t.jsxs)(i.z,{variant:"outline",size:"icon",className:(0,a.cn)("absolute right-4 top-1 z-10 bg-background transition-opacity duration-300 sm:right-8 md:top-2",c?"opacity-0":"opacity-100",n),onClick:()=>{s?s.scrollTo({top:s.scrollHeight,behavior:"smooth"}):window.scrollTo({top:document.body.offsetHeight,behavior:"smooth"})},...d,children:[(0,t.jsx)(l.IconArrowDown,{}),(0,t.jsx)("span",{className:"sr-only",children:"Scroll to bottom"})]})}},90168:function(e,n,s){"use strict";s.d(n,{q:function(){return p}});var t=s(36164),r=s(3546),a=s(74630),i=s(1544),l=s(29),o=s(43739),d=s(14079);let c=o.fC,u=r.forwardRef((e,n)=>{let{className:s,...r}=e;return(0,t.jsx)(o.ck,{ref:n,className:(0,i.cn)("border-b",s),...r})});u.displayName="AccordionItem";let m=r.forwardRef((e,n)=>{let{className:s,children:r,...a}=e;return(0,t.jsxs)(o.xz,{ref:n,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...a,children:[r,(0,t.jsx)(d.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})});m.displayName=o.xz.displayName;let h=r.forwardRef((e,n)=>{let{className:s,children:r,...a}=e;return(0,t.jsx)(o.VY,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:(0,t.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",s),children:r})})});h.displayName=o.VY.displayName;var f=s(81565);let p=(0,r.forwardRef)((e,n)=>{var s,a;let{contexts:l,userContexts:o,className:d,triggerClassname:f,onContextClick:p,enableTooltip:v,onTooltipClick:g,highlightIndex:j,showExternalLink:N}=e,b=((null==o?void 0:o.length)||0)+l.length,w=null!==(s=null==l?void 0:l.length)&&void 0!==s?s:0,C=null!==(a=null==o?void 0:o.length)&&void 0!==a?a:0,y=w+C,[A,k]=(0,r.useState)(y<=5?"references":void 0);return((0,r.useEffect)(()=>{y<=5?k("references"):k(void 0)},[y]),0===b)?null:(0,t.jsx)(c,{type:"single",collapsible:!0,className:(0,i.cn)("bg-transparent text-foreground",d),ref:n,value:A,onValueChange:k,children:(0,t.jsxs)(u,{value:"references",className:"my-0 border-0",children:[(0,t.jsx)(m,{className:(0,i.cn)("my-0 py-2 font-semibold",f),children:(0,t.jsx)("span",{className:"mr-2",children:"Read ".concat(b," file").concat(b>1?"s":"")})}),(0,t.jsxs)(h,{className:"space-y-2",children:[null==o?void 0:o.map((e,n)=>(0,t.jsx)(x,{context:e,onContextClick:e=>null==p?void 0:p(e,!0),isHighlighted:j===n},"user-".concat(n))),l.map((e,n)=>(0,t.jsx)(x,{context:e,onContextClick:e=>null==p?void 0:p(e,!1),enableTooltip:v,onTooltipClick:g,showExternalLinkIcon:N,isHighlighted:j===n+((null==o?void 0:o.length)||0)},"assistant-".concat(n)))]})]})})});function x(e){var n,s,o,d,c,u,m;let{context:h,clickable:p=!0,onContextClick:x,enableTooltip:v,onTooltipClick:g,showExternalLinkIcon:j,isHighlighted:N}=e,[b,w]=(0,r.useState)(!1),C=!(0,a.Z)(null===(n=h.range)||void 0===n?void 0:n.start)&&!(0,a.Z)(null===(s=h.range)||void 0===s?void 0:s.end)&&h.range.start<h.range.end,y=h.filepath.split("/"),A=y[y.length-1],k=y.slice(0,y.length-1).join("/"),T=null==h?void 0:null===(o=h.extra)||void 0===o?void 0:o.scores;return(0,t.jsxs)(l.u,{open:b,onOpenChange:e=>{v&&T&&w(e)},delayDuration:0,children:[(0,t.jsx)(l.aJ,{asChild:!0,children:(0,t.jsx)("div",{className:(0,i.cn)("rounded-md border p-2",{"cursor-pointer hover:bg-accent":p,"cursor-default pointer-events-auto":!p,"bg-accent transition-all":N}),onClick:e=>p&&(null==x?void 0:x(h)),children:(0,t.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden",children:[(0,t.jsx)(f.IconFile,{className:"shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 truncate",title:h.filepath,children:[(0,t.jsx)("span",{children:A}),(null===(d=h.range)||void 0===d?void 0:d.start)&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:[":",h.range.start]}),C&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:["-",h.range.end]}),(0,t.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:k})]}),j&&(0,t.jsx)(f.IconExternalLink,{className:"shrink-0 text-muted-foreground"})]})})}),(0,t.jsx)(l._v,{align:"start",onClick:g,className:"cursor-pointer p-2",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 font-semibold",children:"Scores"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"w-20",children:"rrf:"}),null!==(c=null==T?void 0:T.rrf)&&void 0!==c?c:"-"]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"w-20",children:"bm25:"}),null!==(u=null==T?void 0:T.bm25)&&void 0!==u?u:"-"]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"w-20",children:"embedding:"}),null!==(m=null==T?void 0:T.embedding)&&void 0!==m?m:"-"]})]})]})})]})}p.displayName="CodeReferences"},73033:function(e,n,s){"use strict";s.d(n,{s:function(){return i}});var t=s(36164),r=s(3546),a=s(52991);let i=(0,r.memo)(e=>(0,t.jsx)(a.D,{linkTarget:"_blank",...e}),(e,n)=>e.children===n.children&&e.className===n.className)},83171:function(e,n,s){"use strict";s.d(n,{p:function(){return o},t:function(){return d}});var t=s(36164);s(3546);var r=s(68035),a=s(18500),i=s(1544),l=s(81565);function o(e){let{kind:n,label:s,className:a}=e;return(0,t.jsxs)(r.T5,{as:"span",className:(0,i.cn)("source-mention rounded-sm px-1",a),children:[(0,t.jsx)(c,{kind:n,className:"self-center"}),(0,t.jsx)("span",{children:s})]})}function d(e){let{kind:n,label:s,id:r}=e.node.attrs;return(0,t.jsx)(o,{kind:n,label:s,id:r})}function c(e){let{kind:n,...s}=e;switch(n){case a.ri.Doc:return(0,t.jsx)(l.IconEmojiBook,{...s});case a.ri.Web:return(0,t.jsx)(l.IconEmojiGlobe,{...s});case a.ri.Git:return(0,t.jsx)(l.IconCode,{...s});case a.ri.Github:return(0,t.jsx)(l.IconGitHub,{...s});case a.ri.Gitlab:return(0,t.jsx)(l.IconGitLab,{...s});default:return null}}},10279:function(e,n,s){"use strict";s.d(n,{mE:function(){return R},JG:function(){return z},V$:function(){return P}});var t=s(36164),r=s(3546),a=s(42891),i=s.n(a),l={src:"/_next/static/media/default-favicon.a2df8fbb.png",height:16,width:16,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABAElEQVR42mOAAqaMgrXeIYlL2jwjF7WZey7wBolB5eyZotNX1PdMO/Br466r/89dfvx/w7aLv6LSlteDFem5zPPesPXir20Hbv7ftPfGrz9///969urL/xkLj/0KjlvqzZCct6rt9r3X/w+cvP/r8fOP/0Hg/uN3vzbsvPq/rmVzG0Nk+oq2J8/f///89devOw/f/n/7/uv/T19+/Dpx7uH/3NK1bQwMarO8tu66/Auk89qd17/mrzn/682H7//3H7rxi4FhsheDDYMhU0DC0vqde6/+On/lyf/5q878X7Tq9M+E7JX1cJ/4MpgzMajO9ApNXtoWl7mszc5nvhdMEgB1uZJfA01kRAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},o=s(62226),d=s.n(o),c=s(6797),u=s.n(c),m=s(1853),h=s(74630),f=s(66686),p=s(36982),x=s(93668),v=s(1544),g=s(94744),j=s(37064),N=s(83008),b=s(28312),w=s(31458),C=s(81565),y=s(29);let A=(0,r.memo)(e=>{let{language:n,value:s,onCopyContent:a,onApplyInEditor:i,canWrapLongLines:l}=e,[o,d]=(0,r.useState)(!1),{isCopied:c,copyToClipboard:u}=(0,b.m)({timeout:2e3,onCopyContent:a});return(0,t.jsxs)("div",{className:"codeblock relative w-full bg-zinc-950 font-sans",children:[(0,t.jsxs)("div",{className:"flex w-full items-center justify-between bg-zinc-800 px-6 py-2 pr-4 text-zinc-100",children:[(0,t.jsx)("span",{className:"text-xs lowercase",children:n}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[l&&(0,t.jsxs)(y.u,{children:[(0,t.jsx)(y.aJ,{asChild:!0,children:(0,t.jsx)(w.z,{size:"icon",variant:"ghost",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>d(!o),children:o?(0,t.jsx)(C.IconAlignJustify,{}):(0,t.jsx)(C.IconWrapText,{})})}),(0,t.jsx)(y._v,{children:(0,t.jsx)("p",{className:"m-0",children:"Toggle word wrap"})})]}),i&&(0,t.jsxs)(y.u,{children:[(0,t.jsx)(y.aJ,{asChild:!0,children:(0,t.jsxs)(w.z,{variant:"ghost",size:"icon",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>i(s),children:[(0,t.jsx)(C.IconApplyInEditor,{}),(0,t.jsx)("span",{className:"sr-only",children:"Apply in Editor"})]})}),(0,t.jsx)(y._v,{children:(0,t.jsx)("p",{className:"m-0",children:"Apply in Editor"})})]}),(0,t.jsxs)(y.u,{children:[(0,t.jsx)(y.aJ,{asChild:!0,children:(0,t.jsxs)(w.z,{variant:"ghost",size:"icon",className:"text-xs hover:bg-[#3C382F] hover:text-[#F4F4F5] focus-visible:ring-1 focus-visible:ring-slate-700 focus-visible:ring-offset-0",onClick:()=>{c||u(s)},children:[c?(0,t.jsx)(C.IconCheck,{}):(0,t.jsx)(C.IconCopy,{}),(0,t.jsx)("span",{className:"sr-only",children:"Copy"})]})}),(0,t.jsx)(y._v,{children:(0,t.jsx)("p",{className:"m-0",children:"Copy"})})]})]})]}),(0,t.jsx)(g.Z,{language:"toml"===n?"bash":n,style:N.RY,PreTag:"div",showLineNumbers:!0,wrapLongLines:o,customStyle:{margin:0,width:"100%",background:"transparent",padding:"1.5rem 1rem"},codeTagProps:{style:{fontSize:"0.9rem",fontFamily:"var(--font-mono)"}},renderer:e=>{let{rows:n,stylesheet:s,useInlineStyles:t}=e;return n.map((e,n)=>{let r=e.children,a=null==r?void 0:r.shift();return a&&(e.children=[a,{children:r,properties:{className:[]},tagName:"span",type:"element"}]),(0,j.ZP)({node:e,stylesheet:s,useInlineStyles:t,key:n})})},children:s})]})});A.displayName="CodeBlock";var k=s(90615),T=s(73033);s(80804);var M=s(74038),I=s(83171),E=s(3448);let L=e=>{let n=d().sanitize(e,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]}),s=f.TU.parse(n),t=u().decode(s),r=t.replace(/<\/?[^>]+(>|$)/g,"");return r},_=(0,r.createContext)({});function z(e){let{message:n,headline:s=!1,attachmentDocs:a,attachmentCode:i,onApplyInEditor:l,onCopyContent:o,contextInfo:d,fetchingContextInfo:c,className:u,canWrapLongLines:f,...g}=e,j=(0,r.useMemo)(()=>{var e,n;let s=null!==(e=null==a?void 0:a.map(e=>({type:"doc",data:e})))&&void 0!==e?e:[],t=null!==(n=null==i?void 0:i.map(e=>({type:"code",data:e})))&&void 0!==n?n:[];return(0,m.Z)([...s,...t])},[a,i]),N=e=>{let n;let r=[],a=0,i=e=>{e&&r.push(e)},l=(s,l,o)=>{for(;null!==(n=s.exec(e));)i(e.slice(a,n.index)),r.push((0,t.jsx)(l,{...o(n)},n.index)),a=n.index+n[0].length};return l(M.H,D,e=>{let n=parseInt(e[1],10),s=(0,h.Z)(n)?void 0:null==j?void 0:j[n-1],t=null==s?void 0:s.type,r=s&&!(0,h.Z)(n);return{citationIndex:n,showcitation:r,citationType:t,citationSource:s}}),l(M.z,S,e=>{let n=e[1];return{sourceId:n,className:s?"text-[1rem] font-semibold":void 0}}),i(e.slice(a)),r};return(0,t.jsx)(_.Provider,{value:{onCopyContent:o,onApplyInEditor:l,onCodeCitationClick:g.onCodeCitationClick,onCodeCitationMouseEnter:g.onCodeCitationMouseEnter,onCodeCitationMouseLeave:g.onCodeCitationMouseLeave,contextInfo:d,fetchingContextInfo:!!c,canWrapLongLines:!!f},children:(0,t.jsx)(T.s,{className:(0,v.cn)("message-markdown prose max-w-none break-words dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",u),remarkPlugins:[p.Z,x.Z],components:{p(e){let{children:n}=e;return(0,t.jsx)("p",{className:"mb-2 last:mb-0",children:n.map((e,n)=>"string"==typeof e?N(e):(0,t.jsx)("span",{children:e},n))})},li(e){let{children:n}=e;return n&&n.length?(0,t.jsx)("li",{children:n.map((e,n)=>"string"==typeof e?N(e):(0,t.jsx)("span",{children:e},n))}):(0,t.jsx)("li",{children:n})},code(e){let{node:n,inline:s,className:r,children:a,...i}=e;if(a.length){if("▍"==a[0])return(0,t.jsx)("span",{className:"mt-1 animate-pulse cursor-default",children:"▍"});a[0]=a[0].replace("`▍`","▍")}let d=/language-(\w+)/.exec(r||"");return s?(0,t.jsx)("code",{className:r,...i,children:a}):(0,t.jsx)(O,{language:d&&d[1]||"",value:String(a).replace(/\n$/,""),onApplyInEditor:l,onCopyContent:o,canWrapLongLines:f,...i},Math.random())}},children:n})})}function R(e){let{error:n="Failed to fetch"}=e,s=(0,r.useMemo)(()=>"```\n"+JSON.stringify({error:!0,message:n},null,2)+"\n```",[n]);return(0,t.jsx)(T.s,{className:"prose-full-width prose break-words text-sm dark:prose-invert prose-p:leading-relaxed prose-pre:mt-1 prose-pre:p-0",remarkPlugins:[p.Z,x.Z],components:{code(e){let{node:n,inline:s,className:r,children:a,...i}=e;return(0,t.jsx)("div",{...i,className:(0,v.cn)(r,"bg-zinc-950 p-2"),children:a})}},children:s})}function O(e){let{canWrapLongLines:n}=(0,r.useContext)(_);return(0,t.jsx)(A,{...e,canWrapLongLines:n})}function D(e){let{citationIndex:n,showcitation:s,citationType:r,citationSource:a}=e;return(0,t.jsx)("div",{className:"inline",children:s&&(0,t.jsx)(t.Fragment,{children:"doc"===r?(0,t.jsx)(F,{relevantDocument:a.data,citationIndex:n}):"code"===r?(0,t.jsx)(Z,{relevantCode:a.data,citationIndex:n}):null})})}function S(e){var n;let{sourceId:s,className:a}=e,{contextInfo:i,fetchingContextInfo:l}=(0,r.useContext)(_);if(!s)return null;let o=null==i?void 0:null===(n=i.sources)||void 0===n?void 0:n.find(e=>e.sourceId===s);return o?(0,t.jsx)("span",{className:"node-mention",children:(0,t.jsx)("span",{children:l?(0,t.jsx)(E.O,{className:"w-16"}):(0,t.jsx)(I.p,{id:o.sourceId,label:o.sourceName,kind:o.sourceKind,className:a})})}):null}function F(e){let{relevantDocument:n,citationIndex:s}=e,r=n?new URL(n.link):null;return(0,t.jsxs)(k.zs,{children:[(0,t.jsx)(k.Yi,{children:(0,t.jsx)("span",{className:"relative -top-2 mr-0.5 inline-block h-4 w-4 cursor-pointer rounded-full bg-muted text-center text-xs font-medium",onClick:()=>window.open(n.link),children:s})}),(0,t.jsx)(k.bZ,{className:"w-96 text-sm",children:(0,t.jsxs)("div",{className:"flex w-full flex-col gap-y-1",children:[(0,t.jsxs)("div",{className:"m-0 flex items-center space-x-1 text-xs leading-none text-muted-foreground",children:[(0,t.jsx)(P,{hostname:r.hostname,className:"m-0 mr-1 leading-none"}),(0,t.jsx)("p",{className:"m-0 leading-none",children:r.hostname})]}),(0,t.jsx)("p",{className:"m-0 cursor-pointer font-bold leading-none transition-opacity hover:opacity-70",onClick:()=>window.open(n.link),children:n.title}),(0,t.jsx)("p",{className:"m-0 line-clamp-4 leading-none",children:L(n.content)})]})})]})}function Z(e){let{relevantCode:n,citationIndex:s}=e,{onCodeCitationClick:a,onCodeCitationMouseEnter:i,onCodeCitationMouseLeave:l}=(0,r.useContext)(_);return(0,t.jsx)("span",{className:"relative -top-2 mr-0.5 inline-block h-4 w-4 cursor-pointer rounded-full bg-muted text-center text-xs font-medium",onClick:()=>{null==a||a(n)},onMouseEnter:()=>{null==i||i(s)},onMouseLeave:()=>{null==l||l(s)},children:s})}function P(e){let{hostname:n,className:s}=e,[a,o]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"relative h-3.5 w-3.5",children:[(0,t.jsx)(i(),{src:l,alt:n,width:14,height:14,className:(0,v.cn)("absolute left-0 top-0 z-0 h-3.5 w-3.5 rounded-full leading-none",s)}),(0,t.jsx)(i(),{src:"https://s2.googleusercontent.com/s2/favicons?sz=128&domain_url=".concat(n),alt:n,width:14,height:14,className:(0,v.cn)("relative z-10 h-3.5 w-3.5 rounded-full bg-card leading-none",s,{"opacity-0":!a}),onLoad:()=>{o(!0)}})]})}},90379:function(e,n,s){"use strict";s.d(n,{PF:function(){return o},cg:function(){return i},tB:function(){return l}});var t=s(36164),r=s(1544),a=s(3448);let i=e=>{let{className:n,...s}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("space-y-3",n),...s,children:[(0,t.jsx)(a.O,{className:"h-4 w-full"}),(0,t.jsx)(a.O,{className:"h-4 w-full"}),(0,t.jsx)(a.O,{className:"h-4 w-full"}),(0,t.jsx)(a.O,{className:"h-4 w-full"})]})},l=e=>{let{className:n,...s}=e;return(0,t.jsx)(a.O,{className:(0,r.cn)("h-4 w-full",n),...s})},o=e=>{let{className:n,...s}=e;return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-3",n),...s,children:[(0,t.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,t.jsx)(a.O,{className:"h-4 w-full"}),(0,t.jsx)(a.O,{className:"h-4 w-[20%]"}),(0,t.jsx)(a.O,{className:"h-4 w-full"})]})}},90615:function(e,n,s){"use strict";s.d(n,{Yi:function(){return o},bZ:function(){return d},zs:function(){return l}});var t=s(36164),r=s(3546),a=s(38421),i=s(1544);let l=a.fC,o=a.xz,d=r.forwardRef((e,n)=>{let{className:s,align:r="center",sideOffset:l=4,...o}=e;return(0,t.jsx)(a.VY,{ref:n,align:r,sideOffset:l,className:(0,i.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})});d.displayName=a.VY.displayName},52569:function(e,n,s){"use strict";s.d(n,{SQ:function(){return b},Yt:function(){return N},nY:function(){return j}});var t=s(36164),r=s(3546),a=s(87782),i=s(21454),l=s(36327),o=s(98454),d=s(3765),c=s(1544),u=s(66612);let m=r.forwardRef((e,n)=>{let{className:s,...r}=e;return(0,t.jsx)(u.fC,{ref:n,className:(0,c.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});m.displayName=u.fC.displayName;let h=r.forwardRef((e,n)=>{let{className:s,...r}=e;return(0,t.jsx)(u.Ee,{ref:n,className:(0,c.cn)("aspect-square h-full w-full",s),...r})});h.displayName=u.Ee.displayName;let f=r.forwardRef((e,n)=>{let{className:s,...r}=e;return(0,t.jsx)(u.NY,{ref:n,className:(0,c.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});f.displayName=u.NY.displayName;var p=s(3448),x=s(30410).lW;let v="not_found",g=new Set,j=e=>{g.delete(e),(0,i.JG)("/avatar/".concat(e))};function N(e){var n;let{user:s,className:i,fallback:o}=e,u=null==s?void 0:s.id,j=u?"/avatar/".concat(u):null,{data:N,isLoading:b,error:w}=(0,l.Z)(j,e=>{if(!(!u||g.has(u)))return(0,d.Z)(e,{responseFormatter:async e=>{let n=await e.blob(),s=x.from(await n.arrayBuffer());return"data:image/png;base64,".concat(s.toString("base64"))},errorHandler:e=>{if(404===e.status)throw Error(v)}})}),C=r.useMemo(()=>{if(null==s?void 0:s.email)return(0,a.B)(s.email)},[null==s?void 0:s.email]);return b?(0,t.jsx)(p.O,{className:(0,c.cn)("h-16 w-16 rounded-full",i)}):((null==w?void 0:w.message)===v&&u&&g.add(u),N||C||!o)?!N&&C?(0,t.jsx)(a.Z,{className:(0,c.cn)("h-16 w-16",i),...C}):(0,t.jsxs)(m,{className:(0,c.cn)("h-16 w-16",i),children:[(0,t.jsx)(h,{src:N,alt:null==s?void 0:s.email,className:"object-cover"}),(0,t.jsx)(f,{children:null==s?void 0:null===(n=s.email)||void 0===n?void 0:n.substring(0,2)})]}):o}function b(e){let[{data:n}]=(0,o.P)();return(0,t.jsx)(N,{user:null==n?void 0:n.me,...e})}},21808:function(e,n,s){"use strict";s.d(n,{$6:function(){return a},L8:function(){return r},ir:function(){return i},o0:function(){return t}});let t="name@yourcompany.com",r=20,a={DEMO_AUTO_LOGIN:"_tabby_demo_autologin",SEARCH_INITIAL_MSG:"_tabby_search_initial_msg",SEARCH_INITIAL_CONTEXTS:"_tabby_search_initial_contexts"},i="NOT_FOUND"},12624:function(e,n,s){"use strict";s.d(n,{e:function(){return a}});var t=s(3546),r=s(62940);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,[s,a]=t.useState(!1);return t.useEffect(()=>{if(n)return;let s=(0,r.Z)(()=>{a(window.innerHeight+window.scrollY>=document.body.offsetHeight-e)},100,{leading:!0});return window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",s,{passive:!0}),s(),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",s)}},[e,n]),t.useEffect(()=>{if(!n)return;let s=(0,r.Z)(()=>{let{scrollTop:s,clientHeight:t,scrollHeight:r}=n;a(s+t>=r-e)},100,{leading:!0});return n.addEventListener("scroll",s,{passive:!0}),n.addEventListener("resize",s,{passive:!0}),s(),()=>{n.removeEventListener("scroll",s),n.removeEventListener("resize",s)}},[e,n]),s}},64566:function(e,n,s){"use strict";s.d(n,{x:function(){return u}});var t=s(3546),r=s(43240),a=s(11634),i=s(16784);let l=(0,r.BX)("\n  subscription CreateThreadAndRun($input: CreateThreadAndRunInput!) {\n    createThreadAndRun(input: $input) {\n      __typename\n      ... on ThreadCreated {\n        id\n      }\n      ... on ThreadUserMessageCreated {\n        id\n      }\n      ... on ThreadAssistantMessageCreated {\n        id\n      }\n      ... on ThreadRelevantQuestions {\n        questions\n      }\n      ... on ThreadAssistantMessageAttachmentsCode {\n        hits {\n          code {\n            gitUrl\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n      }\n      ... on ThreadAssistantMessageAttachmentsDoc {\n        hits {\n          doc {\n            title\n            link\n            content\n          }\n          score\n        }\n      }\n      ... on ThreadAssistantMessageContentDelta {\n        delta\n      }\n      ... on ThreadAssistantMessageCompleted {\n        id\n      }\n    }\n  }\n"),o=(0,r.BX)("\n  subscription CreateThreadRun($input: CreateThreadRunInput!) {\n    createThreadRun(input: $input) {\n      __typename\n      ... on ThreadCreated {\n        id\n      }\n      ... on ThreadUserMessageCreated {\n        id\n      }\n      ... on ThreadAssistantMessageCreated {\n        id\n      }\n      ... on ThreadRelevantQuestions {\n        questions\n      }\n      ... on ThreadAssistantMessageAttachmentsCode {\n        hits {\n          code {\n            gitUrl\n            filepath\n            language\n            content\n            startLine\n          }\n          scores {\n            rrf\n            bm25\n            embedding\n          }\n        }\n      }\n      ... on ThreadAssistantMessageAttachmentsDoc {\n        hits {\n          doc {\n            title\n            link\n            content\n          }\n          score\n        }\n      }\n      ... on ThreadAssistantMessageContentDelta {\n        delta\n      }\n      ... on ThreadAssistantMessageCompleted {\n        id\n      }\n    }\n  }\n"),d=(0,r.BX)("\n  mutation DeleteThreadMessagePair(\n    $threadId: ID!\n    $userMessageId: ID!\n    $assistantMessageId: ID!\n  ) {\n    deleteThreadMessagePair(\n      threadId: $threadId\n      userMessageId: $userMessageId\n      assistantMessageId: $assistantMessageId\n    )\n  }\n"),c=()=>({content:"",completed:!1});function u(e){let{threadId:n,onAssistantMessageCompleted:s}=e,[r,u]=t.useState(n),m=t.useRef(),[h,f]=t.useState(!1),[p,x]=t.useState(c()),[v,g]=t.useState(),j=(e,n)=>{let s={...e};switch(n.__typename){case"ThreadCreated":s.threadId=n.id;break;case"ThreadUserMessageCreated":s.userMessageId=n.id;break;case"ThreadAssistantMessageCreated":s.assistantMessageId=n.id;break;case"ThreadRelevantQuestions":s.relevantQuestions=n.questions;break;case"ThreadAssistantMessageAttachmentsCode":s.attachmentsCode=n.hits;break;case"ThreadAssistantMessageAttachmentsDoc":s.attachmentsDoc=n.hits;break;case"ThreadAssistantMessageContentDelta":s.content+=n.delta;break;case"ThreadAssistantMessageCompleted":s.completed=!0;break;default:throw Error("Unknown event "+JSON.stringify(s))}return s},N=(0,i.d)(e=>{var n;null===(n=m.current)||void 0===n||n.call(m),m.current=void 0,f(!1),!e&&r&&(null==s||s(p))});t.useEffect(()=>{n!==r&&u(n)},[n]);let b=(e,n)=>{let{unsubscribe:s}=a.L.subscription(l,{input:{thread:{userMessage:e},options:n}}).subscribe(e=>{var n;if(null==e?void 0:e.error){f(!1),g(e.error),s();return}let t=null===(n=e.data)||void 0===n?void 0:n.createThreadAndRun;t&&((null==t?void 0:t.__typename)==="ThreadAssistantMessageCompleted"&&N.current(),(null==t?void 0:t.__typename)==="ThreadCreated"&&t.id!==r&&u(t.id),x(e=>j(e,t)))});return s},w=(e,n)=>{if(!r)return;let{unsubscribe:s}=a.L.subscription(o,{input:{threadId:r,additionalUserMessage:e,options:n}}).subscribe(e=>{var n;if(null==e?void 0:e.error){f(!1),g(e.error),s();return}let t=null===(n=e.data)||void 0===n?void 0:n.createThreadRun;t&&("ThreadAssistantMessageCompleted"===t.__typename&&N.current(),x(e=>j(e,t)))});return s},C=(0,a.D)(d),y=(e,n)=>{h||(f(!0),g(void 0),x(c()),r?m.current=w(e,n):m.current=b(e,n))},A=(e,n,s)=>C({threadId:e,userMessageId:n,assistantMessageId:s}).then(e=>{var n;if(!(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.deleteThreadMessagePair)){if(null==e?void 0:e.error)throw e.error;throw Error("Failed to fetch")}});return{isLoading:h,answer:p,error:v,sendUserMessage:y,stop:N.current,regenerate:e=>r?(f(!0),g(void 0),x(c()),A(e.threadId,e.userMessageId,e.assistantMessageId).then(()=>{y(e.userMessage,e.threadRunOptions)}).catch(e=>{let n=e instanceof Error?e:Error("Failed to fetch");g(n),f(!1)})):Promise.resolve(void 0),deleteThreadMessagePair:A}}},80804:function(){}}]);